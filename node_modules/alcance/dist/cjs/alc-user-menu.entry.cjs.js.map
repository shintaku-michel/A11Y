{"version":3,"file":"alc-user-menu.entry.cjs.js","sources":["src/components/alc-user-menu/alc-user-menu.css?tag=alc-user-menu","src/components/alc-user-menu/alc-user-menu.tsx"],"sourcesContent":["alc-user-menu {\n  /* \"avatar\" size usado tanto para foto (image) quanto para ícone (icon) */\n  --avatar-size: theme('size.10');\n  --avatar-size-mobile: theme('size.16');\n  --border-width: theme('borderWidth.2');\n}\n\n/* ==== ESTILOS COMUNS ==== */\n/* foto do usuário */\n.alc-user-menu__image {\n  @apply w-[--avatar-size] h-[--avatar-size] border-[calc(var(--border-width)*1)] border-cyan-60v dark:border-mint-cool-40 rounded-full object-cover mr-[--alc-spacing-03];\n}\n\n.alc-user-menu__icon {\n  @apply text-[calc(var(--avatar-size)-2*var(--border-width))]/none border-[calc(var(--border-width)*1)] border-cyan-60v dark:border-mint-cool-40 rounded-full object-cover mr-[--alc-spacing-03];\n}\n\n/* ==== MOBILE (variação 1) ==== */\n.alc-user-menu--mobile {\n  @apply flex flex-col;\n}\n\n.alc-user-menu--mobile__header {\n  @apply flex items-center pl-[--alc-spacing-06] pr-[--alc-spacing-09] pt-[--alc-spacing-06];\n}\n\n.alc-user-menu--mobile__header .alc-user-menu__image {\n  @apply w-[--avatar-size-mobile] h-[--avatar-size-mobile] mr-[--alc-spacing-05] border-none;\n}\n\n.alc-user-menu--mobile__header .alc-user-menu__icon {\n  @apply text-[calc(var(--avatar-size-mobile)*1)]/none bg-[--alc-color-layer-a];\n}\n\n.alc-user-menu--mobile .alc-user-menu__name {\n  @apply text-base font-medium;\n}\n\n\n/* ==== DESKTOP (variação 2) ==== */\n/* container principal */\n.alc-user-menu--desktop {\n  @apply flex items-center justify-between;\n}\n\n.alc-user-menu__info--external {\n  @apply flex flex-col mr-[--alc-spacing-03] ml-auto text-right;\n}\n\n.alc-user-menu__info--internal {\n  @apply pl-[--alc-spacing-05] pr-[--alc-spacing-05] pb-[--alc-spacing-03] pt-[--alc-spacing-05] text-[--alc-color-text-primary];\n}\n\n.alc-user-menu__info--internal:empty {\n  @apply p-0;\n}\n\n/* bloco de informações (texto) */\n.alc-user-menu__info {\n  @apply flex flex-col mr-[--alc-spacing-03];\n}\n\n/* linha principal: nome + registration-number */\n.alc-user-menu__primary {\n  @apply items-center gap-[--alc-spacing-02];\n}\n\n.alc-user-menu__name {\n  @apply font-medium text-base/[--alc-font-line-height-base];\n}\n\n.alc-user-menu__reg {\n  @apply ml-[--alc-spacing-02] font-normal;\n}\n\n.alc-user-menu--mobile__reg {\n  @apply ml-[--alc-spacing-02] font-normal;\n}\n\n/* bloco dos acionadores */\n.alc-popup__content {\n  @apply max-w-64;\n}\n\n.alc-user-menu__trigger {\n  @apply flex items-center bg-transparent border-none p-0 cursor-pointer;\n}\n\n.alc-user-menu__dropdown alc-popup {\n  @apply flex;\n}\n\n/* informação extra (slot default) */\n.alc-user-menu__secondary {\n  @apply font-normal text-sm text-[--alc-color-text-subtle];\n}\n\n.alc-user-menu__info--external .alc-user-menu__secondary {\n  @apply text-current;\n}\n\n.alc-user-menu__logout-icon {\n  @apply mr-[--alc-spacing-03];\n}\n\n/* separador */\n.alc-user-menu__info--separator {\n  @apply border-b border-[--alc-color-border];\n}","import {\n  Component,\n  Prop,\n  State,\n  Event,\n  EventEmitter,\n  h,\n  Element,\n  Listen,\n  Host\n} from '@stencil/core';\nimport logger from '../utils/logger';\n\n@Component({\n  tag: 'alc-user-menu',\n  styleUrl: 'alc-user-menu.css',\n  scoped: false,\n})\nexport class AlcUserMenu {\n  @Element() host!: HTMLElement;\n  /**\n   * Define a variação do menu de usuário. Geralmente, não é recomendado alterar esse valor.\n   */\n  @Prop({ reflect: true }) variation: 'mobile' | 'desktop' = 'desktop';\n\n  /**\n   * Nome do usuário.\n   */\n  @Prop({ reflect: true }) name = 'Usuário';\n\n  /**\n   * Número de matrícula ou ponto do usuário.\n   */\n  @Prop({ reflect: true }) registrationNumber = '';\n\n  /**\n   * URL que efetua o logout do usuário. O link \"Sair\" navegará para essa URL.\n   */\n  @Prop({ reflect: true }) logoutUrl!: string;\n\n  /**\n   * URL da imagem do usuário. Se não for fornecida, será exibido um ícone padrão.\n   */\n  @Prop({ reflect: true }) imgSrc = '';\n\n  /**\n   * Evento disparado quando o link \"Sair\" é acionado. Se cancelado, não navegará para a URL de logout.\n   */\n  @Event({ eventName: 'alc-logout', cancelable: true, bubbles: true }) \n  alcLogout: EventEmitter;\n\n  @State() dropdownOpen = false;\n\n  // referências aos containers de “info”\n  private externalContainer!: HTMLElement;\n  private internalContainer!: HTMLElement;\n\n  // referências aos actions do menu (slot=\"actions\")\n  private desktopMenuContainer: HTMLElement;\n  private mobileMenuContainer: HTMLElement;\n  private menu: HTMLAlcMenuElement;\n\n  // referências ao slot default\n  private defaultSlot: HTMLDivElement;\n  private desktopSlotContainer: HTMLDivElement;\n  private mobileSlotContainer: HTMLDivElement;\n\n  componentDidLoad() {\n    if (this.variation === 'desktop') {\n      this.externalContainer = this.host.querySelector('.alc-user-menu__info--external')!;\n      this.internalContainer = this.host.querySelector('.alc-user-menu__info--internal')!;\n      this.moveInfo();\n    }\n  }\n\n  @Listen('resize', { target: 'window' })\n  handleResize() {\n    if (this.variation === 'desktop') {\n      this.moveInfo();\n    }\n  }\n\n  private moveInfo() {\n    const largura = window.innerWidth;\n\n    // < 1200px é compacto, >= 1200px é expandido\n    if (largura < 1200) {\n      if (this.externalContainer && this.internalContainer && this.internalContainer.children.length === 0) {\n        while (this.externalContainer.firstChild) {\n          this.internalContainer.appendChild(this.externalContainer.firstChild);\n          this.internalContainer.classList.add('alc-user-menu__info--separator');\n        }\n      }\n    } else {\n      if (this.externalContainer && this.internalContainer && this.externalContainer.children.length === 0) {\n        while (this.internalContainer.firstChild) {\n          this.externalContainer.appendChild(this.internalContainer.firstChild);\n          this.internalContainer.classList.remove('alc-user-menu__info--separator');\n        }\n      }\n    }\n  }\n\n  private handleLogout = (e: MouseEvent) => {\n    const { defaultPrevented } = this.alcLogout.emit();\n    if (defaultPrevented) {\n      e.preventDefault();\n    }\n  };\n\n  componentDidRender() {\n\n    if (this.variation === 'mobile') {\n      this.mobileMenuContainer.insertAdjacentElement('beforeend', this.menu);\n      this.mobileSlotContainer.insertAdjacentElement('beforeend', this.defaultSlot);\n    }\n    else {\n      this.desktopMenuContainer.insertAdjacentElement('beforeend', this.menu);\n      this.desktopSlotContainer.insertAdjacentElement('beforeend', this.defaultSlot);\n    }\n  }\n\n  private renderDesktop() {\n    return (\n      <div class={{\n          \"alc-user-menu--desktop\": true,\n          'hidden': this.variation === 'mobile'\n        }}\n      >\n        <div class=\"alc-user-menu__info--external\">\n          {/* conteúdo transitório: será movido */}\n          <div>\n            <div class=\"alc-user-menu__primary\">\n              <span class=\"alc-user-menu__name\">{this.name}</span>\n              {this.registrationNumber && <span class=\"alc-user-menu__reg\">({this.registrationNumber})</span>}\n            </div>\n            <div class=\"alc-user-menu__secondary\" ref={el => this.desktopSlotContainer = el}>\n            </div>\n          </div>\n        </div>\n\n        <alc-dropdown class=\"alc-user-menu__dropdown\">\n          <button\n            slot=\"trigger\"\n            class=\"alc-user-menu__trigger\"\n            aria-label=\"Abrir menu do usuário\"\n          >\n            {this.imgSrc ? (\n              <img\n                class=\"alc-user-menu__image\"\n                src={this.imgSrc}\n                alt={this.name}\n              />\n            ) : (\n              <alc-icon\n                class=\"alc-user-menu__image alc-user-menu__icon\"\n                name=\"person-fill\"\n                label={this.name}\n              />\n            )}\n            <alc-icon icon=\"chevron-down\" label=\"\" />\n          </button>\n          <div class=\"alc-user-menu__info--internal\"></div>\n          <div ref={el => this.desktopMenuContainer = el}></div>\n        </alc-dropdown>\n      </div>\n    );\n  }\n\n  private renderMobile() {\n    return (\n      <div class={{\n          \"alc-user-menu--mobile\": true,\n          'hidden': this.variation === 'desktop'\n        }}\n      >\n      {/* HEADER: foto + bloco de info (nome + slot) */}\n      <div class=\"alc-user-menu--mobile__header\">\n        {this.imgSrc ? (\n          <img\n            class=\"alc-user-menu__image\"\n            src={this.imgSrc}\n            alt={this.name}\n          />\n        ) : (\n          <alc-icon\n            class=\"alc-user-menu__image alc-user-menu__icon\"\n            name=\"person-fill\"\n            label={this.name}\n          />\n        )}\n        <div class=\"alc-user-menu--mobile__info\">\n          <div class=\"alc-user-menu__name\">{this.name}\n          {this.registrationNumber && <span class=\"alc-user-menu--mobile__reg\">({this.registrationNumber})</span>}\n          </div>\n          <div class=\"alc-user-menu__secondary\" ref={el => this.mobileSlotContainer = el}>\n          </div>\n        </div>\n      </div>\n        {/* expander para ações */}\n        <alc-expander label=\"Menu do usuário\" open={false} hide-label=\"true\">\n          <div>\n            <div ref={el => this.mobileMenuContainer = el}></div>\n          </div>\n        </alc-expander>\n      </div>\n    );\n  }\n\n  render() {\n    this.logoutUrl ?? logger.report('logoutUrl', this.host.tagName.toLowerCase(), this.host);\n\n    return (\n      <Host>\n        <alc-menu ref={el => this.menu = el}>\n          <slot name=\"actions\"></slot>\n          <alc-menu-item-theme />\n          <alc-menu-link>\n            <a href={this.logoutUrl} onClick={this.handleLogout}>\n              <alc-icon name=\"box-arrow-right\" label=\"\" class=\"alc-user-menu__logout-icon\"></alc-icon>\n              Sair\n            </a>\n          </alc-menu-link>\n        </alc-menu>\n\n        <div ref={el => this.defaultSlot = el}>\n          <slot></slot>\n        </div>\n\n        {/* Renderiza sempre os dois modelos, escondendo um ou outro */}\n        {\n          [\n            this.renderMobile(),\n            this.renderDesktop()\n          ]\n        }\n      </Host>\n    );\n  }\n}"],"names":["h","logger","Host"],"mappings":"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"}