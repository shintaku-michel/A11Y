{"version":3,"file":"alc-header-action.entry.cjs.js","sources":["src/components/alc-header-action/alc-header-action.css?tag=alc-header-action","src/components/alc-header-action/alc-header-action.tsx"],"sourcesContent":["alc-header-action {\n  display: inline\n}\n\n.alc-header-action__menu-link-icon {\n  @apply mr-2;\n}","import { Component, Host, Prop, Event, EventEmitter, Element, h } from '@stencil/core';\nimport logger from '../utils/logger';\n\nexport interface AlcActionDetail {\n  originalEvent: MouseEvent | KeyboardEvent;\n}\n\n/**\n * @slot DEFAULT - Slot para o conteúdo do componente.\n */\n@Component({\n  tag: 'alc-header-action',\n  styleUrl: 'alc-header-action.css',\n  shadow: false,\n})\nexport class AlcHeaderAction {\n  @Element() hostElement: HTMLElement;\n\n  slot: HTMLSlotElement;\n  slotNodes = null;\n  buttonContainer: HTMLElement;\n  linkContainer: HTMLElement;\n  menuItemContainer: HTMLElement;\n  menuLinkContainer: HTMLElement;\n\n  /**\n   * Nome do ícone a ser exibido.\n   */\n  @Prop({\n    reflect: true\n  })\n  iconName: string = 'square';\n\n  /**\n   * Define o tipo de elemento a ser renderizado.\n   */\n  @Prop({\n    reflect: true\n  })\n  variant: 'button' | 'menu-item' | 'link' | 'menu-link' = 'button';\n\n  /**\n   * URL para a página de suporte. Usado quando a propriedade `variant` é `link` ou `menu-link`.\n   */\n  @Prop() url: string = '';\n\n  private spaceKeyEvent: KeyboardEvent = null;\n\n  /**\n   * Evento disparado quando o usuário aciona o suporte.\n   */\n  @Event({ eventName: 'alc-select', bubbles: true })\n  alcSelect: EventEmitter<{\n    originalEvent: MouseEvent | KeyboardEvent;\n  }>;\n\n  /** handler comum a todas as ativações locais */\n  private triggerEvent = (detail: AlcActionDetail) => {\n    this.alcSelect.emit(detail);\n  };\n\n  handleKeyDownLink(event: KeyboardEvent) {\n    if (event.key === ' ') {\n      event.preventDefault();\n      const anchor = this.hostElement.querySelector('a');\n      if (anchor) {\n        this.spaceKeyEvent = event;\n        anchor.click();\n      }\n    }\n  }\n\n  handleClickLink(event: MouseEvent) {\n    const originalEvent = this.spaceKeyEvent ?? event;\n    this.spaceKeyEvent = null; // Despreza esse evento para os próximos disparos.\n    this.triggerEvent({ originalEvent: originalEvent });\n  }\n\n  handleKeyDownButton(event: KeyboardEvent) {\n    if (event.key === ' ' || event.key === 'Enter') {\n      event.preventDefault();\n      this.triggerEvent({ originalEvent: event });\n    }\n  }\n\n  handleClickButton(event: MouseEvent) {\n    event.preventDefault()\n    this.triggerEvent({ originalEvent: event });\n  }\n\n  handleAlcSelect(event: CustomEvent) {\n    // Esse código faz com que o evento deixe de ser do menu-item ou do menu-link\n    // e passe a ser um evento do header-action.\n    // Dessa forma, o usuário desse componente não precisa se preocupar com esse\n    // detalhe da implementação interna. Ou seja, para todos os efeitos, para quem\n    // vê de fora, o evento é disparado pelo header-action.\n    event.stopPropagation();\n    this.triggerEvent({\n      originalEvent: event.detail.originalEvent\n    });\n  }\n\n  componentDidLoad() {\n    this.slotNodes = this.slot.assignedNodes();\n  }\n\n  componentDidRender() {\n    logger.debug('alc-header-action did render', this.slotNodes);\n\n    // Captura os nós do <slot> apenas na primeira execução\n    this.slotNodes ??= this.slot?.assignedNodes();\n\n    // Mapeia cada variante ao respectivo container\n    const containerByVariant: Record<AlcHeaderAction['variant'], HTMLElement | undefined> = {\n      button: this.buttonContainer,\n      link: this.linkContainer,\n      'menu-item': this.menuItemContainer,\n      'menu-link': this.menuLinkContainer,\n    };\n\n    const target = containerByVariant[this.variant];\n    const node = this.slotNodes?.[0];\n\n    // Só anexa se ambos existirem e o nó ainda não estiver no container\n    if (target && node && !target.contains(node)) {\n      target.appendChild(node);\n    }\n  }\n\n\n  render() {\n    // Tabela de renderização por variante\n    const renderByVariant: Record<\n      AlcHeaderAction['variant'],\n      (() => any) | undefined\n    > = {\n      button: this.renderButton.bind(this),\n      link: this.renderLink.bind(this),\n      'menu-item': this.renderMenuItem.bind(this),\n      'menu-link': this.renderMenuLink.bind(this),\n    };\n\n    // Executa o renderer correspondente (se existir)\n    const VariantContent = renderByVariant[this.variant]?.();\n\n    return (\n      <Host>\n        {/* Captura o <slot> apenas uma vez */}\n        <slot ref={el => (this.slot = el as HTMLSlotElement)} />\n        {VariantContent}\n      </Host>\n    );\n  }\n\n  renderButton() {\n\n    return (\n      <button\n        class=\"alc-header-button\"\n        onClick={this.handleClickButton.bind(this)}\n        onKeyDown={this.handleKeyDownButton.bind(this)}\n      >\n        <alc-icon icon={this.iconName} label=\"\" class=\"alc-header-button__icon\"></alc-icon>\n        <span\n          class=\"alc-header-button__label\"\n          ref={el => this.buttonContainer = el}\n        >\n        </span>\n\n        {/* {this.slot} */}\n      </button>\n    );\n  }\n\n  renderLink() {\n\n    return (\n      <a\n        href={this.url}\n        class=\"alc-header-button\"\n        onClick={this.handleClickLink.bind(this)}\n        onKeyDown={this.handleKeyDownLink.bind(this)}\n      >\n        <alc-icon icon={this.iconName} label=\"\" class=\"alc-header-button__icon\"></alc-icon>\n        <span\n          class=\"alc-header-button__label\"\n          ref={el => this.linkContainer = el}\n        >\n        </span>\n\n        {/* {this.slot} */}\n      </a>\n    );\n  }\n\n\n  renderMenuItem() {\n    return (\n      <alc-menu-item\n        onAlc-select={this.handleAlcSelect.bind(this)}\n      >\n        <alc-icon slot=\"prefix\" icon={this.iconName} label=\"\"></alc-icon>\n        <span\n          ref={el => this.menuItemContainer = el}\n        >\n        </span>\n        {/* {this.slot} */}\n      </alc-menu-item>\n    );\n  }\n\n  renderMenuLink() {\n    return (\n      <alc-menu-link\n        onAlc-select={this.handleAlcSelect.bind(this)}\n      >\n        <a\n          href={this.url}\n          ref={el => this.menuLinkContainer = el}\n        >\n          <alc-icon icon={this.iconName} label=\"\" class=\"alc-header-action__menu-link-icon\"></alc-icon>\n\n          {/* {this.slot} */}\n        </a>\n      </alc-menu-link>\n    );\n  }\n}\n"],"names":["logger","h","Host"],"mappings":"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"}