{"version":3,"file":"alc-header-notifications.entry.js","sources":["src/components/alc-header-notifications/alc-header-notifications.css?tag=alc-header-notifications","src/components/alc-header-notifications/alc-header-notifications.tsx"],"sourcesContent":["/*\n  Manipulação direta no estilo de alc-badge,\n  para atender ao que foi especificado no Figma.\n */\n.alc-header-notifications .alc-badge {\n  @apply rounded-[8px] py-0 px-[2px] bg-orange-warm-30v text-black;\n  line-height: 1em;\n}\n\n.alc-header-notifications__aria-live {\n  @apply sr-only;\n}","import { Component, Host, Prop, Watch, h, Event, EventEmitter } from '@stencil/core';\nimport logger from '../utils/logger';\n\n/*\n  TODO: Avaliar possibilidade de \"abrir\" para modificar rótulo do botão\n  Nessa versão, não será possível alterar o rótulo do botão.\n  Há uma certa dificuldade para lidar com slot, possível html dentro do slot,\n  e a extração do texto correspondente para criar os elementos audíveis.\n*/\nconst BUTTON_LABEL = \"Notificações\";\nconst MAX_COUNTER = 99;\n\n@Component({\n  tag: 'alc-header-notifications',\n  styleUrl: 'alc-header-notifications.css',\n  scoped: false,\n})\nexport class AlcHeaderNotifications {\n\n  private overflow = false;\n  private notificationsLabel = \"\";\n  private notificationsAudible = \"\";\n\n  /**\n   * Número de notificações a serem exibidas no botão.\n   */\n  @Prop({\n    reflect: true,\n    mutable: false,\n  })\n  notifications: number = 0;\n\n  /**\n   * Define o tipo de elemento a ser renderizado. Pode ser um button ou um link.\n   */\n  @Prop({\n    reflect: true\n  })\n  variant: 'button' | 'link' = 'button';\n\n  /**\n   * URL para a página de notificações. Usado quando a propriedade `variant` é `link`.\n   * Se o `variant` for `button`, esse atributo será ignorado.\n   */\n  @Prop({ reflect: true }) url: string = '';\n\n  @Watch('notifications')\n  watchNotifications(newValue: number) {\n\n    if (Number.isNaN(newValue)) {\n      logger.warn('O valor do atributo \"notifications\" deve ser numérico. Assumindo o valor padrão 0.');\n      newValue = 0;\n    }\n\n    if (newValue === 0) {\n      this.notificationsLabel = \"\";\n      this.notificationsAudible = \"\";\n      this.overflow = false;\n    }\n    else if (newValue > MAX_COUNTER) {\n      this.notificationsLabel = `${MAX_COUNTER}+`;\n      this.notificationsAudible = `Mais de ${MAX_COUNTER} ${BUTTON_LABEL}`;\n      this.overflow = true;\n    }\n    else {\n      this.notificationsLabel = newValue.toString();\n      this.notificationsAudible = `${newValue.toString()} ${BUTTON_LABEL}`;\n      this.overflow = false;\n    }\n  }\n\n  /**\n   * Evento disparado quando o usuário clica nas notificações. Pode ser cancelado.\n   */\n  @Event({\n    eventName: 'alc-click',\n    bubbles: true,\n    cancelable: true\n  })\n  alcClick: EventEmitter<null>;\n\n  async handleClick(event: MouseEvent) {\n    const { defaultPrevented } = this.alcClick.emit();\n    if (defaultPrevented) {\n      event.preventDefault();\n    }\n  }\n\n  componentWillLoad() {\n    this.watchNotifications(this.notifications);\n  }\n\n  render() {\n    const commonProps = {\n      class: \"alc-header-button\",\n      \"aria-label\": this.overflow ? `${this.notificationsAudible}` : null,\n      onClick: (event: MouseEvent) => this.handleClick(event),\n    };\n\n    return (\n      <Host>\n        <span class=\"alc-header-notifications\">\n          \n          {this.variant === 'button' ? (\n            <button {...commonProps}>\n              {this.renderContent()}\n            </button>\n          ) : (\n            <a href={this.url} {...commonProps}>\n              {this.renderContent()}\n            </a>\n          )}\n\n          {/* aria live container */}\n          <span\n            role=\"status\"\n            aria-live=\"polite\"\n            aria-atomic=\"true\"\n            class=\"alc-header-notifications__aria-live\"\n          >\n            { this.notifications\n              ?\n                `${this.notificationsAudible}`\n              :\n                null\n            }\n          </span>\n        </span>\n      </Host>\n    );\n  }\n\n  renderContent() {\n    const badge = (\n      <alc-badge\n        color=\"warning\"\n        count={true}\n        label={this.notificationsLabel}\n      >\n        <alc-icon name=\"bell\" label=\"\" class=\"alc-header-button__icon\"></alc-icon>\n      </alc-badge>\n    )\n\n    const label = (\n      <span class=\"alc-header-button__label\">\n        {BUTTON_LABEL}\n      </span>\n    )\n\n    return [\n      badge,\n      label\n    ]\n  }\n\n}\n"],"names":[],"mappings":"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"}