{"version":3,"file":"alc-skip-to-nav.js","sourceRoot":"","sources":["../../../../src/components/alc-skip-to-nav/alc-skip-to-nav.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, h } from '@stencil/core';\nimport { focusFirstElement, getFocusableElements } from '../utils/keydown';\nimport screens from '../../../tailwind-screens';\nimport logger from '../utils/logger';\n\nconst MD_BREAKPOINT = Number(screens.md.split('px')[0]);\n\n@Component({\n  tag: 'alc-skip-to-nav',\n  styleUrl: 'alc-skip-to-nav.css',\n  scoped: false\n})\nexport class AlcSkipToNav {\n  handleClick = (event: MouseEvent) => {\n    event.preventDefault();\n\n    // Abaixo do breakpoint md, é renderizado o drawer.\n    if (window.innerWidth < MD_BREAKPOINT) {\n      // Procura pelo botão que abre o drawer: ou o gerado pelo alc-header(-v2), ou o gerado pelo sidepanel.\n      const drawerButton = document.querySelector('[data-alc-header-drawer-button], [data-alc-sidepanel-drawer-button]');\n\n      if (!drawerButton) {\n        logger.warn('O componente <alc-skip-to-nav> necessita de <alc-header> ou <alc-sidepanel> para funcionar corretamente no modo mobile.');\n        return;\n      }\n\n      if (drawerButton instanceof HTMLButtonElement) {\n        drawerButton.focus();\n      }\n\n      return;\n    }\n\n    // Lógica para não mobile\n\n    let skipped = false;\n\n    // Cenário 1 - alc-nav-panel\n    const navpanel = document.querySelector('alc-nav-panel');\n    if (navpanel) {\n      if (navpanel.open) {\n        const nav = navpanel.querySelector('alc-nav');\n        if (nav) {\n          focusFirstElement(getFocusableElements(nav));\n          skipped = true;\n        }\n        else {\n          logger.warn('Ao usar o <alc-nav-panel>, é necessário <alc-nav> dentro dele para <alc-skip-top-nav> funcionar corretamente.');\n          return; // Aqui, não há mais nada a fazer.\n        }\n      }\n      else { // navpanel fechado\n        const navButton = document.querySelector('[data-alc-navpanel-button]');\n        if (navButton instanceof HTMLButtonElement) {\n          navButton.focus();\n          skipped = true;\n        }\n      }\n    }\n\n    if (skipped) {\n      return;\n    }\n\n    // Cenário 2 - alc-sidepanel (legado)\n    const sidepanel = document.querySelector('alc-sidepanel');\n    if (sidepanel) {\n      if (sidepanel.visible) {\n        const nav = sidepanel.querySelector('alc-nav');\n        if (nav) {\n          focusFirstElement(getFocusableElements(nav));\n          skipped = true;\n        }\n        else {\n          logger.warn('Ao usar o <alc-sidepanel>, é necessário <alc-nav> dentro dele para <alc-skip-top-nav> funcionar corretamente.');\n          return; // Aqui, não há mais nada a fazer.\n        }\n      }\n      else { // sidepanel fechado\n        const navButton = document.querySelector('[data-alc-sidepanel-button]');\n        if (navButton instanceof HTMLButtonElement) {\n          navButton.focus();\n          skipped = true;\n        }\n      }\n    }\n\n    if (skipped) {\n      return;\n    }\n\n    // Cenário 3 - alc-nav sem nenhum dos painéis (genérico)\n    const nav = document.querySelector('alc-nav');\n    if (nav) {\n      focusFirstElement(getFocusableElements(nav));\n      skipped = true;\n    }\n\n    if (!skipped) {\n      logger.warn('O componente <alc-skip-to-nav> não localizou os elementos necessários para funcionar corretamente. Verifique a documentação do componente.');\n    }\n  }\n\n  render() {\n    return (\n      <Host>\n        <a\n          class='alc-link text-center'\n          href='#'\n          onClick={this.handleClick}\n        >\n          Ir para navegação\n        </a>\n      </Host>\n    );\n  }\n}\n"]}