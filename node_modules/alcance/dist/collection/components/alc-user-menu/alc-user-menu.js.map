{"version":3,"file":"alc-user-menu.js","sourceRoot":"","sources":["../../../../src/components/alc-user-menu/alc-user-menu.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  Prop,\n  State,\n  Event,\n  EventEmitter,\n  h,\n  Element,\n  Listen,\n  Host\n} from '@stencil/core';\nimport logger from '../utils/logger';\n\n@Component({\n  tag: 'alc-user-menu',\n  styleUrl: 'alc-user-menu.css',\n  scoped: false,\n})\nexport class AlcUserMenu {\n  @Element() host!: HTMLElement;\n  /**\n   * Define a variação do menu de usuário. Geralmente, não é recomendado alterar esse valor.\n   */\n  @Prop({ reflect: true }) variation: 'mobile' | 'desktop' = 'desktop';\n\n  /**\n   * Nome do usuário.\n   */\n  @Prop({ reflect: true }) name = 'Usuário';\n\n  /**\n   * Número de matrícula ou ponto do usuário.\n   */\n  @Prop({ reflect: true }) registrationNumber = '';\n\n  /**\n   * URL que efetua o logout do usuário. O link \"Sair\" navegará para essa URL.\n   */\n  @Prop({ reflect: true }) logoutUrl!: string;\n\n  /**\n   * URL da imagem do usuário. Se não for fornecida, será exibido um ícone padrão.\n   */\n  @Prop({ reflect: true }) imgSrc = '';\n\n  /**\n   * Evento disparado quando o link \"Sair\" é acionado. Se cancelado, não navegará para a URL de logout.\n   */\n  @Event({ eventName: 'alc-logout', cancelable: true, bubbles: true }) \n  alcLogout: EventEmitter;\n\n  @State() dropdownOpen = false;\n\n  // referências aos containers de “info”\n  private externalContainer!: HTMLElement;\n  private internalContainer!: HTMLElement;\n\n  // referências aos actions do menu (slot=\"actions\")\n  private desktopMenuContainer: HTMLElement;\n  private mobileMenuContainer: HTMLElement;\n  private menu: HTMLAlcMenuElement;\n\n  // referências ao slot default\n  private defaultSlot: HTMLDivElement;\n  private desktopSlotContainer: HTMLDivElement;\n  private mobileSlotContainer: HTMLDivElement;\n\n  componentDidLoad() {\n    if (this.variation === 'desktop') {\n      this.externalContainer = this.host.querySelector('.alc-user-menu__info--external')!;\n      this.internalContainer = this.host.querySelector('.alc-user-menu__info--internal')!;\n      this.moveInfo();\n    }\n  }\n\n  @Listen('resize', { target: 'window' })\n  handleResize() {\n    if (this.variation === 'desktop') {\n      this.moveInfo();\n    }\n  }\n\n  private moveInfo() {\n    const largura = window.innerWidth;\n\n    // < 1200px é compacto, >= 1200px é expandido\n    if (largura < 1200) {\n      if (this.externalContainer && this.internalContainer && this.internalContainer.children.length === 0) {\n        while (this.externalContainer.firstChild) {\n          this.internalContainer.appendChild(this.externalContainer.firstChild);\n          this.internalContainer.classList.add('alc-user-menu__info--separator');\n        }\n      }\n    } else {\n      if (this.externalContainer && this.internalContainer && this.externalContainer.children.length === 0) {\n        while (this.internalContainer.firstChild) {\n          this.externalContainer.appendChild(this.internalContainer.firstChild);\n          this.internalContainer.classList.remove('alc-user-menu__info--separator');\n        }\n      }\n    }\n  }\n\n  private handleLogout = (e: MouseEvent) => {\n    const { defaultPrevented } = this.alcLogout.emit();\n    if (defaultPrevented) {\n      e.preventDefault();\n    }\n  };\n\n  componentDidRender() {\n\n    if (this.variation === 'mobile') {\n      this.mobileMenuContainer.insertAdjacentElement('beforeend', this.menu);\n      this.mobileSlotContainer.insertAdjacentElement('beforeend', this.defaultSlot);\n    }\n    else {\n      this.desktopMenuContainer.insertAdjacentElement('beforeend', this.menu);\n      this.desktopSlotContainer.insertAdjacentElement('beforeend', this.defaultSlot);\n    }\n  }\n\n  private renderDesktop() {\n    return (\n      <div class={{\n          \"alc-user-menu--desktop\": true,\n          'hidden': this.variation === 'mobile'\n        }}\n      >\n        <div class=\"alc-user-menu__info--external\">\n          {/* conteúdo transitório: será movido */}\n          <div>\n            <div class=\"alc-user-menu__primary\">\n              <span class=\"alc-user-menu__name\">{this.name}</span>\n              {this.registrationNumber && <span class=\"alc-user-menu__reg\">({this.registrationNumber})</span>}\n            </div>\n            <div class=\"alc-user-menu__secondary\" ref={el => this.desktopSlotContainer = el}>\n            </div>\n          </div>\n        </div>\n\n        <alc-dropdown class=\"alc-user-menu__dropdown\">\n          <button\n            slot=\"trigger\"\n            class=\"alc-user-menu__trigger\"\n            aria-label=\"Abrir menu do usuário\"\n          >\n            {this.imgSrc ? (\n              <img\n                class=\"alc-user-menu__image\"\n                src={this.imgSrc}\n                alt={this.name}\n              />\n            ) : (\n              <alc-icon\n                class=\"alc-user-menu__image alc-user-menu__icon\"\n                name=\"person-fill\"\n                label={this.name}\n              />\n            )}\n            <alc-icon icon=\"chevron-down\" label=\"\" />\n          </button>\n          <div class=\"alc-user-menu__info--internal\"></div>\n          <div ref={el => this.desktopMenuContainer = el}></div>\n        </alc-dropdown>\n      </div>\n    );\n  }\n\n  private renderMobile() {\n    return (\n      <div class={{\n          \"alc-user-menu--mobile\": true,\n          'hidden': this.variation === 'desktop'\n        }}\n      >\n      {/* HEADER: foto + bloco de info (nome + slot) */}\n      <div class=\"alc-user-menu--mobile__header\">\n        {this.imgSrc ? (\n          <img\n            class=\"alc-user-menu__image\"\n            src={this.imgSrc}\n            alt={this.name}\n          />\n        ) : (\n          <alc-icon\n            class=\"alc-user-menu__image alc-user-menu__icon\"\n            name=\"person-fill\"\n            label={this.name}\n          />\n        )}\n        <div class=\"alc-user-menu--mobile__info\">\n          <div class=\"alc-user-menu__name\">{this.name}\n          {this.registrationNumber && <span class=\"alc-user-menu--mobile__reg\">({this.registrationNumber})</span>}\n          </div>\n          <div class=\"alc-user-menu__secondary\" ref={el => this.mobileSlotContainer = el}>\n          </div>\n        </div>\n      </div>\n        {/* expander para ações */}\n        <alc-expander label=\"Menu do usuário\" open={false} hide-label=\"true\">\n          <div>\n            <div ref={el => this.mobileMenuContainer = el}></div>\n          </div>\n        </alc-expander>\n      </div>\n    );\n  }\n\n  render() {\n    this.logoutUrl ?? logger.report('logoutUrl', this.host.tagName.toLowerCase(), this.host);\n\n    return (\n      <Host>\n        <alc-menu ref={el => this.menu = el}>\n          <slot name=\"actions\"></slot>\n          <alc-menu-item-theme />\n          <alc-menu-link>\n            <a href={this.logoutUrl} onClick={this.handleLogout}>\n              <alc-icon name=\"box-arrow-right\" label=\"\" class=\"alc-user-menu__logout-icon\"></alc-icon>\n              Sair\n            </a>\n          </alc-menu-link>\n        </alc-menu>\n\n        <div ref={el => this.defaultSlot = el}>\n          <slot></slot>\n        </div>\n\n        {/* Renderiza sempre os dois modelos, escondendo um ou outro */}\n        {\n          [\n            this.renderMobile(),\n            this.renderDesktop()\n          ]\n        }\n      </Host>\n    );\n  }\n}"]}