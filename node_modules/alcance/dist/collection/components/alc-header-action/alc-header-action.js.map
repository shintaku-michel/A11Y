{"version":3,"file":"alc-header-action.js","sourceRoot":"","sources":["../../../../src/components/alc-header-action/alc-header-action.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, Prop, Event, EventEmitter, Element, h } from '@stencil/core';\nimport logger from '../utils/logger';\n\nexport interface AlcActionDetail {\n  originalEvent: MouseEvent | KeyboardEvent;\n}\n\n/**\n * @slot DEFAULT - Slot para o conteúdo do componente.\n */\n@Component({\n  tag: 'alc-header-action',\n  styleUrl: 'alc-header-action.css',\n  shadow: false,\n})\nexport class AlcHeaderAction {\n  @Element() hostElement: HTMLElement;\n\n  slot: HTMLSlotElement;\n  slotNodes = null;\n  buttonContainer: HTMLElement;\n  linkContainer: HTMLElement;\n  menuItemContainer: HTMLElement;\n  menuLinkContainer: HTMLElement;\n\n  /**\n   * Nome do ícone a ser exibido.\n   */\n  @Prop({\n    reflect: true\n  })\n  iconName: string = 'square';\n\n  /**\n   * Define o tipo de elemento a ser renderizado.\n   */\n  @Prop({\n    reflect: true\n  })\n  variant: 'button' | 'menu-item' | 'link' | 'menu-link' = 'button';\n\n  /**\n   * URL para a página de suporte. Usado quando a propriedade `variant` é `link` ou `menu-link`.\n   */\n  @Prop() url: string = '';\n\n  private spaceKeyEvent: KeyboardEvent = null;\n\n  /**\n   * Evento disparado quando o usuário aciona o suporte.\n   */\n  @Event({ eventName: 'alc-select', bubbles: true })\n  alcSelect: EventEmitter<{\n    originalEvent: MouseEvent | KeyboardEvent;\n  }>;\n\n  /** handler comum a todas as ativações locais */\n  private triggerEvent = (detail: AlcActionDetail) => {\n    this.alcSelect.emit(detail);\n  };\n\n  handleKeyDownLink(event: KeyboardEvent) {\n    if (event.key === ' ') {\n      event.preventDefault();\n      const anchor = this.hostElement.querySelector('a');\n      if (anchor) {\n        this.spaceKeyEvent = event;\n        anchor.click();\n      }\n    }\n  }\n\n  handleClickLink(event: MouseEvent) {\n    const originalEvent = this.spaceKeyEvent ?? event;\n    this.spaceKeyEvent = null; // Despreza esse evento para os próximos disparos.\n    this.triggerEvent({ originalEvent: originalEvent });\n  }\n\n  handleKeyDownButton(event: KeyboardEvent) {\n    if (event.key === ' ' || event.key === 'Enter') {\n      event.preventDefault();\n      this.triggerEvent({ originalEvent: event });\n    }\n  }\n\n  handleClickButton(event: MouseEvent) {\n    event.preventDefault()\n    this.triggerEvent({ originalEvent: event });\n  }\n\n  handleAlcSelect(event: CustomEvent) {\n    // Esse código faz com que o evento deixe de ser do menu-item ou do menu-link\n    // e passe a ser um evento do header-action.\n    // Dessa forma, o usuário desse componente não precisa se preocupar com esse\n    // detalhe da implementação interna. Ou seja, para todos os efeitos, para quem\n    // vê de fora, o evento é disparado pelo header-action.\n    event.stopPropagation();\n    this.triggerEvent({\n      originalEvent: event.detail.originalEvent\n    });\n  }\n\n  componentDidLoad() {\n    this.slotNodes = this.slot.assignedNodes();\n  }\n\n  componentDidRender() {\n    logger.debug('alc-header-action did render', this.slotNodes);\n\n    // Captura os nós do <slot> apenas na primeira execução\n    this.slotNodes ??= this.slot?.assignedNodes();\n\n    // Mapeia cada variante ao respectivo container\n    const containerByVariant: Record<AlcHeaderAction['variant'], HTMLElement | undefined> = {\n      button: this.buttonContainer,\n      link: this.linkContainer,\n      'menu-item': this.menuItemContainer,\n      'menu-link': this.menuLinkContainer,\n    };\n\n    const target = containerByVariant[this.variant];\n    const node = this.slotNodes?.[0];\n\n    // Só anexa se ambos existirem e o nó ainda não estiver no container\n    if (target && node && !target.contains(node)) {\n      target.appendChild(node);\n    }\n  }\n\n\n  render() {\n    // Tabela de renderização por variante\n    const renderByVariant: Record<\n      AlcHeaderAction['variant'],\n      (() => any) | undefined\n    > = {\n      button: this.renderButton.bind(this),\n      link: this.renderLink.bind(this),\n      'menu-item': this.renderMenuItem.bind(this),\n      'menu-link': this.renderMenuLink.bind(this),\n    };\n\n    // Executa o renderer correspondente (se existir)\n    const VariantContent = renderByVariant[this.variant]?.();\n\n    return (\n      <Host>\n        {/* Captura o <slot> apenas uma vez */}\n        <slot ref={el => (this.slot = el as HTMLSlotElement)} />\n        {VariantContent}\n      </Host>\n    );\n  }\n\n  renderButton() {\n\n    return (\n      <button\n        class=\"alc-header-button\"\n        onClick={this.handleClickButton.bind(this)}\n        onKeyDown={this.handleKeyDownButton.bind(this)}\n      >\n        <alc-icon icon={this.iconName} label=\"\" class=\"alc-header-button__icon\"></alc-icon>\n        <span\n          class=\"alc-header-button__label\"\n          ref={el => this.buttonContainer = el}\n        >\n        </span>\n\n        {/* {this.slot} */}\n      </button>\n    );\n  }\n\n  renderLink() {\n\n    return (\n      <a\n        href={this.url}\n        class=\"alc-header-button\"\n        onClick={this.handleClickLink.bind(this)}\n        onKeyDown={this.handleKeyDownLink.bind(this)}\n      >\n        <alc-icon icon={this.iconName} label=\"\" class=\"alc-header-button__icon\"></alc-icon>\n        <span\n          class=\"alc-header-button__label\"\n          ref={el => this.linkContainer = el}\n        >\n        </span>\n\n        {/* {this.slot} */}\n      </a>\n    );\n  }\n\n\n  renderMenuItem() {\n    return (\n      <alc-menu-item\n        onAlc-select={this.handleAlcSelect.bind(this)}\n      >\n        <alc-icon slot=\"prefix\" icon={this.iconName} label=\"\"></alc-icon>\n        <span\n          ref={el => this.menuItemContainer = el}\n        >\n        </span>\n        {/* {this.slot} */}\n      </alc-menu-item>\n    );\n  }\n\n  renderMenuLink() {\n    return (\n      <alc-menu-link\n        onAlc-select={this.handleAlcSelect.bind(this)}\n      >\n        <a\n          href={this.url}\n          ref={el => this.menuLinkContainer = el}\n        >\n          <alc-icon icon={this.iconName} label=\"\" class=\"alc-header-action__menu-link-icon\"></alc-icon>\n\n          {/* {this.slot} */}\n        </a>\n      </alc-menu-link>\n    );\n  }\n}\n"]}