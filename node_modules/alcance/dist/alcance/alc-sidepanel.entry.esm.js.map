{"version":3,"file":"alc-sidepanel.entry.esm.js","sources":["src/components/alc-sidepanel/alc-sidepanel.css?tag=alc-sidepanel","src/components/alc-sidepanel/alc-sidepanel.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n\nalc-sidepanel {\n  /*\n    --offset\n    Esse valor é calculado pelo componente.\n    Representa a posição inicial (vertical) do sidepanel na página.\n    Deve fazer parte da API do sidepanel para que a aplicação possa ajustar caso seja necessário.\n  */\n  /* O valor default é 80px, que seria a altura padrão em produção, em situação \"normal\" */\n  --_offset: calc(var(--offset, 80) * 1px);\n  /* A altura do sidepanel é o total da view subtraído do offset. */\n  --height: calc(100vh - var(--_offset));\n}\n\n.alc-sidepanel__mobile-container {\n  @apply md:hidden;\n}\n\n.alc-sidepanel__desktop-container {\n  @apply hidden md:block sticky top-[--_offset] z-[1020];\n}\n\n.alc-sidepanel__desktop-slot {\n  @apply hidden overflow-y-auto bg-white dark:bg-black;\n  height: var(--height)\n}\n\n.alc-sidepanel__desktop-slot.is-open {\n  @apply block w-72 shadow-xl;\n}","import { Component, Element, Event, EventEmitter, h, Host, Listen, Method, Prop, State } from '@stencil/core';\nimport screens from '../../../tailwind-screens';\nimport logger from '../utils/logger';\nimport test from '../utils/testAttributes';\n\n// Pega o valor definido da configuração do tailwind e remove o 'px'\nconst MOBILE_BREAKPOINT = Number(screens.md.split('px')[0]);\nconst DEFAULT_STATE = {\n  visible: true\n};\n\n/**\n * @slot DEFAULT - Slot para o conteúdo do sidepanel.\n */\n\n@Component({\n  tag: 'alc-sidepanel',\n  styleUrl: 'alc-sidepanel.css',\n  scoped: false,\n})\nexport class AlcSidepanel {\n  @Element() el: HTMLAlcSidepanelElement;\n\n  @State() isMobile: boolean = false;\n\n  drawer: HTMLAlcDrawerElement = null;\n  slotContainer: HTMLElement = null;\n  mobileSlot: HTMLElement = null;\n  desktopSlot: HTMLElement = null;\n  slotContent: HTMLElement = null;\n\n  ro: ResizeObserver;\n\n  state: {\n    visible: boolean,\n  } = DEFAULT_STATE;\n\n  /**\n   * Indica se o sidepanel está visível.\n   */\n  @Prop({\n    reflect: true,\n    mutable: true\n  })\n  visible: boolean = true;\n\n  /**\n   * Abre o sidepanel.\n   * @returns O valor retornado é `true` se o painel foi exibido com a chamada do método.\n   */\n  @Method()\n  async show(): Promise<boolean> {\n    this.visible = true;\n    this.state.visible = this.visible;\n    if (this.isMobile) {\n      return this.drawer.show();\n    }\n    else {\n      this.alcStateChange.emit({state: this.state});\n    }\n    return;\n  }\n\n  /**\n   * Fecha o sidepanel\n   * @returns O valor retornado é `true` se o painel foi dispensado com a chamada do método.\n   */\n  @Method()\n  async hide(): Promise<boolean> {\n    this.visible = false;\n    this.state.visible = this.visible;\n    if (this.isMobile) {\n      return this.drawer.hide();\n    }\n    else {\n      this.alcStateChange.emit({state: this.state});\n    }\n    return;\n  }\n\n  @Listen('resize', { target: 'window' })\n  handleResize() {\n    this.isMobile = window.innerWidth < MOBILE_BREAKPOINT;\n  }\n\n  /**\n   * Evento disparado quando o estado do sidepanel é alterado.\n   */\n  @Event({\n    eventName: 'alc-state-change',\n    cancelable: false,\n    bubbles: true\n  }) alcStateChange: EventEmitter<{state: {visible: boolean}}>;\n\n  /**\n   * Evento disparado quando o sidepanel precisa recuperar o estado.\n   */\n  @Event({\n    eventName: 'alc-state-request',\n    cancelable: false,\n    bubbles: true\n  }) alcStateRequest: EventEmitter<{state: {visible: boolean}}>;\n\n  componentWillLoad() {\n    let detail = {\n      state: this.state\n    };\n\n    this.handleResize();\n    this.state.visible = this.visible;\n    this.alcStateRequest.emit(detail);\n    // Garante que o objeto this.state tenha as chaves esperadas, independente do valor de detail.state\n    this.state = {...DEFAULT_STATE, ...detail.state};\n    this.visible = this.state.visible;\n  }\n\n  componentDidRender() {\n    if (this.slotContainer.children?.length) {\n      // @TODO Melhorar isso, pois pressupõe que tem somente um children\n      this.slotContent = this.slotContainer.children[0] as HTMLElement;\n    }\n\n    if (this.isMobile) {\n      this.mobileSlot.appendChild(this.slotContent);\n    }\n    else {\n      this.desktopSlot.appendChild(this.slotContent);\n    }\n\n    this.setOffset();\n\n    const top: HTMLElement = document.querySelector('[data-alc-top]');\n\n    this.ro?.disconnect();\n    this.ro = new ResizeObserver(() => {\n      this.setOffset();\n    });\n    this.ro.observe(top);\n\n  }\n\n  disconnectedCallback() {\n    this.ro?.disconnect();\n  }\n\n  renderMobile = () => (\n    [\n      <button\n        class=\"alc-button alc-button-rounded absolute right-2 -mt-[3.25rem] text-white\"\n        onClick={() => this.drawer.show()}\n        {...test('data-test-sidepanel-mobile-close-button')}\n        data-alc-sidepanel-drawer-button\n      >\n        <alc-icon name=\"list\" label=\"Abrir\"></alc-icon>\n      </button>,\n      <alc-drawer\n        onSl-show={() => this.visible = true}\n        onSl-hide={() => this.visible = false}\n        ref={el => this.drawer = el}\n      >\n        <div ref={el => this.mobileSlot = el}></div>\n      </alc-drawer>\n    ]\n  )\n\n  render() {\n    console.debug('render menu container');\n\n    if (!this.isMobile && this.visible) {\n      document.querySelector('html').classList.add('alc-sidepanel-visible');\n    }\n    else {\n      document.querySelector('html').classList.remove('alc-sidepanel-visible');\n    }\n\n    return (\n      <Host\n        class=\"alc-sidepanel\"\n      >\n        <div ref={el => this.slotContainer = el}>\n          <slot></slot>\n        </div>\n        <div\n          class={{\n            'alc-sidepanel__mobile-container': true,\n          }}\n        >\n          {this.renderMobile()}\n        </div>\n        <div\n          class={{\n            'alc-sidepanel__desktop-container': true,\n          }}\n        >\n          <button\n            type=\"button\"\n            class=\"alc-button alc-button-rounded fixed left-2 -mt-[3.75rem] text-white z-[1020] focus-visible:outline-2 focus-visible:outline-white\"\n            onClick={() => this.visible ? this.hide() : this.show()}\n            aria-pressed={this.visible ? 'true' : 'false'}\n            {...test('data-test-sidepanel-desktop-close-button')}\n            data-alc-sidepanel-button\n          >\n            <alc-icon name=\"list\" label=\"Exibir navegação\"></alc-icon>\n          </button>\n          <div\n            ref={el => this.desktopSlot = el}\n            class={{\n              'alc-sidepanel__desktop-slot': true,\n              'is-open': this.visible,\n            }}\n          >\n          </div>\n        </div>\n      </Host>\n    );\n  }\n\n  setOffset() {\n    const top: HTMLElement = document.querySelector('[data-alc-top]');\n    logger.debug(top.offsetHeight);\n    this.el.style.setProperty('--offset', top.offsetHeight.toString());\n  }\n}"],"names":["test"],"mappings":"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"}