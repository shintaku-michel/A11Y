{"version":3,"names":["alcAutocompleteCss","AlcAutocomplete","constructor","hostRef","this","items","displayKeys","label","hint","required","listDirection","disabled","loading","error","errorMsg","filteredData","itemSelected","selectedItemValue","emptyResult","activeRowIndex","activeColIndex","rowsCount","colsCount","gridFocused","shown","selectionCol","selectedItemValueChanged","newValue","alcChange","emit","handleLoadingChange","newVal","oldVal","input","requestAnimationFrame","focus","componentWillLoad","inputId","getUniqueId","gridId","labelId","messageRowContainerId","componentDidLoad","observer","MutationObserver","hasAttribute","setAttribute","observe","attributes","attributeFilter","addEventListener","handleFocus","bind","handleBodyClick","evt","target","Node","grid","contains","hideResults","handleInputKeyUp","key","preventDefault","updateResults","handleInputKeyDown","removeFocusCell","setTimeout","value","prevActive","getItemAt","activeItem","getRowIndex","selectItem","focusCell","handleGridClick","targetElement","row","closest","querySelector","isElementInView","element","bounding","getBoundingClientRect","top","left","bottom","window","innerHeight","document","documentElement","clientHeight","right","innerWidth","clientWidth","searchString","length","searchDataService","maxItems","resultsToShow","slice","resultRow","createElement","className","toString","split","forEach","atributo","col","resultCell","innerText","trim","appendChild","classList","remove","showMessageRow","rowIndex","colIndex","getElementById","item","event","index","getAttribute","undefined","selectedData","parseInt","handleInput","_a","clearSelection","clearSelected","innerHTML","add","messageRowContainer","el","scrollIntoView","behavior","block","ariaSelected","cell","ensureCellInView","gridContainer","elementTop","offsetTop","scrollTop","normalizeString","str","normalize","replace","toLowerCase","normalizedSearchString","results","normalizedItem","includes","push","message","existingMessageRow","messageRow","getSelected","setSelected","firstKey","displayText","render","listClass","active","h","Host","id","class","shift","flip","strategy","distance","placement","sync","slot","name","Object","assign","ref","placeholder","type","role","onInput","test","onClick"],"sources":["src/components/alc-autocomplete/alc-autocomplete.css?tag=alc-autocomplete","src/components/alc-autocomplete/alc-autocomplete.tsx"],"sourcesContent":["[data-alc-theme=\"light\"] alc-autocomplete {\n  --bg-color: var(--alc-color-surface-primary);\n  --bg-color-footer: var(--alc-color-layer-b);\n  --bg-color-hover: var(--alc-color-layer-b);\n  --border-color: var(--alc-color-neutral-60);\n  --border-color-hover: var(--alc-color-action-60);\n  --border-color-focus : var(--alc-color-action-20);\n  --text-color: var(--alc-color-text-primary);\n}\n\n[data-alc-theme=\"dark\"] alc-autocomplete {\n  --bg-color: var(--alc-color-surface-primary);\n  --bg-color-footer: var(--alc-color-layer-b);\n  --bg-color-hover: var(--alc-color-layer-b);\n  --border-color: var(--alc-color-neutral-60);\n  --border-color-hover: var(--alc-color-action-60);\n  --border-color-focus : var(--alc-color-action-20);\n  --text-color: var(--alc-color-text-primary);\n}\n\nalc-autocomplete {\n  @apply block;\n}\n\n.alc-autocomplete__grid.is-hidden {\n  @apply hidden;\n}\n\n.alc-autocomplete__result-cell{\n  @apply leading-6;\n}\n\n.alc-autocomplete__grid {\n  @apply min-w-64 w-full bg-[--bg-color] border border-solid border-[--border-color] p-0 z-10;\n}\n\n.alc-autocomplete__message-row-container {\n  /* @apply min-w-64 absolute w-full; */\n  @apply w-full;\n}\n\n.alc-autocomplete__result-row {\n  @apply p-2 cursor-default flex;\n}\n\n.alc-autocomplete__result-row:hover {\n  @apply bg-[--bg--color-hover];\n}\n\n.alc-autocomplete__result-row:hover {\n  @apply bg-[--bg-color-hover];\n}\n\n.alc-autocomplete__result-row.is-focused {\n  @apply text-[--text-color] underline border-2 border-solid border-[--border-color-hover] rounded-sm;\n}\n\n/* Rever linha abaixo */\n.alc-autocomplete__result-cell.is-focused {\n  @apply underline;\n}\n\n.alc-autocomplete__result-cell {\n  @apply text-base inline-block cursor-default m-0 px-1;\n}\n\n.alc-autocomplete__result-cell:nth-child(n+2) {\n  @apply text-xs font-normal text-[--text-color] leading-6;\n}\n\n.alc-autocomplete__icon {\n  @apply absolute left-2 top-2 pointer-events-none;\n}\n\n.alc-field__input.alc-autocomplete__input {\n  @apply pl-8;\n}\n\n.alc-autocomplete__clear-button {\n  @apply cursor-pointer absolute right-1;\n}\n\n.alc-autocomplete__message-row {\n  @apply p-2 italic text-[--text-color] bg-[--bg-color-footer] border-x border-b border-solid border-[--border-color];\n}\n\n.alc-autocomplete__field .alc-field__core {\n  @apply relative;\n}\n\n.alc-field__input.alc-autocomplete__input {\n  @apply pl-8 pr-12 text-ellipsis;\n}\n\n.alc-autocomplete__result-row--horizontal {\n  @apply flex-row\n}\n\n.alc-autocomplete__result-row--vertical {\n  @apply flex-col\n}\n\n.alc-autocomplete__grid--vertical {\n  @apply overflow-y-scroll max-h-full;\n}\n\n.alc-autocomplete__list-container {\n  @apply absolute min-w-[250px] mt-11 w-full z-10;\n}\n\n.alc-autocomplete__has-an-error-indicator, .alc-autocomplete__loading-indicator {\n  @apply bg-[--bg-color-footer] font-[#000] border border-solid border-[--border-color] p-2 -mb-1 flex items-center;\n}\n\n.alc-autocomplete__loading-icon {\n  @apply mr-1 animate-spin;\n}\n\n/* Centralizar o icone */\n.alc-autocomplete__loading-icon .icon-inner {\n  @apply block;\n}\n\n/* Centralizar o icone */\n.alc-autocomplete__loading-icon .alc-icon__image {\n  @apply top-0 mt-0 h-auto w-auto;\n}\n\n\n.alc-autocomplete__container-results {\n  @apply h-full max-h-[inherit];\n}\n\n.alc-autocomplete__results {\n  @apply h-full max-h-[inherit] flex flex-col;\n}","import { Component, Element, Host, Listen, Method, Prop, State, h, Watch, Event, EventEmitter } from '@stencil/core';\nimport { getUniqueId } from '../utils/getUniqueId';\nimport test from '../utils/testAttributes';\n\n@Component({\n  tag: 'alc-autocomplete',\n  styleUrl: 'alc-autocomplete.css',\n  shadow: false,\n})\nexport class AlcAutocomplete {\n  @Element() el: HTMLElement;\n\n  /** Itens que serão listado no componente */\n  @Prop({ reflect: true }) items: Array<{ [key: string]: string }> = [];\n\n  /** Indica os atributos dos dados que serão exibidos na lista */\n  @Prop({ reflect: true }) displayKeys: string = '';\n\n  /** Label do input */\n  @Prop({ reflect: true }) label?: string = '';\n\n  /** Mensagem de ajuda */\n  @Prop({ reflect: true }) hint: string = '';\n\n  /** Indica se o input é obrigatório */\n  @Prop({ reflect: true }) required: boolean = false;\n\n  /** Texto dentro do input */\n  @Prop({ reflect: true }) placeholder?: string;\n\n  /** Indica o tipo de visualização da lista */\n  @Prop({ reflect: true }) listDirection: 'horizontal' | 'vertical' = 'vertical';\n\n  /** Desabilita input */\n  @Prop({ reflect: true }) disabled: boolean = false;\n\n  /** Indica se os dados estão sendo carregados */\n  @Prop({ reflect: true }) loading: boolean = false;\n\n  /** Indica se houve um erro ao carregar os dados */\n  @Prop({ reflect: true, mutable: true }) error: boolean = false;\n\n  // Mensagem de erro do input\n  @Prop({ reflect: true}) errorMsg: string = null;\n\n  @State() filteredData: any[] = []; // Armazena os dados filtrados\n  @State() itemSelected: boolean = false; // Indica se um item foi selecionado\n  @State() selectedItemValue: HTMLElement | null = null; // Armazena o valor selecionado\n  @State() emptyResult: boolean = false; // Indica se não foi encontrado nenhum resultado\n\n  input: HTMLInputElement;\n  grid: HTMLElement;\n  activeRowIndex: number = -1;\n  activeColIndex: number = 0;\n  rowsCount: number = 0;\n  colsCount: number = 0;\n  gridFocused: boolean = false;\n  shown: boolean = false;\n  selectionCol: number = 0;\n  inputId: string;\n  gridId: string;\n  labelId: string;\n  messageRowContainerId: string;\n\n  /**\n * Evento emitido sempre que o item selecionado for alterado.\n * O valor emitido será o mesmo que pode ser obtido pelo método `getSelected()`.\n */\n  @Event({\n    eventName: 'alc-change',\n  })\n  alcChange: EventEmitter<any>;\n\n  @Watch('selectedItemValue')\n  selectedItemValueChanged(newValue: any) {\n    // Sempre que o valor selecionado for alterado (via seleção na lista ou via setSelected),\n    // emitimos o evento alc-change com o novo valor.\n    this.alcChange.emit(newValue);\n  }\n\n  @Watch('loading')\n  handleLoadingChange(newVal: boolean, oldVal: boolean) {\n    if (oldVal === true && newVal === false && !this.disabled && this.input) {\n      requestAnimationFrame(() => {\n        this.input.focus();\n      });\n    }\n  }\n\n  componentWillLoad() {\n    this.inputId = getUniqueId();\n    this.gridId = getUniqueId();\n    this.labelId = getUniqueId();\n    this.messageRowContainerId = getUniqueId();\n  }\n\n  componentDidLoad() {\n    /* Não permite remover o atributo disabled pelo modo desenvolvedor no browser */\n    const observer = new MutationObserver(() => {\n      if (!this.input.hasAttribute('disabled')) {\n        if (this.disabled || this.loading) {\n          this.input.setAttribute('disabled', 'true');\n        }\n      }\n    });\n\n    observer.observe(this.input, { attributes: true, attributeFilter: ['disabled'] });\n\n    if (this.disabled || this.loading) {\n      this.input.setAttribute('disabled', 'true');\n    }\n\n    this.input.addEventListener('focus', this.handleFocus.bind(this));\n  }\n\n  @Listen('click', { target: 'body' })\n  handleBodyClick(evt: MouseEvent) {\n    const target = evt.target;\n\n    if (target === this.input || (target instanceof Node && this.grid.contains(target))) {\n      return;\n    }\n    this.hideResults();\n  }\n\n  @Listen('keyup')\n  handleInputKeyUp(evt: KeyboardEvent) {\n    const target = evt.target;\n    if (!(target instanceof Node) || !this.input.contains(target)) {\n      return;\n    }\n\n    const key = evt.key;\n\n    switch (key) {\n      case 'ArrowUp':\n      case 'ArrowDown':\n      case 'Escape':\n      case 'Enter':\n        evt.preventDefault();\n        return;\n      case 'ArrowLeft':\n      case 'ArrowRight':\n        if (this.gridFocused) {\n          evt.preventDefault();\n          return;\n        }\n        break;\n      default:\n        this.updateResults(); // Atualiza os resultados de busca\n    }\n  }\n\n  @Listen('keydown')\n  handleInputKeyDown(evt: KeyboardEvent) {\n    const key = evt.key; // Recomenda-se usar evt.key ao invés de keyCode\n    let activeRowIndex = this.activeRowIndex;\n    let activeColIndex = this.activeColIndex;\n\n    const target = evt.target;\n\n    // Verifique se evt.target é um Node\n    if (!(target instanceof Node) || !this.input.contains(target)) {\n      return;\n    }\n\n    if (key === 'Escape') { // ESC\n      evt.preventDefault();\n      if (this.gridFocused) {\n        this.gridFocused = false;\n        this.removeFocusCell(this.activeRowIndex, this.activeColIndex);\n        this.activeRowIndex = -1;\n        this.activeColIndex = 0;\n        this.input.setAttribute('aria-activedescendant', '');\n      } else {\n        if (!this.shown) {\n          setTimeout(() => {\n            this.input.value = '';\n          }, 1);\n        }\n      }\n      if (this.shown) {\n        this.hideResults();\n      }\n      // Remover botão de fechar quando clicar na tecla Esc\n      this.itemSelected = false;\n      this.emptyResult = false;\n      this.error = false;\n      return;\n    }\n\n    if (this.rowsCount < 1) {\n      return;\n    }\n\n    const prevActive = this.getItemAt(activeRowIndex, this.selectionCol);\n    let activeItem: HTMLElement | null;\n\n    switch (key) {\n      case 'ArrowUp':\n        this.gridFocused = true;\n        activeRowIndex = this.getRowIndex('ArrowUp');\n        evt.preventDefault();\n        break;\n      case 'ArrowDown':\n        this.gridFocused = true;\n        activeRowIndex = this.getRowIndex('ArrowDown');\n        evt.preventDefault();\n        break;\n      case 'ArrowLeft':\n        if (activeColIndex <= 0) {\n          activeColIndex = this.colsCount - 1;\n          activeRowIndex = this.getRowIndex('ArrowLeft');\n        } else {\n          activeColIndex--;\n        }\n        if (this.gridFocused) {\n          evt.preventDefault();\n        }\n        break;\n      case 'ArrowRight':\n        if (activeColIndex === -1 || activeColIndex >= this.colsCount - 1) {\n          activeColIndex = 0;\n          activeRowIndex = this.getRowIndex('ArrowRight');\n        } else {\n          activeColIndex++;\n        }\n        if (this.gridFocused) {\n          evt.preventDefault();\n        }\n        break;\n      case 'Enter': // ENTER\n        evt.preventDefault(); // Prevenir submissão do formulário\n        if (this.gridFocused) {\n          activeItem = this.getItemAt(activeRowIndex, this.selectionCol);\n          this.selectItem(activeItem, evt);\n          this.gridFocused = false;\n        } else {\n          // Opcional: ações adicionais quando Enter é pressionado fora da lista\n          this.hideResults();\n        }\n        return;\n      case 'Tab': // TAB\n        this.hideResults();\n        return;\n      default:\n        return;\n    }\n\n    if (prevActive) {\n      this.removeFocusCell(this.activeRowIndex, this.activeColIndex);\n    }\n\n    activeItem = this.getItemAt(activeRowIndex, activeColIndex);\n    this.activeRowIndex = activeRowIndex;\n    this.activeColIndex = activeColIndex;\n\n    if (activeItem) {\n      this.input.setAttribute(\n        'aria-activedescendant',\n        'result-item-' + activeRowIndex + 'x' + activeColIndex\n      );\n      this.focusCell(activeRowIndex, activeColIndex);\n    } else {\n      this.input.setAttribute('aria-activedescendant', '');\n    }\n  }\n\n  @Listen('click')\n  handleGridClick(evt: MouseEvent) {\n    const targetElement = evt.target as HTMLElement;\n\n    if (!targetElement || !this.grid.contains(targetElement)) {\n      return;\n    }\n\n    let row: HTMLElement | null = targetElement.closest('li');\n\n    if (!row) {\n      return;\n    }\n\n    const selectItem = row.querySelector('.alc-autocomplete__result-cell') as HTMLElement;\n    this.selectItem(selectItem, evt);\n  }\n\n  isElementInView(element: HTMLElement): boolean {\n    const bounding = element.getBoundingClientRect();\n\n    return (\n      bounding.top >= 0 &&\n      bounding.left >= 0 &&\n      bounding.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n      bounding.right <= (window.innerWidth || document.documentElement.clientWidth)\n    );\n  }\n\n  updateResults() {\n    const searchString = this.input.value;\n    this.emptyResult = false;\n\n    // Verifique se a string de pesquisa tem pelo menos 2 caracteres\n    if (searchString.length < 2) {\n      this.hideResults();\n      this.emptyResult = false;\n      return;\n    }\n\n    this.filteredData = this.searchDataService(searchString);\n\n    this.hideResults();\n\n    if (this.filteredData.length > 0) {\n      const maxItems = 10;\n      const resultsToShow = this.filteredData.slice(0, maxItems);\n\n      if (resultsToShow.length) {\n        for (let row = 0; row < resultsToShow.length; row++) {\n          const resultRow = document.createElement('li');\n          resultRow.className = `alc-autocomplete__result-row alc-autocomplete__result-row--${this.listDirection}`;\n          resultRow.setAttribute('role', 'option');\n          resultRow.setAttribute('id', 'result-row-' + row);\n          resultRow.setAttribute('data-index', row.toString());\n\n          this.displayKeys.split(',').forEach((atributo, col) => {\n            const resultCell = document.createElement('span');\n            resultCell.className = 'alc-autocomplete__result-cell';\n            resultCell.setAttribute('role', 'presentation');\n            resultCell.setAttribute('id', 'result-item-' + row + 'x' + col);\n            resultCell.innerText = resultsToShow[row][atributo.trim()];\n            resultRow.appendChild(resultCell);\n          });\n\n          this.grid.appendChild(resultRow);\n        }\n        this.grid.classList.remove('is-hidden');\n        this.input.setAttribute('aria-expanded', 'true');\n        this.rowsCount = resultsToShow.length;\n        this.colsCount = this.displayKeys.split(',').length;\n        this.shown = true;\n      }\n\n      if (this.filteredData.length > maxItems) {\n        this.showMessageRow(\"Mais de 10 itens encontrados. Refine seus critérios de pesquisa.\");\n      }\n    } else {\n      this.emptyResult = true;\n    }\n  }\n\n  getRowIndex(key: string): number {\n    let activeRowIndex = this.activeRowIndex;\n\n    switch (key) {\n      case 'ArrowUp':\n      case 'ArrowLeft':\n        if (activeRowIndex <= 0) {\n          activeRowIndex = this.rowsCount - 1;\n        } else {\n          activeRowIndex--;\n        }\n        break;\n      case 'ArrowDown':\n      case 'ArrowRight':\n        if (activeRowIndex === -1 || activeRowIndex >= this.rowsCount - 1) {\n          activeRowIndex = 0;\n        } else {\n          activeRowIndex++;\n        }\n    }\n\n    return activeRowIndex;\n  }\n\n  getItemAt(rowIndex: number, colIndex: number): HTMLElement | null {\n    return document.getElementById('result-item-' + rowIndex + 'x' + colIndex) as HTMLElement | null;\n  }\n\n  selectItem(item: HTMLElement | null, event?: Event) {\n    if (event) event.preventDefault();\n    if (item) {\n      const row = item.closest('li');\n      const index = row?.getAttribute('data-index');\n      if (index !== null && index !== undefined) {\n        const selectedData = this.filteredData[parseInt(index, 10)];\n        this.input.value = item.innerText;\n        this.selectedItemValue = selectedData;\n        this.hideResults();\n        this.input.setAttribute('aria-expanded', 'false');\n        this.itemSelected = true;\n\n        this.emptyResult = false;\n        this.input.focus();\n      }\n    }\n  }\n\n  handleInput() {\n    this.itemSelected = this.input?.value.length > 0;\n  }\n\n  handleFocus() {\n    // Quando o input ganhar foco novamente, se já existir algum valor digitado,\n    // e o valor for maior ou igual a 2 caracteres, tentar exibir novamente os resultados.\n    const searchString = this.input.value || '';\n    if (searchString.length >= 2) {\n      this.updateResults();\n    }\n  }\n\n  clearSelection(event: Event) {\n    event.preventDefault(); // Prevenir comportamento padrão de submit\n    this.clearSelected();\n    this.input.focus();\n  }\n\n  hideResults() {\n    if (!this.shown) {\n      return;\n    }\n  \n    this.gridFocused = false;\n    this.shown = false;\n    this.activeRowIndex = -1;\n    this.activeColIndex = 0;\n    this.grid.innerHTML = '';\n    this.grid.classList.add('is-hidden');\n    this.input.setAttribute('aria-expanded', 'false');\n    this.rowsCount = 0;\n    this.colsCount = 0;\n    this.input.setAttribute('aria-activedescendant', '');\n  \n    const messageRowContainer = this.el.querySelector(`#${this.messageRowContainerId}`);\n    if (messageRowContainer) {\n      messageRowContainer.innerHTML = '';\n    }\n  \n    if (!this.isElementInView(this.input)) {\n      this.input.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n    }\n  }\n\n  removeFocusCell(rowIndex: number, colIndex: number) {\n    const row = document.getElementById('result-row-' + rowIndex);\n    if(row) {\n      row.classList.remove('is-focused');\n      row.ariaSelected = \"false\";\n    }\n    const cell = this.getItemAt(rowIndex, colIndex);\n    if (cell) cell.classList.remove('is-focused');\n  }\n\n  focusCell(rowIndex: number, colIndex: number) {\n    const row = document.getElementById('result-row-' + rowIndex);\n\n    if (row) {\n      row.classList.add('is-focused');\n      row.ariaSelected = \"true\";\n    }\n\n    const cell = this.getItemAt(rowIndex, colIndex);\n    if (cell) {\n      cell.classList.add('is-focused');\n\n      if (this.listDirection === 'vertical') {\n        this.ensureCellInView(cell);\n      } else {\n        if (!this.isElementInView(cell)) {\n          cell.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\n        }\n      }\n    }\n  }\n\n  /* Mantém o elemento focável dentro do scroll */\n  ensureCellInView(element: HTMLElement) {\n    const gridContainer = this.grid;\n    const elementTop = element.offsetTop;\n\n    gridContainer.scrollTop = elementTop;\n  }\n\n  /* Mostra pesquisa com e sem acentos */\n  searchDataService(searchString: string): any[] {\n    const normalizeString = (str: string) =>\n      str.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase();\n\n    const normalizedSearchString = normalizeString(searchString);\n\n    const results = [];\n\n    for (const item of this.items) {\n      for (const atributo of this.displayKeys.split(',')) {\n        const normalizedItem = normalizeString(item[atributo.trim()] || '');\n        if (normalizedItem.includes(normalizedSearchString)) {\n          results.push(item);\n          break;\n        }\n      }\n    }\n\n    return results;\n  }\n\n  showMessageRow(message: string) {\n    const messageRowContainer = this.el.querySelector(`#${this.messageRowContainerId} `) as HTMLElement;\n    const existingMessageRow = messageRowContainer.querySelector('.alc-autocomplete__message-row');\n\n    if (!existingMessageRow) {\n      const messageRow = document.createElement('div');\n      messageRow.className = `alc-autocomplete__message-row`;\n      messageRow.innerText = message;\n      if (messageRowContainer) {\n        messageRowContainer.appendChild(messageRow);\n      }\n    }\n  }\n\n  /** Retorna o valor selecionado */\n  @Method()\n  async getSelected(): Promise<any> {\n    return this.selectedItemValue || null;\n  }\n\n  /** Define o valor selecionado */\n  @Method()\n  async setSelected(item: any): Promise<void> {\n    if (item) {\n      this.selectedItemValue = item;\n      const firstKey = this.displayKeys.split(',')[0].trim();\n      const displayText = item[firstKey];\n\n      this.input.value = displayText;\n      this.itemSelected = true;\n      this.emptyResult = false;\n    }\n  }\n\n  /** Limpa o valor selecionado */\n  @Method()\n  async clearSelected(): Promise<void> {\n    this.input.value = '';\n    this.selectedItemValue = null;\n    this.itemSelected = false;\n    this.hideResults();\n    this.emptyResult = false;\n    this.error = false;\n  }\n\n  render() {\n    const listClass = this.listDirection === 'vertical'\n      ? 'alc-autocomplete__grid alc-autocomplete__grid--vertical is-hidden alc-field__text'\n      : 'alc-autocomplete__grid is-hidden alc-field__text';\n\n    const active = this.shown || this.loading || this.error || (!this.error && this.emptyResult)\n\n    return (\n      <Host>\n        <alc-field\n          id={this.labelId}\n          label={this.label}\n          hint={this.hint}\n          required={this.required}\n          class=\"alc-autocomplete__field\"\n        >\n\n          <alc-popup shift flip strategy=\"fixed\" active={active} distance={2} placement=\"bottom-start\" sync='width'>\n            <div slot=\"anchor\">\n              <alc-icon name=\"search\" label=\"Pesquisar\" class=\"alc-autocomplete__icon\"></alc-icon>\n              <input\n                ref={el => this.input = el}\n                placeholder={this.placeholder}\n                class=\"alc-autocomplete__input\"\n                type=\"text\"\n                role=\"combobox\"\n                aria-haspopup=\"grid\"\n                aria-expanded=\"false\"\n                aria-autocomplete=\"list\"\n                aria-controls={this.gridId}\n                id={this.inputId}\n                disabled={this.disabled || this.loading}\n                onInput={() => this.handleInput()}\n                {...test('data-test-autocomplete-input')}\n              />\n\n              {this.itemSelected && this.input?.value && (\n                <button\n                  type=\"button\" // Adicionado para evitar submissão do formulário\n                  class=\"alc-button alc-button-rounded alc-autocomplete__clear-button\"\n                  onClick={(event) => this.clearSelection(event)}\n                  {...test('data-test-autocomplete-clear-button')}\n                  >\n                  <alc-icon name=\"x-lg\" label=\"Limpar\"></alc-icon>\n                </button>\n              )}\n            </div>\n\n            <div class=\"alc-autocomplete__container-results\">\n              {this.loading ? (\n                <div class=\"alc-autocomplete__loading-indicator\">\n                  <alc-icon name=\"arrow-clockwise\" label=\"Carregando\" class=\"alc-autocomplete__loading-icon\"></alc-icon> Carregando...\n                </div>\n              ) : null\n              }\n              {this.error ? (\n                <div class=\"alc-autocomplete__has-an-error-indicator\">\n                  <alc-icon name=\"exclamation-triangle\" label=\"Erro\" class=\"mr-1\"></alc-icon> Serviço indisponível. Volte mais tarde!\n                </div>\n              ) : null\n              }\n              {!this.error && this.emptyResult ? (\n                <div class=\"alc-autocomplete__has-an-error-indicator\">\n                  <alc-icon name=\"exclamation-triangle\" label=\"Erro\" class=\"mr-1\"></alc-icon> Nenhum resultado encontrado. Refine seus critérios de pesquisa.\n                </div>\n              ) : null\n              }\n\n              <div class=\"alc-autocomplete__results\" {...test('data-test-autocomplete-results')}>\n                <ul\n                  aria-labelledby={this.labelId}\n                  role=\"listbox\"\n                  id={this.gridId}\n                  class={listClass}\n                  ref={el => this.grid = el}\n                ></ul>\n                <div id={this.messageRowContainerId} class=\"alc-autocomplete__message-row-container\"></div>\n              </div>\n            </div>\n\n          </alc-popup>\n\n        </alc-field>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}