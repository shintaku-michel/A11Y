{"version":3,"file":"alc-tooltip.entry.esm.js","sources":["src/components/alc-tooltip/alc-tooltip.css?tag=alc-tooltip","src/components/alc-tooltip/alc-tooltip.tsx"],"sourcesContent":["[data-alc-theme=\"dark\"] alc-tooltip {\n  --bg-color: var(--alc-color-neutral-90);\n}\n\n[data-alc-theme=\"light\"] alc-tooltip {\n  --bg-color: var(--alc-color-neutral-5);\n}\n\n.alc-tooltip__content {\n  @apply px-2 py-1 rounded-sm bg-[--bg-color] text-[--alc-color-text-secondary] border border-[--alc-color-border] text-sm;\n  width: fit-content;\n}\n\n/* Estilização para arrow */\nalc-tooltip .alc-popup__arrow {\n  /* width e height devem ser iguais */\n  --arrow-size: var(--alc-spacing-03);\n\n  @apply bg-[--bg-color] w-[--arrow-size] h-[--arrow-size] border-[--alc-color-border];\n  border-bottom-width: var(--alc-border-width);\n  border-right-width: var(--alc-border-width);\n}","import { Component, Host, Prop, h, Method, Event, EventEmitter, Watch, Listen } from '@stencil/core';\nimport { PopupPlacement } from '../alc-popup/alc-popup';\nimport { getUniqueId } from '../utils/getUniqueId';\nimport test from '../utils/testAttributes';\n\n@Component({\n  tag: 'alc-tooltip',\n  styleUrl: 'alc-tooltip.css',\n  shadow: false\n})\nexport class AlcTooltip {\n  contentId: string = null;\n  anchorSlot: HTMLSlotElement;\n  anchorEl: HTMLElement;\n  hasClickedOrFocused: boolean = false;\n\n  /**\n  * Indica se o tooltip esta ativo ou não. Pode-se usar essa propriedade em vez dos métodos show/hide.\n  */\n  @Prop({ reflect: true, mutable: true }) active: boolean = false;\n\n  /**\n  * Indica o conteudo textual do tooltip. Pode-se usar o slot em vez dessa propriedade.\n  */\n  @Prop({ reflect: true }) content: string = null;\n\n  /**\n  * Define o posicionamento do tooltip.\n  */\n  @Prop({ reflect: true }) placement: PopupPlacement = 'top';\n\n  /**\n  * Define como o tooltip vai ser ativado. Pode ser: `click` , `hover` , `focus` e/ou `manual`. Pode adicionar mais de um, separando por espaço. Ex.: 'hover focus'.\n  */\n  @Prop({ reflect: true }) trigger: string = 'hover focus';\n\n  /**\n  * Define o posicionamento do tooltip.\n  */\n  @Prop({ reflect: true }) strategy: 'absolute' | 'fixed' = 'absolute';\n\n  /**\n   * Exibe o tooltip.\n   * @returns O valor retornado é `true` se o tooltip foi realmente exibido com essa chamada ao método.\n   */\n  @Method()\n  async show(): Promise<boolean> {\n    if (this.active) return false;\n\n    const { defaultPrevented } = this.alcShow.emit({from: 'method'});\n    if (defaultPrevented) {\n      return false;\n    }\n\n    this.active = true;\n    return true;\n  }\n\n  /**\n  * Fecha o tooltip.\n  * @returns O valor retornado é `true` se o tooltip foi realmente dispensado com essa chamada ao método.\n  */\n  @Method()\n  async hide(): Promise<boolean> {\n    if (!this.active) return false;\n\n    const { defaultPrevented } = this.alcHide.emit({from: 'method'});\n    if (defaultPrevented) {\n      return false;\n    }\n\n    this.active = false;\n    return true;\n  }\n\n  /**\n  * Evento disparado quando o tooltip vai abrir\n  */\n  @Event({\n    eventName: 'alc-show',\n    cancelable: true,\n    bubbles: true,\n  })\n  alcShow: EventEmitter<{\n    from: 'click' | 'hover' | 'focus' | 'method';\n  }>;;\n\n  /**\n  * Evento disparado quando o tooltip abriu\n  */\n  @Event({\n    eventName: 'alc-after-show',\n    cancelable: false,\n    bubbles: true,\n  })\n  alcAfterShow: EventEmitter<null>;\n\n  /**\n  * Evento disparado quando o tooltip vai fechar.\n  */\n  @Event({\n    eventName: 'alc-hide',\n    cancelable: true,\n    bubbles: true,\n  })\n  alcHide: EventEmitter<{\n    from: 'click' | 'hover' | 'focus' | 'keyboard' | 'method';\n  }>;\n\n  /**\n  * Evento disparado quando o tooltip fechou.\n  */\n  @Event({\n    eventName: 'alc-after-hide',\n    cancelable: true,\n    bubbles: true,\n  })\n  alcAfterHide: EventEmitter<null>;\n\n  @Watch('active')\n  watchActive(active: boolean) {\n    if (active) {\n      // Show\n      this.alcAfterShow.emit();\n    } else {\n      // Hide\n      this.alcAfterHide.emit();\n    }\n  }\n\n  @Listen('keydown')\n  handleKeyDown(event: KeyboardEvent) {\n    if(event.key === 'Escape') {\n      event.preventDefault();\n      this.anchorEl?.focus();\n      this.handleHide('keyboard');\n    }\n  }\n\n  @Listen('focus', { capture: true })\n  handleFocus() {\n    if (!this.hasTrigger('focus')) return;\n\n    const opened = this.handleShow('focus');\n    if (opened) this.hasClickedOrFocused = true;\n  }\n\n  @Listen('blur', { capture: true })\n  handleBlur() {\n    if (!this.hasTrigger('focus')) return;\n\n    const closed = this.handleHide('focus');\n    if (closed) this.hasClickedOrFocused = false;\n  }\n\n  @Listen('mouseover')\n  handleMouseOver() {\n    if(!this.hasTrigger('hover')) return;\n    this.handleShow('hover');\n  }\n\n  @Listen('mouseout')\n  handleMouseOut() {\n    if(!this.hasTrigger('hover')) return;\n\n    // Verifica se ja foi aberto por click ou foco para não fechar com hover\n    if (this.hasClickedOrFocused) return;\n    \n    this.handleHide('hover');\n  }\n\n  @Listen('click')\n  handleClick() {\n    if(!this.hasTrigger('click')) return;\n\n    if(this.active) {\n      // Hide\n      const closed = this.handleHide('click');\n      if (closed) this.hasClickedOrFocused = false;\n    } else {\n      // Show\n      const opened = this.handleShow('click');\n      if (opened) this.hasClickedOrFocused = true;\n    }\n  }\n\n  componentWillLoad() {\n    this.contentId = getUniqueId();\n  }\n\n  componentDidLoad() {\n    if(this.anchorSlot) {\n      const el = this.anchorSlot.assignedElements()[0];\n      if (el instanceof HTMLElement) {\n        this.anchorEl = el;\n        this.anchorEl.setAttribute('aria-describedby', this.contentId);\n        this.anchorEl.setAttribute('tabindex', '0');\n      }\n    }\n  }\n\n  async handleHide(type: 'click' | 'hover' | 'focus' | 'keyboard') {\n    const { defaultPrevented } = this.alcHide.emit({from: type});\n    let closed = false;\n\n    if(!defaultPrevented) {\n      closed = await this.hide();\n    }\n\n    return closed;\n  }\n\n  async handleShow(type: 'click' | 'hover' | 'focus' ) {\n    const { defaultPrevented } = this.alcShow.emit({from: type});\n    let opened = false;\n\n    if(!defaultPrevented) {\n      opened = await this.show();\n    }\n    \n    return opened;\n  }\n\n  hasTrigger(triggerType: string) {\n    const triggers = this.trigger.split(' ');\n    return triggers.includes(triggerType);\n  }\n\n  render() {\n    return (\n      <Host>\n        <alc-popup\n          active={this.active}\n          placement={this.placement}\n          shift\n          flip\n          distance={8}\n          arrow\n          role=\"tooltip\"\n          strategy={this.strategy}\n        >\n          <div slot=\"anchor\" {...test('data-test-trigger')}>\n            <slot name=\"trigger\" ref={(el: HTMLSlotElement) => this.anchorSlot = el}/>\n          </div>\n\n          <div class=\"alc-tooltip__content\" id={this.contentId} {...test('data-test-content')}>\n            <slot>{this.content}</slot>\n          </div>\n        </alc-popup>\n      </Host>\n    );\n  }\n}\n"],"names":["test"],"mappings":"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"}