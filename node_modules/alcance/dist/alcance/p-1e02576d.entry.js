import{r as t,c as e,h as o,H as r,g as i}from"./p-BuFKlV49.js";import{l as a}from"./p-aC3bzUnr.js";import{g as l}from"./p-BY09qPiz.js";import{t as s}from"./p-oYUCam0b.js";const n='[data-alc-theme="light"] alc-input-file{--text-color-label:var(--alc-color-text-0);--text-color:var(--alc-color-text-1);--shadow-color:var(--alc-color-neutral-5);--outline-color:var(--alc-color-action-60);--border-color:var(--alc-color-neutral-60);--border-color-hover:var(--alc-color-action-60);--border-color-focus:var(--alc-color-action-20);--bg-color-disabled:var(--alc-color-neutral-10);--border-color-disabled:var(--alc-color-neutral-40);--text-color-disabled:var(--alc-color-text-4)}[data-alc-theme="dark"] alc-input-file{--text-color-label:var(--alc-color-text-0);--text-color:var(--alc-color-text-1);--shadow-color:var(--alc-color-neutral-80);--outline-color:var(--alc-color-action-30);--border-color:var(--alc-color-neutral-30);--border-color-hover:var(--alc-color-action-40);--border-color-focus:var(--alc-color-action-70);--bg-color-disabled:var(--alc-color-neutral-80);--border-color-disabled:var(--alc-color-neutral-50);--text-color-disabled:var(--alc-color-text-4)}.alc-input-file__field{display:-ms-flexbox;display:flex;width:100%;-ms-flex-direction:column;flex-direction:column}.alc-input-file__text-button{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;gap:0.5rem;font-size:1rem;line-height:1.5rem}.alc-input-file__content{margin-top:0.5rem;display:-ms-flexbox;display:flex;width:100%;-ms-flex-direction:column;flex-direction:column;gap:0.5rem}.alc-input-file__file{display:-ms-flexbox;display:flex;width:100%;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;border-radius:0.25rem;background-color:var(--alc-color-layer-b);padding-top:0.5rem;padding-bottom:0.5rem;padding-left:1rem;padding-right:1rem;color:var(--text-color)}.alc-input-file__file span{overflow-wrap:break-word}.alc-input-file__text{font-size:0.875rem;color:var(--alc-color-text-4)}.alc-input-file__label{color:var(--text-color-label)}.alc-input-file__input{display:none}.alc-input-file__input-container{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.alc-input-file__input-wrapper{position:relative;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.alc-input-file__icon{pointer-events:none;position:absolute;left:0.75rem;top:50%;--tw-translate-y:-50%;-webkit-transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}input[type=text].alc-input-file__text-input{-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding-top:0.5rem;padding-bottom:0.5rem;padding-left:0.75rem;padding-right:4rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-height:2.5rem;--tw-shadow:inset 0 2px 4px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:inset 0 2px 4px 0 var(--tw-shadow-color);-webkit-box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);--tw-shadow-color:var(--shadow-color);--tw-shadow:var(--tw-shadow-colored);transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;-webkit-transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transition-duration:150ms;transition-duration:150ms}input[type=text].alc-input-file__text-input::-moz-placeholder{color:var(--text-color-placeholder)}input[type=text].alc-input-file__text-input::-webkit-input-placeholder{color:var(--text-color-placeholder)}input[type=text].alc-input-file__text-input:-ms-input-placeholder{color:var(--text-color-placeholder)}input[type=text].alc-input-file__text-input::-ms-input-placeholder{color:var(--text-color-placeholder)}input[type=text].alc-input-file__text-input::placeholder{color:var(--text-color-placeholder)}.alc-input-file__input-wrapper--with-icon input[type=text].alc-input-file__text-input{padding-left:2.5rem;}input[type=text].alc-input-file__text-input:focus{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline-style:solid;outline-width:2px;outline-offset:2px;outline-color:var(--outline-color);--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);-webkit-box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.alc-input-file__text-input:disabled{border-color:var(--border-color-disabled);background-color:var(--bg-color-disabled);--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;-webkit-box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);cursor:not-allowed;color:var(--text-color-disabled)}.alc-input-file__text-input:disabled:hover{border-color:var(--border-color-disabled)}.alc-input-file__remove-button{position:absolute;top:50%;right:0.5rem;height:2rem;width:2rem;--tw-translate-y:-50%;-webkit-transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));cursor:pointer;border-radius:9999px;border-width:0px;background-color:transparent;padding:0px;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;-webkit-box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.alc-input-file__remove-button:hover,.alc-input-file__remove-button:focus{background-color:var(--alc-color-layer-b);outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);-webkit-box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);--tw-ring-color:var(--alc-color-primary)}.alc-input-file__remove-button alc-icon{pointer-events:none}.alc-input-file__info{margin-top:0.25rem;text-align:right;font-size:0.875rem;line-height:1rem;color:var(--alc-color-text-4)}.alc-input-file__dropzone{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;gap:0.5rem;background-color:var(--alc-color-layer-b);padding:1rem;color:var(--text-color);cursor:pointer;border-radius:0.25rem;border-width:2px;border-style:dashed;border-color:var(--alc-color-neutral-40);transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;-webkit-transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transition-duration:200ms;transition-duration:200ms}.alc-input-file__dropzone:focus{outline-style:solid;outline-width:2px;outline-offset:2px;outline-color:var(--outline-color);--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);-webkit-box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);border-color:var(--border-color-hover)}.alc-input-file__dropzone:hover{border-color:var(--border-color-hover)}.alc-input-file__dropzone--dragover{border-color:var(--alc-color-primary);background-color:var(--alc-color-neutral-20)}.alc-input-file__dropzone--disabled{cursor:not-allowed;opacity:0.6}.alc-input-file__dropzone-text{text-align:center;font-size:1rem;line-height:1.5rem}.alc-input-file__dropzone.alc-field__input--error{border-color:var(--border-color-error)}.alc-button.alc-field__input--error{border-width:1px;border-color:var(--border-color-error)}@media (max-width: 600px){.alc-input-file__file{-ms-flex-align:start;align-items:flex-start}.alc-input-file__info{text-align:left}}';const c=class{constructor(r){t(this,r);this.alcFileSelected=e(this,"alc-file-selected",7);this.idInputFilePolite=null;this.idLabel=null;this.idDropzoneText=null;this.multiple=false;this.accept="*/*";this.disabled=false;this.required=false;this.buttonType=undefined;this.mode="button";this.files=[];this.maxInputTextLength=50;this.renderFiles=()=>this.files.map((t=>o("div",Object.assign({class:"alc-input-file__file"},s()),o("span",null,t.name," (",this.formatFileSize(t.size),")"),o("button",Object.assign({class:"alc-button alc-button-rounded",onClick:()=>this.handleRemove(t),"aria-label":`Remover arquivo ${t.name}`},s()),o("alc-icon",{name:"x",label:"Apagar"})))));this.renderFileInfo=()=>{const t=this.files.reduce(((t,e)=>t+e.size),0);const e=this.formatFileSize(t);const r=this.files.length;const i=r===1?"arquivo":"arquivos";return o("span",Object.assign({},s()),`${r} ${i} (${e} no total)`)};this.renderPolite=()=>{let t="Nenhum arquivo selecionado.";if(this.files.length===1){t="Arquivo selecionado: "+this.files[0].name}if(this.files.length>1){const e=this.files.map((t=>t.name)).join("; ");t=this.files.length+" arquivos selecionados: "+e}return o("span",{"aria-live":"polite",class:"sr-only",id:this.idInputFilePolite,role:"status"},t)};this.invokeFileInput=()=>{const t=this.el.querySelector("#"+this.idInput);t.click()};this.handleRemove=t=>{this.files=this.files.filter((e=>e!==t));const e=new DataTransfer;this.files.forEach((t=>e.items.add(t)));const o=this.el.querySelector("#"+this.idInput);o.files=e.files;this.readFilesAndEmitEvent(this.files)};this.handleRemoveAll=()=>{this.files=[];const t=this.el.querySelector("#"+this.idInput);t.value="";this.alcFileSelected.emit({files:[]})};this.handleDrop=t=>{var e;t.preventDefault();t.stopPropagation();if(this.disabled)return;const o=(e=t.dataTransfer)===null||e===void 0?void 0:e.files;if(o&&o.length>0){const t=Array.from(o);if(this.multiple){this.files=[...this.files,...t]}else{this.files=[t[0]]}const e=new DataTransfer;this.files.forEach((t=>e.items.add(t)));const r=this.el.querySelector("#"+this.idInput);r.files=e.files;this.readFilesAndEmitEvent(this.files)}};this.handleDragOver=t=>{t.preventDefault();t.stopPropagation()};this.handleDragEnter=t=>{t.preventDefault();t.stopPropagation();if(this.disabled)return;const e=t.currentTarget;e.classList.add("alc-input-file__dropzone--dragover")};this.handleDragLeave=t=>{t.preventDefault();t.stopPropagation();if(this.disabled)return;const e=t.currentTarget;e.classList.remove("alc-input-file__dropzone--dragover")}}async getFiles(){const t=this.el.querySelector("#"+this.idInput);const e=Array.from(t.files||[]);const o=await Promise.all(e.map((async t=>{const e=await t.arrayBuffer();return{file:t,content:e}})));return o}async clear(){this.files=[];const t=this.el.querySelector("#"+this.idInput);t.value=""}handleFileChange(t){const e=t.target;const o=Array.from(e.files||[]);this.files=o;this.readFilesAndEmitEvent(o)}async readFilesAndEmitEvent(t){const e=await Promise.all(t.map((async t=>{const e=await t.arrayBuffer();return{file:t,content:e}})));this.alcFileSelected.emit({files:e})}formatFileSize(t){const e=["B","KB","MB","GB","TB"];let o=t;let r=0;while(o>=1024&&r<e.length-1){o=o/1024;r++}return`${o.toFixed(2)} ${e[r]}`}componentWillLoad(){this.idInputFilePolite=l();this.idLabel=l();this.idDropzoneText=l()}componentDidLoad(){if(this.mode==="input"){this.textInputElement=this.el.querySelector(".alc-input-file__text-input");this.updateMaxInputTextLength();this.initializeResizeObserver();new MutationObserver((()=>{this.updateMaxInputTextLength()})).observe(this.el,{childList:true,subtree:true})}}disconnectedCallback(){if(this.resizeObserver){this.resizeObserver.disconnect()}}initializeResizeObserver(){this.resizeObserver=new ResizeObserver((()=>{this.updateMaxInputTextLength()}));this.resizeObserver.observe(this.textInputElement)}updateMaxInputTextLength(){if(!this.textInputElement)return;const t=this.textInputElement.offsetWidth;const e=this.files.length>0?28:0;let o=12;if(this.iconName){o=40}const r=e>0?40:12;const i=o+r;const a=t-i;const l=7.8;const s=Math.floor(a/l);this.maxInputTextLength=s>0?s:10}truncateText(t,e){if(t.length<=e){return t}return t.substring(0,e-3)+"..."}render(){var t;(t=this.idInput)!==null&&t!==void 0?t:a.report("id-input",this.el.tagName.toLowerCase(),this.el);const e={type:"file",id:this.idInput,class:"alc-input-file__input",multiple:this.multiple,accept:this.accept,disabled:this.disabled,onChange:t=>this.handleFileChange(t),required:this.required};const i=o("input",Object.assign({key:"2035a612a2a06be66cadc9bb9abdbe14b4d3fea9"},e,s()));const l=this.files.map((t=>t.name));const n=this.truncateText(l.join(", "),this.maxInputTextLength);const c=l.join(", ");return o(r,{key:"4014a1d76f8469fff2c900d42e18c3a20d65dc41"},o("slot",{key:"6fd005ff39bc1c29f968851f1bf9ed18996c0fbe"}),this.renderPolite(),this.mode==="button"&&o("div",{key:"c52a0c22d813fa13ead54e4f68f3e0380d5e828d",class:"alc-input-file__field"},o("button",Object.assign({key:"b865bc268007d20fd5c314f8f4a205896085f0f1",class:`alc-button ${this.buttonType==="secondary"?"alc-button--secondary":""}`,onClick:this.invokeFileInput,disabled:this.disabled},s()),o("span",{key:"2a9642c7d0a89f3aee66877527f75216d6110c7b",class:"alc-input-file__text-button"},this.iconName&&o("alc-icon",{key:"19fa2cb81759e3a26d5ef8d9908808d6346ab90f",name:this.iconName,label:""}),this.multiple?"Escolher arquivos":"Escolher arquivo")),o("div",Object.assign({key:"1c8a116685150a992bc2ef5dcb709bfea93f8a9c",class:"alc-input-file__content","aria-controls":this.idInputFilePolite},s()),this.files.length>0?this.renderFiles():o("small",{class:"alc-input-file__text"},"Nenhum arquivo selecionado"))),this.mode==="input"&&o("div",{key:"75a462b4ed59c6672ffd6b12352963449425bc93",class:"alc-input-file__field"},o("div",{key:"5e9ede15d24855a494e4867936b8f352daa009e9",class:"alc-input-file__input-container"},o("div",{key:"0f60d4544e6c10efa31b810e7c4b4054a8eaec3d",class:`alc-input-file__input-wrapper ${this.iconName?"alc-input-file__input-wrapper--with-icon":""}`},this.iconName&&o("alc-icon",{key:"5ac6e47aa8084c06754606436a125e687c803251",class:"alc-input-file__icon",name:this.iconName,label:""}),o("input",Object.assign({key:"f3dd7623af2747930fbe1792dcd660e3e4ec24e2",type:"text",class:"alc-input-file__text-input",readOnly:true,value:n,"aria-labelledby":this.idLabel,placeholder:"Selecione um arquivo",onClick:this.invokeFileInput,onKeyDown:t=>{if(t.key==="Enter"||t.key===" "){t.preventDefault();this.invokeFileInput()}},"aria-description":c},s())),this.files.length>0&&o("button",Object.assign({key:"e57be5e726b1dffa4fe673e30ae076c78f118320",class:"alc-input-file__remove-button",onClick:this.handleRemoveAll,"aria-label":"Remover arquivos selecionados"},s()),o("alc-icon",{key:"4ff389c91553e5061225f8a4090e7903de3edf13",name:"x",label:"Apagar"})))),o("div",{key:"113752296f8b66d3b204b3fcf266d71c4bd5171b",class:"alc-input-file__info"},this.files.length>0?this.renderFileInfo():"")),this.mode==="dropzone"&&o("div",{key:"e8b5fe04f1c073c067d81437294a988c99cd1a03",class:"alc-input-file__field"},o("div",Object.assign({key:"a340dfc0aa1387332820220db7052690278c1ac0",class:`alc-input-file__dropzone ${this.disabled?"alc-input-file__dropzone--disabled":""}`,onDrop:this.handleDrop,onDragOver:this.handleDragOver,onDragEnter:this.handleDragEnter,onDragLeave:this.handleDragLeave,role:"button",tabIndex:0,"aria-labelledby":this.idLabel,"aria-describedby":this.idDropzoneText,onClick:this.invokeFileInput,onKeyDown:t=>{if(t.key==="Enter"||t.key===" "){t.preventDefault();this.invokeFileInput()}}},s()),this.iconName&&o("alc-icon",{key:"e7335363a685a87839caa04eb07a7ec7904b33c3",name:this.iconName,label:""}),o("span",{key:"d5299aa97c8d78ca42f0470898ace7e0e313bf8f",class:"alc-input-file__dropzone-text",id:this.idDropzoneText},"Arraste e solte arquivos aqui ou clique para selecionar")),o("div",{key:"4a31ad607c0bc19d4eb4ba8848053a3f13ac1c2d",class:"alc-input-file__content","aria-controls":this.idInputFilePolite},this.files.length>0?this.renderFiles():"")),i)}get el(){return i(this)}};c.style=n;export{c as alc_input_file};
//# sourceMappingURL=p-1e02576d.entry.js.map