{"version":3,"names":["alcModalBaseCss","themeAlcModalCss","AlcModal","exports","class_1","hostRef","_this","this","idModalTitle","triggerElement","open","headerText","size","preventOverlayClose","getModalRef","element","modalRef","handleFocusWhenCloseModal","defaultFocus","hasTriggerElement","document","body","contains","includes","tagName","focus","prototype","watchOpen","alcAfterShow","emit","activeElement","lockBodyScroll","alcAfterHide","defaultPreventedFocus","alcFocusAfterHide","defaultPrevented","unlockBodyScroll","show","hide","handleKeyDown","event","key","preventDefault","handleHideByUser","focusableElements","getFocusableElements","componentWillLoad","getUniqueId","componentDidRender","focusFirstElement","connectedCallback","disconnectedCallback","handleOutsideClick","isClickedOutside","target","overlayRef","hideFrom","alcHide","from","render","h","Host","style","display","class","Object","assign","onClick","e","test","ref","el","role","id","name","type","label"],"sources":["src/components/alc-modal/alc-modal-base.css?tag=alc-modal&mode=base","src/components/alc-modal/alc-modal.css?tag=alc-modal&mode=theme","src/components/alc-modal/alc-modal.tsx"],"sourcesContent":[".alc-modal__overlay {\n    /* Posicionamento */\n    @apply z-10 w-screen h-screen top-0 left-0 p-2 fixed;\n    /* Alinhamento do elemento interno (cartão) */\n    @apply flex items-center justify-center;\n}\n  \n.alc-modal__card {\n    /* Aparência */\n    @apply bg-white border-2;\n    /* Tamanho */\n    @apply w-full md:max-w-lg;\n}\n\n.alc-modal__header {\n    @apply flex items-center justify-between;\n}\n\n.alc-modal__close {\n    /* Posicionamento e tamanho */\n    @apply text-lg w-8 h-8;\n}","/* Definição das variáveis - Setup dos temas*/\n[data-alc-theme=\"light\"] alc-modal {\n  --bg-color-overlay: theme('colors.gray-cool.80')66; /* 66 = 40% */\n  --border-color: theme('colors.gray-cool.40');\n}\n\n[data-alc-theme=\"dark\"] alc-modal {\n  --bg-color-overlay: theme('colors.gray-cool.60')66; /* 66 = 40% */\n  --border-color: theme('colors.gray-cool.60');\n}\n\nalc-modal {\n  --bg-color-card: var(--alc-color-surface-primary);\n  --bg-color-header: var(--alc-color-layer-b);\n}\n\n.alc-modal__base {\n  /* Posicionamento */\n  @apply z-[1050] w-full h-full top-0 left-0 fixed;\n  /* Alinhamento do elemento interno (cartão) */\n  @apply sm:flex sm:items-center sm:justify-center;\n}\n\n.alc-modal__overlay {\n  /* Posicionamento */\n  @apply w-full h-full top-0 left-0 fixed;\n  /* Cor */\n  @apply bg-[--bg-color-overlay];\n}\n\n.alc-modal__card {\n  /* Aparência */\n  @apply bg-[--bg-color-card] rounded-t border-t border-[--border-color] overflow-hidden; /* Overflow é para o header \"obedecer\" o arredondamento no topo do card */\n  /* A partir do sm vai ter borda em todo o card */\n  @apply sm:border;\n\n  /* Tamanho inicial (mobile) */\n  @apply w-full max-h-[90%];\n\n  /* Posicionamento dos elementos internos */\n  @apply flex flex-col;\n  \n  /* Posicionamento do cartão*/\n  /* Em mobile o cartão vai ficar na parte inferior */\n  @apply fixed bottom-0 left-0;\n  /* A partir do sm vai ficar centralizado na tela */\n  @apply sm:relative;\n}\n\n/* Tamanhos */\n.alc-modal__card--sm {\n  /* 576px */\n  @apply sm:w-[66%] sm:max-h-[72%];\n  /* 768px */\n  @apply md:w-[50%];\n  /* 992px */\n  @apply lg:w-[40%];\n  /* 1200px */\n  @apply xl:w-[33%];\n  /* 1400px */\n  @apply 2xl:w-[28%];\n}\n\n.alc-modal__card--md {\n  /* 576px */\n  @apply sm:w-[96%] sm:max-h-[84%];\n  /* 768px */\n  @apply md:w-[80%];\n  /* 992px */\n  @apply lg:w-[56%];\n  /* 1200px */\n  @apply xl:w-[52%];\n  /* 1400px */\n  @apply 2xl:w-[50%];\n}\n\n.alc-modal__card--lg {\n  /* 576px */\n  @apply sm:w-[96%] sm:max-h-[96%];\n  /* 768px */\n  @apply md:w-[96%];\n  /* 992px */\n  @apply lg:w-[78%];\n  /* 1200px */\n  @apply xl:w-[72%];\n  /* 1400px */\n  @apply 2xl:w-[70%];\n}\n\n.alc-modal__card--xl {\n  /* 576px */\n  @apply sm:w-[96%] sm:max-h-[96%];\n  /* 768px */\n  @apply md:w-[96%];\n  /* 992px */\n  @apply lg:w-[96%];\n  /* 1200px */\n  @apply xl:w-[98%];\n  /* 1400px */\n  @apply 2xl:w-[98%];\n}\n\n\n\n.alc-modal__header {\n  @apply flex items-center justify-between p-4 bg-[--bg-color-header];\n}\n\n.alc-modal__title {\n  @apply m-0;\n}\n\n.alc-modal__content {\n  @apply overflow-y-auto p-4;\n}\n\n.alc-modal__footer {\n  @apply text-right p-4 border-t border-t-[--border-color];\n}","import { Component, Host, h, Prop, Method, Listen, Event, EventEmitter, Watch } from '@stencil/core';\nimport { getUniqueId } from '../utils/getUniqueId';\nimport { getFocusableElements, focusFirstElement, handleKeyDown } from '../utils/keydown';\nimport test from '../utils/testAttributes';\nimport { lockBodyScroll, unlockBodyScroll } from '../utils/scrollLockManager';\n\ntype hideFromType = 'header-button' | 'footer-button' | 'keyboard' | 'overlay';\nexport interface AlcModalHideEventDetail {\n  from: hideFromType;\n}\n\n/**\n * @slot - O conteúdo da modal.\n * @slot header - O conteúdo do cabeçalho da modal.\n * @slot footer - O conteúdo do rodapé da modal.\n */\n\n@Component({\n  tag: 'alc-modal',\n  styleUrls: {\n    base: 'alc-modal-base.css',\n    theme: 'alc-modal.css',\n  },\n  scoped: false,\n})\nexport class AlcModal {\n  private idModalTitle = null;\n  private modalRef?: HTMLElement;\n  private triggerElement = null;\n  private overlayRef!: HTMLElement;\n\n  /**\n   * Define se a modal está aberta ou fechada.\n   */\n  @Prop({ mutable: true }) open?: boolean = false;\n\n  /**\n   * Título da modal\n   */\n  @Prop({ reflect: true }) headerText: string = '';\n\n  /**\n   * Tamanho da modal\n   */\n  @Prop({ mutable: true,  reflect: true  }) size?: 'sm' | 'md' | 'lg' | 'xl' = 'md';\n\n  /**\n   * Previne a modal de fechar ao clicar no overlay.\n   */\n  @Prop({ reflect: true, mutable: false }) preventOverlayClose: boolean = false;\n\n  @Watch('open')\n  watchOpen(open: boolean) {\n    if (open) {\n      // Show\n      this.alcAfterShow.emit();\n      this.triggerElement = document.activeElement as HTMLElement;\n      lockBodyScroll();\n    } else {\n      // Hide\n      this.alcAfterHide.emit();\n\n      const { defaultPrevented: defaultPreventedFocus } = this.alcFocusAfterHide.emit();\n      if (!defaultPreventedFocus) {\n        this.handleFocusWhenCloseModal();\n        unlockBodyScroll();\n      }\n\n    }\n  }\n\n  /**\n   * Evento disparado quando a modal abriu\n   */\n  @Event({\n    eventName: 'alc-after-show',\n    cancelable: false,\n    bubbles: true,\n  })\n  alcAfterShow: EventEmitter<null>;\n\n  /**\n   * Evento disparado quando a modal vai fechar\n   */\n  @Event({\n    eventName: 'alc-hide',\n    cancelable: true,\n    bubbles: true,\n  })\n  alcHide: EventEmitter<{\n    from: 'header-button' | 'footer-button' | 'keyboard' | 'overlay';\n  }>;\n\n  /**\n   * Evento disparado quando a modal fechou\n   */\n  @Event({\n    eventName: 'alc-after-hide',\n    cancelable: false,\n    bubbles: true,\n  })\n  alcAfterHide: EventEmitter<null>;\n\n  /**\n   * Evento disparado quando a modal fechou e esta pronto para lidar com foco.\n   */\n  @Event({\n    eventName: 'alc-focus-after-hide',\n    cancelable: true,\n    bubbles: true,\n  })\n  alcFocusAfterHide: EventEmitter<null>;\n\n  /**\n   * Método para abrir modal.\n   * @returns O valor retornado é `true` se a modal foi realmente exibida com essa chamada ao método.\n   */\n  @Method()\n  async show(): Promise<boolean> {\n    if (this.open) {\n      return false;\n    }\n\n    this.open = true;\n    return true;\n  }\n\n  /**\n   * Método para fechar modal.\n   * @returns O valor retornado é `true` se a modal foi realmente oculta com essa chamada ao método.\n   */\n  @Method()\n  async hide(): Promise<boolean> {\n    if (!this.open) {\n      return false;\n    }\n    \n    this.open = false;\n    return true;\n  }\n\n  /**\n   * Foco fica dentro da modal quando aberta.\n   */\n  @Listen('keydown', { target: 'document' })\n  handleKeyDown(event: KeyboardEvent) {\n    if (!this.open) {\n      return;\n    }\n\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    if (event.key === 'Escape') {\n      event.preventDefault();\n      this.handleHideByUser('keyboard');\n      return;\n    }\n\n    if (event.key !== 'Tab') return;\n    const focusableElements = getFocusableElements(this.modalRef);\n    handleKeyDown(event, focusableElements);\n  }\n\n  componentWillLoad() {\n    // Antes do componente carregar, cria um id para o titulo da modal (Acessibilidade).\n    this.idModalTitle = getUniqueId();\n\n  }\n\n  componentDidRender() {\n    // Pega os elementos focáveis a cada renderização (Pode haver mudanças na modal).\n    const focusableElements = getFocusableElements(this.modalRef);\n\n    // Após o componente renderizar e estiver aberto, então ja coloca foco dentro da modal.\n    if (this.open) {\n      focusFirstElement(focusableElements);\n    }\n  }\n\n  connectedCallback() {\n    if (this.open) {\n      lockBodyScroll();\n    }\n  }\n\n  disconnectedCallback() {\n    if (this.open) {\n      unlockBodyScroll();\n    }\n  }\n\n  private getModalRef = element => (this.modalRef = element as HTMLElement);\n\n  private handleFocusWhenCloseModal = () => {\n    const defaultFocus = ['BODY', 'DOCUMENT'];\n    const hasTriggerElement = !!this.triggerElement && document.body.contains(this.triggerElement);\n\n    if (hasTriggerElement && !defaultFocus.includes(this.triggerElement.tagName)) {\n      this.triggerElement.focus();\n    }\n\n  };\n\n  private handleOutsideClick(event: MouseEvent) {\n    const isClickedOutside = event.target === this.overlayRef;\n\n    if (isClickedOutside) {\n      this.handleHideByUser('overlay');\n    }\n  }\n\n  private handleHideByUser(hideFrom: hideFromType) {\n    // Se o usuário clicar no overlay e estiver impedido de fechar, não faz nada.\n    if (hideFrom === 'overlay' && this.preventOverlayClose) return;\n\n    const { defaultPrevented } = this.alcHide.emit({from: hideFrom});\n    if (!defaultPrevented) {\n      this.open = false;\n    }\n  }\n\n  render() {\n    return (\n      <Host style={{ display: this.open ? 'block' : 'none' }}>\n        <div class=\"alc-modal__base\">\n          <div\n            class=\"alc-modal__overlay\"\n            onClick={(e) => this.handleOutsideClick(e)}\n            {...test('data-test-overlay')}\n            ref={el => this.overlayRef = el}\n          >\n          </div>\n          <div\n            class={{\n              'alc-modal__card': true,\n              'alc-modal__card--sm':   this.size === \"sm\",\n              'alc-modal__card--md':   this.size === \"md\",\n              'alc-modal__card--lg':   this.size === \"lg\",\n              'alc-modal__card--xl':   this.size === \"xl\",\n            }}\n            role=\"dialog\"\n            aria-modal=\"true\"\n            aria-labelledby={this.idModalTitle}\n            ref={this.getModalRef}\n          >\n            <div class=\"alc-modal__header\">\n              {this.headerText ? (\n                <h2 id={this.idModalTitle} class=\"alc-modal__title\">\n                  {this.headerText}\n                </h2>\n              ) : (\n                <slot name=\"header\"></slot>\n              )}\n              <button type=\"button\" class=\"alc-button alc-button-rounded\" onClick={() => this.handleHideByUser('header-button')} {...test('data-test-close-button')}>\n                <alc-icon name=\"x-lg\" label=\"Fechar Modal\" {...test('data-test-close-icon')} />\n              </button>\n            </div>\n            <div class=\"alc-modal__content\">\n              <slot></slot>\n            </div>\n            <div class=\"alc-modal__footer\">\n              <slot name=\"footer\">\n                <button type=\"button\" class=\"alc-button alc-button-primary\" onClick={() => this.handleHideByUser('footer-button')} {...test('data-test-footer-close-button')}>\n                  Fechar\n                </button>\n              </slot>\n            </div>\n          </div>\n        </div>\n      </Host>\n    );\n  }\n}\n"],"mappings":"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","ignoreList":[]}