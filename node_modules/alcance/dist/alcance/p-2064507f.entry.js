import{r as t,c as e,h as s,H as r,g as i}from"./p-BuFKlV49.js";import{g as a}from"./p-CsSB10gC.js";import{g as o}from"./p-BY09qPiz.js";import{l as n}from"./p-aC3bzUnr.js";const h='[data-alc-theme="dark"] alc-dropdown{--border-color:var(--alc-color-neutral-80)}[data-alc-theme="light"] alc-dropdown{--border-color:var(--alc-color-neutral-10)}alc-dropdown{position:relative;display:inline-block}.alc-dropdown__content{overflow:auto;background-color:var(--alc-color-surface-primary);border-radius:0.25rem;border-width:1px;border-color:var(--border-color);--tw-shadow-color:#000000;--tw-shadow:var(--tw-shadow-colored);--tw-drop-shadow:drop-shadow(0 4px 3px rgb(0 0 0 / 0.07)) drop-shadow(0 2px 2px rgb(0 0 0 / 0.06));-webkit-filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);max-height:inherit;}.alc-dropdown__content--opened{display:block}@-webkit-keyframes Scale{0%{opacity:0;-webkit-transform:scale(0.8);transform:scale(0.8)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@keyframes Scale{0%{opacity:0;-webkit-transform:scale(0.8);transform:scale(0.8)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}';const c=class{constructor(s){t(this,s);this.alcShow=e(this,"alc-show",7);this.alcAfterShow=e(this,"alc-after-show",6);this.alcHide=e(this,"alc-hide",7);this.alcAfterHide=e(this,"alc-after-hide",6);this.hideOnEventsMap=new Map;this.open=false;this.hideOn="";this.handleAnchorClick=t=>{var e;if(!(t.target instanceof Node)){return}if((e=this.trigger)===null||e===void 0?void 0:e.contains(t.target)){this.toggleDropdown()}};this.toggleDropdown=async()=>{this.open?this.hide():this.show()}}watchOpen(){if(this.trigger){this.handleTriggerAriaExpanded();this.handleTriggerTabindex()}}watchHideOn(){this.hideOnEventsMap.forEach(((t,e)=>{this.content.removeEventListener(e,t);this.hideOnEventsMap.delete(e)}));this.addHideOnListeners()}async handleKeydown(t){if(!this.open)return;if(t.key!=="Escape")return;if(t.defaultPrevented)return;t.preventDefault();await this.hide();this.handleTriggerFocus()}async show(){if(this.open){return false}const{defaultPrevented:t}=this.alcShow.emit();if(t){return false}this.open=true;this.alcAfterShow.emit();return true}async hide(){if(!this.open){return false}const{defaultPrevented:t}=this.alcHide.emit();if(t){return false}this.open=false;this.alcAfterHide.emit();return true}handleTriggerFocus(){var t;(t=this.trigger)===null||t===void 0?void 0:t.focus()}handleContentFocus(){const t=a(this.content)[0];if(!t)return;if(t instanceof HTMLElement){t.focus()}}setTriggerAccessibility(){if(this.trigger.getAttribute("role")===null){this.trigger.setAttribute("role","button")}const t=this.content.firstElementChild;if(this.trigger.getAttribute("aria-haspopup")===null){const e=(t===null||t===void 0?void 0:t.role)==="menu"?"menu":"dialog";this.trigger.setAttribute("aria-haspopup",e)}let e=(t===null||t===void 0?void 0:t.id)?t.id:o();if(!t){this.content.id=e}else{t.id=e}this.trigger.setAttribute("aria-controls",e)}handleTriggerAriaExpanded(){this.trigger.ariaExpanded=`${this.open}`}handleTriggerTabindex(){this.trigger.tabIndex=this.open?-1:this.originalTriggerTabindex}async handleFocusOut(t){const{relatedTarget:e}=t;const s=e instanceof Node;if(s&&this.el.contains(e)){return}await this.hide()}handleCloseOn(t){if(t.defaultPrevented){return}this.open=false}addHideOnListeners(){const t=this.hideOn.trim();if(!t){return}const e=t.split(/\s+/);e.forEach((t=>{const e=t=>this.handleCloseOn(t);this.hideOnEventsMap.set(t,e);this.content.addEventListener(t,e)}))}componentDidUpdate(){if(this.open){this.handleContentFocus()}}getTrigger(){let t=null;let e=null;t=this.el.querySelector('[slot="trigger"]');if(t){if(t.tagName==="BUTTON"||t.getAttribute("role")==="button"){e=t}else{e=t.querySelector('button, [role="button"]')}}if(e===null){n.warn(this.el,"alc-dropdown não localizou um trigger válido. Slot deve ser ou conter um botão. Veja a documentação para mais detalhes.")}return e}componentDidLoad(){this.trigger=this.getTrigger();if(this.trigger){this.setTriggerAccessibility();this.handleTriggerAriaExpanded();this.originalTriggerTabindex=this.trigger.tabIndex}this.addHideOnListeners()}render(){return s(r,{key:"2a3cb9758c23c1f7f895322bffa6893a4680e1e8"},s("alc-popup",{key:"0c352d9d09c09df64e50c0561633120705875ef1",active:this.open,placement:"bottom-start",flip:true,shift:true,strategy:"fixed",onFocusout:this.handleFocusOut.bind(this),distance:2},s("div",{key:"6b60a206a5a326e53c1f3afed07b0e53b52c9832",slot:"anchor",onClick:this.handleAnchorClick},s("slot",{key:"528d7a27ebf5bdc884d89796d3aec84ae19e18e5",name:"trigger"})),s("div",{key:"2407874043bb9e9cabfaf9bc13751040f15f0c18",class:"alc-dropdown__content",ref:t=>this.content=t,tabindex:"-1"},s("slot",{key:"ecd68a468c536a351baa3c5eb75fad9fbd88c2b4"}))))}get el(){return i(this)}static get watchers(){return{open:["watchOpen"],hideOn:["watchHideOn"]}}};c.style=h;const l=".alc-menu{display:block;padding-top:0.5rem;padding-bottom:0.5rem;background-color:var(--alc-color-surface-primary)}";const d=class{constructor(e){t(this,e);this.hasFocus=false;this.getListItems=()=>Array.from(this.hostElement.querySelectorAll("[role^=menuitem]"));this.includeFirstItemInTabNavigation=()=>{this.items.forEach(((t,e)=>{t.setAttribute("tabindex",e===0?"0":"-1")}))};this.removeAllItemsFromTabNavigation=()=>{this.items.forEach((t=>t.setAttribute("tabindex","-1")))};this.setHasFocus=(t=true)=>{this.hasFocus=t;if(t){this.removeAllItemsFromTabNavigation()}else{this.includeFirstItemInTabNavigation()}}}async refresh(){this.items=this.getListItems();this.includeFirstItemInTabNavigation()}handleKeydown(t){if("ArrowDown"===t.key){t.preventDefault();this.handleFocusedItemIndex();return}if("ArrowUp"===t.key){t.preventDefault();this.handleFocusedItemIndex(-1);return}}handleAlcSelect(t){const e=this.items.findIndex((e=>e===t.target));if(e===null)return;this.handleFocusItem(e)}handleFocusin({target:t}){if(this.hasFocus){return}if(this.hostElement.contains(t)){this.setHasFocus(true)}}handleFocusout({relatedTarget:t}){if(!this.hostElement.contains(t)){this.setHasFocus(false)}}handleFocusedItemIndex(t=1){const e=this.items.indexOf(document.activeElement);if(e===-1)return;let s=e+t;const r=this.items.length-1;if(s>r){s=0}if(s<0){s=r}this.handleFocusItem(s)}handleFocusItem(t){const e=this.items[t];if(e instanceof HTMLElement){e.focus()}}componentDidRender(){this.items=this.getListItems()}componentDidLoad(){this.includeFirstItemInTabNavigation()}render(){return s(r,{key:"2aa137629ce5187b9191d9885a0b716d51ef4861",role:"menu",class:"alc-menu"},s("slot",{key:"6442d2320bb9c5b2f83859688fb464ac5ab903da"}))}get hostElement(){return i(this)}};d.style=l;export{c as alc_dropdown,d as alc_menu};
//# sourceMappingURL=p-2064507f.entry.js.map