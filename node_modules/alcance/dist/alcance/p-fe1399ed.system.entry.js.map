{"version":3,"names":["alcHeaderNotificationsCss","BUTTON_LABEL","MAX_COUNTER","AlcHeaderNotifications","exports","class_1","hostRef","this","overflow","notificationsLabel","notificationsAudible","notifications","variant","url","prototype","watchNotifications","newValue","Number","isNaN","logger","warn","concat","toString","handleClick","event","defaultPrevented","alcClick","emit","preventDefault","componentWillLoad","render","_this","commonProps","class","onClick","h","Host","key","Object","assign","renderContent","href","role","badge","color","count","label","name"],"sources":["src/components/alc-header-notifications/alc-header-notifications.css?tag=alc-header-notifications","src/components/alc-header-notifications/alc-header-notifications.tsx"],"sourcesContent":["/*\n  Manipulação direta no estilo de alc-badge,\n  para atender ao que foi especificado no Figma.\n */\n.alc-header-notifications .alc-badge {\n  @apply rounded-[8px] py-0 px-[2px] bg-orange-warm-30v text-black;\n  line-height: 1em;\n}\n\n.alc-header-notifications__aria-live {\n  @apply sr-only;\n}","import { Component, Host, Prop, Watch, h, Event, EventEmitter } from '@stencil/core';\nimport logger from '../utils/logger';\n\n/*\n  TODO: Avaliar possibilidade de \"abrir\" para modificar rótulo do botão\n  Nessa versão, não será possível alterar o rótulo do botão.\n  Há uma certa dificuldade para lidar com slot, possível html dentro do slot,\n  e a extração do texto correspondente para criar os elementos audíveis.\n*/\nconst BUTTON_LABEL = \"Notificações\";\nconst MAX_COUNTER = 99;\n\n@Component({\n  tag: 'alc-header-notifications',\n  styleUrl: 'alc-header-notifications.css',\n  scoped: false,\n})\nexport class AlcHeaderNotifications {\n\n  private overflow = false;\n  private notificationsLabel = \"\";\n  private notificationsAudible = \"\";\n\n  /**\n   * Número de notificações a serem exibidas no botão.\n   */\n  @Prop({\n    reflect: true,\n    mutable: false,\n  })\n  notifications: number = 0;\n\n  /**\n   * Define o tipo de elemento a ser renderizado. Pode ser um button ou um link.\n   */\n  @Prop({\n    reflect: true\n  })\n  variant: 'button' | 'link' = 'button';\n\n  /**\n   * URL para a página de notificações. Usado quando a propriedade `variant` é `link`.\n   * Se o `variant` for `button`, esse atributo será ignorado.\n   */\n  @Prop({ reflect: true }) url: string = '';\n\n  @Watch('notifications')\n  watchNotifications(newValue: number) {\n\n    if (Number.isNaN(newValue)) {\n      logger.warn('O valor do atributo \"notifications\" deve ser numérico. Assumindo o valor padrão 0.');\n      newValue = 0;\n    }\n\n    if (newValue === 0) {\n      this.notificationsLabel = \"\";\n      this.notificationsAudible = \"\";\n      this.overflow = false;\n    }\n    else if (newValue > MAX_COUNTER) {\n      this.notificationsLabel = `${MAX_COUNTER}+`;\n      this.notificationsAudible = `Mais de ${MAX_COUNTER} ${BUTTON_LABEL}`;\n      this.overflow = true;\n    }\n    else {\n      this.notificationsLabel = newValue.toString();\n      this.notificationsAudible = `${newValue.toString()} ${BUTTON_LABEL}`;\n      this.overflow = false;\n    }\n  }\n\n  /**\n   * Evento disparado quando o usuário clica nas notificações. Pode ser cancelado.\n   */\n  @Event({\n    eventName: 'alc-click',\n    bubbles: true,\n    cancelable: true\n  })\n  alcClick: EventEmitter<null>;\n\n  async handleClick(event: MouseEvent) {\n    const { defaultPrevented } = this.alcClick.emit();\n    if (defaultPrevented) {\n      event.preventDefault();\n    }\n  }\n\n  componentWillLoad() {\n    this.watchNotifications(this.notifications);\n  }\n\n  render() {\n    const commonProps = {\n      class: \"alc-header-button\",\n      \"aria-label\": this.overflow ? `${this.notificationsAudible}` : null,\n      onClick: (event: MouseEvent) => this.handleClick(event),\n    };\n\n    return (\n      <Host>\n        <span class=\"alc-header-notifications\">\n          \n          {this.variant === 'button' ? (\n            <button {...commonProps}>\n              {this.renderContent()}\n            </button>\n          ) : (\n            <a href={this.url} {...commonProps}>\n              {this.renderContent()}\n            </a>\n          )}\n\n          {/* aria live container */}\n          <span\n            role=\"status\"\n            aria-live=\"polite\"\n            aria-atomic=\"true\"\n            class=\"alc-header-notifications__aria-live\"\n          >\n            { this.notifications\n              ?\n                `${this.notificationsAudible}`\n              :\n                null\n            }\n          </span>\n        </span>\n      </Host>\n    );\n  }\n\n  renderContent() {\n    const badge = (\n      <alc-badge\n        color=\"warning\"\n        count={true}\n        label={this.notificationsLabel}\n      >\n        <alc-icon name=\"bell\" label=\"\" class=\"alc-header-button__icon\"></alc-icon>\n      </alc-badge>\n    )\n\n    const label = (\n      <span class=\"alc-header-button__label\">\n        {BUTTON_LABEL}\n      </span>\n    )\n\n    return [\n      badge,\n      label\n    ]\n  }\n\n}\n"],"mappings":"spDAAA,IAAMA,EAA4B,mcCSlC,IAAMC,EAAe,eACrB,IAAMC,EAAc,G,IAOPC,EAAsBC,EAAA,sCALnC,SAAAC,EAAAC,G,8CAOUC,KAAQC,SAAG,MACXD,KAAkBE,mBAAG,GACrBF,KAAoBG,qBAAG,GAS/BH,KAAaI,cAAW,EAQxBJ,KAAOK,QAAsB,SAMJL,KAAGM,IAAW,EA+GxC,CA5GCR,EAAAS,UAAAC,mBAAA,SAAmBC,GAEjB,GAAIC,OAAOC,MAAMF,GAAW,CAC1BG,EAAOC,KAAK,sFACZJ,EAAW,C,CAGb,GAAIA,IAAa,EAAG,CAClBT,KAAKE,mBAAqB,GAC1BF,KAAKG,qBAAuB,GAC5BH,KAAKC,SAAW,K,MAEb,GAAIQ,EAAWd,EAAa,CAC/BK,KAAKE,mBAAqB,GAAAY,OAAGnB,EAAW,KACxCK,KAAKG,qBAAuB,WAAAW,OAAWnB,EAAW,KAAAmB,OAAIpB,GACtDM,KAAKC,SAAW,I,KAEb,CACHD,KAAKE,mBAAqBO,EAASM,WACnCf,KAAKG,qBAAuB,GAAAW,OAAGL,EAASM,WAAU,KAAAD,OAAIpB,GACtDM,KAAKC,SAAW,K,GAcdH,EAAAS,UAAAS,YAAN,SAAkBC,G,2FACRC,EAAqBlB,KAAKmB,SAASC,OAAMF,iBACjD,GAAIA,EAAkB,CACpBD,EAAMI,gB,kBAIVvB,EAAAS,UAAAe,kBAAA,WACEtB,KAAKQ,mBAAmBR,KAAKI,c,EAG/BN,EAAAS,UAAAgB,OAAA,eAAAC,EAAAxB,KACE,IAAMyB,EAAc,CAClBC,MAAO,oBACP,aAAc1B,KAAKC,SAAW,GAAAa,OAAGd,KAAKG,sBAAyB,KAC/DwB,QAAS,SAACV,GAAsB,OAAAO,EAAKR,YAAYC,EAAjB,GAGlC,OACEW,EAACC,EAAI,CAAAC,IAAA,4CACHF,EAAM,QAAAE,IAAA,2CAAAJ,MAAM,4BAET1B,KAAKK,UAAY,SAChBuB,EAAA,SAAAG,OAAAC,OAAA,GAAYP,GACTzB,KAAKiC,iBAGRL,EAAA,IAAAG,OAAAC,OAAA,CAAGE,KAAMlC,KAAKM,KAASmB,GACpBzB,KAAKiC,iBAKVL,EAAA,QAAAE,IAAA,2CACEK,KAAK,SAAQ,YACH,SACE,qBACZT,MAAM,uCAEJ1B,KAAKI,cAEH,GAAAU,OAAGd,KAAKG,sBAER,O,EAQdL,EAAAS,UAAA0B,cAAA,WACE,IAAMG,EACJR,EACE,aAAAS,MAAM,UACNC,MAAO,KACPC,MAAOvC,KAAKE,oBAEZ0B,EAAA,YAAUY,KAAK,OAAOD,MAAM,GAAGb,MAAM,6BAIzC,IAAMa,EACJX,EAAM,QAAAF,MAAM,4BACThC,GAIL,MAAO,CACL0C,EACAG,E,iJAtI6B,I","ignoreList":[]}