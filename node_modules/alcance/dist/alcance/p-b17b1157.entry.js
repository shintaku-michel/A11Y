import{r as e,h as t,g as s}from"./p-BuFKlV49.js";import{g as c}from"./p-BY09qPiz.js";const l=".alc-field-checker{display:block}";const i=class{constructor(t){e(this,t);this.idAlert=null;this.errorFields=[];this.checkOnSubmit=false;this.handleFormSubmit=e=>{this.checkAlcFields();if(this.errorFields.length>0){e.preventDefault()}}}componentWillLoad(){this.idAlert=c()}componentDidLoad(){if(!this.checkOnSubmit){this.checkAlcFields();this.observer=new MutationObserver((()=>this.checkAlcFields()));const e=this.hostElement.querySelectorAll("alc-field, alc-fieldset, alc-checkbox, alc-radio");e.forEach((e=>this.observer.observe(e,{attributes:true,childList:true,subtree:true})))}else{const e=this.hostElement.querySelector("form");if(e){e.addEventListener("submit",this.handleFormSubmit)}}}disconnectedCallback(){var e;(e=this.observer)===null||e===void 0?void 0:e.disconnect()}getFieldId(e){const t=e.querySelector("input, textarea, select");return t?t.getAttribute("id"):""}isChildOfFieldset(e){return e.closest("alc-fieldset")!==null}getLabelText(e){const t=e.querySelector("label");return t?t.textContent.trim():""}checkAlcFields(){const e=Array.from(this.hostElement.querySelectorAll("alc-field, alc-fieldset, alc-checkbox, alc-radio")).filter((e=>{if(e.tagName.toLowerCase()==="alc-checkbox"||e.tagName.toLowerCase()==="alc-radio"){return!this.isChildOfFieldset(e)}return true}));this.errorFields=e.filter((e=>e.hasAttribute("error-msg")&&e.getAttribute("error-msg")!=="")).map((e=>{const t=e.tagName.toLowerCase()==="alc-checkbox"||e.tagName.toLowerCase()==="alc-radio";const s=e.tagName.toLowerCase()==="alc-fieldset";return{id:this.getFieldId(e),label:t?this.getLabelText(e):s?e.getAttribute("legend"):e.getAttribute("label"),errorMsg:e.getAttribute("error-msg")}}))}render(){return t("div",{key:"0a9dfd4e96e62c36ef0cc1b9a3a82b943e0bfd9c",class:"alc-field-checker"},this.errorFields.length>0&&t("alc-alert",{key:"65030b9165d9c7909cafc0b22a5a1b456e27c768",id:this.idAlert,type:"warning",dismissible:false},t("span",{key:"9db85f42ff4ea2ec8103cc501e5a602e1a592e04",class:"alc-alert__summary"},"Atenção: Seu formulário contém ",this.errorFields.length," ",this.errorFields.length>1?"erros":"erro"),t("ul",{key:"c724032a1d6eaa5a0cea7cef9f40d3d8be0069f3"},this.errorFields.map((e=>t("li",null,t("a",{href:`#${e.id}`,class:"alc-link alc-link--color-text"},t("strong",null,e.label,":")," ",e.errorMsg)))))),t("slot",{key:"72e09b858f27172b05f0df38c8c6f9dca12a0ae6"}))}get hostElement(){return s(this)}};i.style=l;export{i as alc_field_checker};
//# sourceMappingURL=p-b17b1157.entry.js.map