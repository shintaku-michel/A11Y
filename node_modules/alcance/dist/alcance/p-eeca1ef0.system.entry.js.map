{"version":3,"names":["alcUserMenuCss","AlcUserMenu","exports","class_1","hostRef","_this","this","variation","name","registrationNumber","imgSrc","dropdownOpen","handleLogout","e","defaultPrevented","alcLogout","emit","preventDefault","prototype","componentDidLoad","externalContainer","host","querySelector","internalContainer","moveInfo","handleResize","largura","window","innerWidth","children","length","firstChild","appendChild","classList","add","remove","componentDidRender","mobileMenuContainer","insertAdjacentElement","menu","mobileSlotContainer","defaultSlot","desktopMenuContainer","desktopSlotContainer","renderDesktop","h","class","hidden","ref","el","slot","src","alt","label","icon","renderMobile","open","render","_a","logoutUrl","logger","report","tagName","toLowerCase","Host","key","href","onClick"],"sources":["src/components/alc-user-menu/alc-user-menu.css?tag=alc-user-menu","src/components/alc-user-menu/alc-user-menu.tsx"],"sourcesContent":["alc-user-menu {\n  /* \"avatar\" size usado tanto para foto (image) quanto para ícone (icon) */\n  --avatar-size: theme('size.10');\n  --avatar-size-mobile: theme('size.16');\n  --border-width: theme('borderWidth.2');\n}\n\n/* ==== ESTILOS COMUNS ==== */\n/* foto do usuário */\n.alc-user-menu__image {\n  @apply w-[--avatar-size] h-[--avatar-size] border-[calc(var(--border-width)*1)] border-cyan-60v dark:border-mint-cool-40 rounded-full object-cover mr-[--alc-spacing-03];\n}\n\n.alc-user-menu__icon {\n  @apply text-[calc(var(--avatar-size)-2*var(--border-width))]/none border-[calc(var(--border-width)*1)] border-cyan-60v dark:border-mint-cool-40 rounded-full object-cover mr-[--alc-spacing-03];\n}\n\n/* ==== MOBILE (variação 1) ==== */\n.alc-user-menu--mobile {\n  @apply flex flex-col;\n}\n\n.alc-user-menu--mobile__header {\n  @apply flex items-center pl-[--alc-spacing-06] pr-[--alc-spacing-09] pt-[--alc-spacing-06];\n}\n\n.alc-user-menu--mobile__header .alc-user-menu__image {\n  @apply w-[--avatar-size-mobile] h-[--avatar-size-mobile] mr-[--alc-spacing-05] border-none;\n}\n\n.alc-user-menu--mobile__header .alc-user-menu__icon {\n  @apply text-[calc(var(--avatar-size-mobile)*1)]/none bg-[--alc-color-layer-a];\n}\n\n.alc-user-menu--mobile .alc-user-menu__name {\n  @apply text-base font-medium;\n}\n\n\n/* ==== DESKTOP (variação 2) ==== */\n/* container principal */\n.alc-user-menu--desktop {\n  @apply flex items-center justify-between;\n}\n\n.alc-user-menu__info--external {\n  @apply flex flex-col mr-[--alc-spacing-03] ml-auto text-right;\n}\n\n.alc-user-menu__info--internal {\n  @apply pl-[--alc-spacing-05] pr-[--alc-spacing-05] pb-[--alc-spacing-03] pt-[--alc-spacing-05] text-[--alc-color-text-primary];\n}\n\n.alc-user-menu__info--internal:empty {\n  @apply p-0;\n}\n\n/* bloco de informações (texto) */\n.alc-user-menu__info {\n  @apply flex flex-col mr-[--alc-spacing-03];\n}\n\n/* linha principal: nome + registration-number */\n.alc-user-menu__primary {\n  @apply items-center gap-[--alc-spacing-02];\n}\n\n.alc-user-menu__name {\n  @apply font-medium text-base/[--alc-font-line-height-base];\n}\n\n.alc-user-menu__reg {\n  @apply ml-[--alc-spacing-02] font-normal;\n}\n\n.alc-user-menu--mobile__reg {\n  @apply ml-[--alc-spacing-02] font-normal;\n}\n\n/* bloco dos acionadores */\n.alc-popup__content {\n  @apply max-w-64;\n}\n\n.alc-user-menu__trigger {\n  @apply flex items-center bg-transparent border-none p-0 cursor-pointer;\n}\n\n.alc-user-menu__dropdown alc-popup {\n  @apply flex;\n}\n\n/* informação extra (slot default) */\n.alc-user-menu__secondary {\n  @apply font-normal text-sm text-[--alc-color-text-subtle];\n}\n\n.alc-user-menu__info--external .alc-user-menu__secondary {\n  @apply text-current;\n}\n\n.alc-user-menu__logout-icon {\n  @apply mr-[--alc-spacing-03];\n}\n\n/* separador */\n.alc-user-menu__info--separator {\n  @apply border-b border-[--alc-color-border];\n}","import {\n  Component,\n  Prop,\n  State,\n  Event,\n  EventEmitter,\n  h,\n  Element,\n  Listen,\n  Host\n} from '@stencil/core';\nimport logger from '../utils/logger';\n\n@Component({\n  tag: 'alc-user-menu',\n  styleUrl: 'alc-user-menu.css',\n  scoped: false,\n})\nexport class AlcUserMenu {\n  @Element() host!: HTMLElement;\n  /**\n   * Define a variação do menu de usuário. Geralmente, não é recomendado alterar esse valor.\n   */\n  @Prop({ reflect: true }) variation: 'mobile' | 'desktop' = 'desktop';\n\n  /**\n   * Nome do usuário.\n   */\n  @Prop({ reflect: true }) name = 'Usuário';\n\n  /**\n   * Número de matrícula ou ponto do usuário.\n   */\n  @Prop({ reflect: true }) registrationNumber = '';\n\n  /**\n   * URL que efetua o logout do usuário. O link \"Sair\" navegará para essa URL.\n   */\n  @Prop({ reflect: true }) logoutUrl!: string;\n\n  /**\n   * URL da imagem do usuário. Se não for fornecida, será exibido um ícone padrão.\n   */\n  @Prop({ reflect: true }) imgSrc = '';\n\n  /**\n   * Evento disparado quando o link \"Sair\" é acionado. Se cancelado, não navegará para a URL de logout.\n   */\n  @Event({ eventName: 'alc-logout', cancelable: true, bubbles: true }) \n  alcLogout: EventEmitter;\n\n  @State() dropdownOpen = false;\n\n  // referências aos containers de “info”\n  private externalContainer!: HTMLElement;\n  private internalContainer!: HTMLElement;\n\n  // referências aos actions do menu (slot=\"actions\")\n  private desktopMenuContainer: HTMLElement;\n  private mobileMenuContainer: HTMLElement;\n  private menu: HTMLAlcMenuElement;\n\n  // referências ao slot default\n  private defaultSlot: HTMLDivElement;\n  private desktopSlotContainer: HTMLDivElement;\n  private mobileSlotContainer: HTMLDivElement;\n\n  componentDidLoad() {\n    if (this.variation === 'desktop') {\n      this.externalContainer = this.host.querySelector('.alc-user-menu__info--external')!;\n      this.internalContainer = this.host.querySelector('.alc-user-menu__info--internal')!;\n      this.moveInfo();\n    }\n  }\n\n  @Listen('resize', { target: 'window' })\n  handleResize() {\n    if (this.variation === 'desktop') {\n      this.moveInfo();\n    }\n  }\n\n  private moveInfo() {\n    const largura = window.innerWidth;\n\n    // < 1200px é compacto, >= 1200px é expandido\n    if (largura < 1200) {\n      if (this.externalContainer && this.internalContainer && this.internalContainer.children.length === 0) {\n        while (this.externalContainer.firstChild) {\n          this.internalContainer.appendChild(this.externalContainer.firstChild);\n          this.internalContainer.classList.add('alc-user-menu__info--separator');\n        }\n      }\n    } else {\n      if (this.externalContainer && this.internalContainer && this.externalContainer.children.length === 0) {\n        while (this.internalContainer.firstChild) {\n          this.externalContainer.appendChild(this.internalContainer.firstChild);\n          this.internalContainer.classList.remove('alc-user-menu__info--separator');\n        }\n      }\n    }\n  }\n\n  private handleLogout = (e: MouseEvent) => {\n    const { defaultPrevented } = this.alcLogout.emit();\n    if (defaultPrevented) {\n      e.preventDefault();\n    }\n  };\n\n  componentDidRender() {\n\n    if (this.variation === 'mobile') {\n      this.mobileMenuContainer.insertAdjacentElement('beforeend', this.menu);\n      this.mobileSlotContainer.insertAdjacentElement('beforeend', this.defaultSlot);\n    }\n    else {\n      this.desktopMenuContainer.insertAdjacentElement('beforeend', this.menu);\n      this.desktopSlotContainer.insertAdjacentElement('beforeend', this.defaultSlot);\n    }\n  }\n\n  private renderDesktop() {\n    return (\n      <div class={{\n          \"alc-user-menu--desktop\": true,\n          'hidden': this.variation === 'mobile'\n        }}\n      >\n        <div class=\"alc-user-menu__info--external\">\n          {/* conteúdo transitório: será movido */}\n          <div>\n            <div class=\"alc-user-menu__primary\">\n              <span class=\"alc-user-menu__name\">{this.name}</span>\n              {this.registrationNumber && <span class=\"alc-user-menu__reg\">({this.registrationNumber})</span>}\n            </div>\n            <div class=\"alc-user-menu__secondary\" ref={el => this.desktopSlotContainer = el}>\n            </div>\n          </div>\n        </div>\n\n        <alc-dropdown class=\"alc-user-menu__dropdown\">\n          <button\n            slot=\"trigger\"\n            class=\"alc-user-menu__trigger\"\n            aria-label=\"Abrir menu do usuário\"\n          >\n            {this.imgSrc ? (\n              <img\n                class=\"alc-user-menu__image\"\n                src={this.imgSrc}\n                alt={this.name}\n              />\n            ) : (\n              <alc-icon\n                class=\"alc-user-menu__image alc-user-menu__icon\"\n                name=\"person-fill\"\n                label={this.name}\n              />\n            )}\n            <alc-icon icon=\"chevron-down\" label=\"\" />\n          </button>\n          <div class=\"alc-user-menu__info--internal\"></div>\n          <div ref={el => this.desktopMenuContainer = el}></div>\n        </alc-dropdown>\n      </div>\n    );\n  }\n\n  private renderMobile() {\n    return (\n      <div class={{\n          \"alc-user-menu--mobile\": true,\n          'hidden': this.variation === 'desktop'\n        }}\n      >\n      {/* HEADER: foto + bloco de info (nome + slot) */}\n      <div class=\"alc-user-menu--mobile__header\">\n        {this.imgSrc ? (\n          <img\n            class=\"alc-user-menu__image\"\n            src={this.imgSrc}\n            alt={this.name}\n          />\n        ) : (\n          <alc-icon\n            class=\"alc-user-menu__image alc-user-menu__icon\"\n            name=\"person-fill\"\n            label={this.name}\n          />\n        )}\n        <div class=\"alc-user-menu--mobile__info\">\n          <div class=\"alc-user-menu__name\">{this.name}\n          {this.registrationNumber && <span class=\"alc-user-menu--mobile__reg\">({this.registrationNumber})</span>}\n          </div>\n          <div class=\"alc-user-menu__secondary\" ref={el => this.mobileSlotContainer = el}>\n          </div>\n        </div>\n      </div>\n        {/* expander para ações */}\n        <alc-expander label=\"Menu do usuário\" open={false} hide-label=\"true\">\n          <div>\n            <div ref={el => this.mobileMenuContainer = el}></div>\n          </div>\n        </alc-expander>\n      </div>\n    );\n  }\n\n  render() {\n    this.logoutUrl ?? logger.report('logoutUrl', this.host.tagName.toLowerCase(), this.host);\n\n    return (\n      <Host>\n        <alc-menu ref={el => this.menu = el}>\n          <slot name=\"actions\"></slot>\n          <alc-menu-item-theme />\n          <alc-menu-link>\n            <a href={this.logoutUrl} onClick={this.handleLogout}>\n              <alc-icon name=\"box-arrow-right\" label=\"\" class=\"alc-user-menu__logout-icon\"></alc-icon>\n              Sair\n            </a>\n          </alc-menu-link>\n        </alc-menu>\n\n        <div ref={el => this.defaultSlot = el}>\n          <slot></slot>\n        </div>\n\n        {/* Renderiza sempre os dois modelos, escondendo um ou outro */}\n        {\n          [\n            this.renderMobile(),\n            this.renderDesktop()\n          ]\n        }\n      </Host>\n    );\n  }\n}"],"mappings":"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","ignoreList":[]}