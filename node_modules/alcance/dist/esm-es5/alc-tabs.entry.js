var __awaiter=this&&this.__awaiter||function(t,r,i,n){function e(t){return t instanceof i?t:new i((function(r){r(t)}))}return new(i||(i=Promise))((function(i,a){function s(t){try{u(n.next(t))}catch(t){a(t)}}function o(t){try{u(n["throw"](t))}catch(t){a(t)}}function u(t){t.done?i(t.value):e(t.value).then(s,o)}u((n=n.apply(t,r||[])).next())}))};var __generator=this&&this.__generator||function(t,r){var i={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,e,a,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(t){return function(r){return u([t,r])}}function u(o){if(n)throw new TypeError("Generator is already executing.");while(s&&(s=0,o[0]&&(i=0)),i)try{if(n=1,e&&(a=o[0]&2?e["return"]:o[0]?e["throw"]||((a=e["return"])&&a.call(e),0):e.next)&&!(a=a.call(e,o[1])).done)return a;if(e=0,a)o=[o[0]&2,a.value];switch(o[0]){case 0:case 1:a=o;break;case 4:i.label++;return{value:o[1],done:false};case 5:i.label++;e=o[1];o=[0];continue;case 7:o=i.ops.pop();i.trys.pop();continue;default:if(!(a=i.trys,a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){i=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(o[0]===6&&i.label<a[1]){i.label=a[1];a=o;break}if(a&&i.label<a[2]){i.label=a[2];i.ops.push(o);break}if(a[2])i.ops.pop();i.trys.pop();continue}o=r.call(t,i)}catch(t){o=[6,t];e=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};import{r as registerInstance,c as createEvent,f as forceUpdate,h,H as Host,g as getElement}from"./index-BuFKlV49.js";import{l as logger}from"./logger-CZkdJRkw.js";var alcTabsBaseCss="alc-tabs{display:block}.alc-tabs{border-width:1px;border-style:solid}.alc-tabs__tab-list{border-width:0px;border-bottom-width:1px;border-style:dotted}";var themeAlcTabsCss='alc-tabs{--bg-color:var(--alc-color-surface);--border-color:var(--alc-color-border);--border-width:var(--alc-border-width)}[data-alc-theme="light"] alc-tabs{--outline-color:var(--alc-color-action-60)}[data-alc-theme="dark"] alc-tabs{--outline-color:var(--alc-color-action-30)}';var AlcTabs=function(){function t(t){var r=this;registerInstance(this,t);this.alcChange=createEvent(this,"alc-change",7);this.selectedTabButton=null;this.tabList=null;this.selectedTab=null;this.hasScroll=false;this.onTabClicked=function(t){r.select(t.detail.tab)}}t.prototype.selectedChange=function(t,r){if(t!==r){this.select(t)}};t.prototype.select=function(t){return __awaiter(this,void 0,void 0,(function(){var r,i;return __generator(this,(function(n){r=getTab(this.tabs,t);if(!this.shouldSwitch(r)){return[2,false]}i=getTabButton(this.tabButtons,r.getAttribute("tab"));this.tabSwitch(r,i);this.selected=r.getAttribute("tab");return[2,true]}))}))};t.prototype.tabSwitch=function(t,r){var i=this.selectedTab;var n=this.selectedTabButton;this.selectedTab=t;this.selectedTabButton=r;t.selected=true;r.selected=true;if(i!==t){if(i){i.selected=false;this.alcChange.emit({tab:t.tab})}if(n){n.selected=false}}};t.prototype.selectedHandler=function(t){this.select(t.detail.tab)};t.prototype.selectedNextButton=function(t){this.onTabButtonNext(t)};t.prototype.selectedPreviousButton=function(t){this.onTabButtonPrevious(t)};t.prototype.selectedFirstButton=function(t){this.onTabButtonFirst(t)};t.prototype.selectedLastButton=function(t){this.onTabButtonLast(t)};t.prototype.shouldSwitch=function(t){var r=this.selectedTab;return t!==undefined&&t!==r};Object.defineProperty(t.prototype,"tabs",{get:function(){var t=this;var r=Array.from(this.el.querySelectorAll("alc-tab"));r=r.filter((function(r){return r.closest("alc-tabs")===t.el}));logger.log("my tabs are",r,this.el);return r},enumerable:false,configurable:true});Object.defineProperty(t.prototype,"tabButtons",{get:function(){var t=this;var r=Array.from(this.el.querySelectorAll("alc-tab-button"));r=r.filter((function(r){return r.closest("alc-tabs")===t.el}));return r},enumerable:false,configurable:true});t.prototype.getNextButton=function(t){var r;var i=this.tabButtons.findIndex((function(r){return r===t}));if(i===this.tabButtons.length-1){r=0}else{r=i+1}return this.tabButtons[r]};t.prototype.getPreviousButton=function(t){var r;var i=this.tabButtons.findIndex((function(r){return r===t}));if(i<=0){r=this.tabButtons.length-1}else{r=i-1}return this.tabButtons[r]};t.prototype.handleScroll=function(){var t=0;var r=this.tabList.offsetWidth;var i=this.tabList.style.overflowX;this.tabList.style.overflowX="auto";t=this.tabList.scrollWidth;this.tabList.style.overflowX=i;logger.log("width",r,t);this.hasScroll=t>r};t.prototype.themeLoadedHandler=function(){this.handleScroll()};t.prototype.componentDidLoad=function(){return __awaiter(this,void 0,void 0,(function(){var t,r,i;var n=this;return __generator(this,(function(e){switch(e.label){case 0:r=this.selected||((t=this.tabs[0])===null||t===void 0?void 0:t.tab);return[4,this.select(r)];case 1:e.sent();i=Array.from(this.el.querySelectorAll('[slot="button"]'));this.hasButtonSlot=i.some((function(t){return t.closest("alc-tabs")===n.el}));return[2]}}))}))};t.prototype.onTabButtonNext=function(t){return __awaiter(this,void 0,void 0,(function(){var r,i;return __generator(this,(function(n){if(!this.isValidTabButton(t))return[2];r=t.target;i=this.getNextButton(r);this.handleSelectTabButton(i);return[2]}))}))};t.prototype.onTabButtonPrevious=function(t){return __awaiter(this,void 0,void 0,(function(){var r,i;return __generator(this,(function(n){if(!this.isValidTabButton(t))return[2];r=t.target;i=this.getPreviousButton(r);this.handleSelectTabButton(i);return[2]}))}))};t.prototype.onTabButtonFirst=function(t){return __awaiter(this,void 0,void 0,(function(){var r;return __generator(this,(function(i){if(!this.isValidTabButton(t))return[2];r=this.tabButtons[0];this.handleSelectTabButton(r);return[2]}))}))};t.prototype.onTabButtonLast=function(t){return __awaiter(this,void 0,void 0,(function(){var r;return __generator(this,(function(i){if(!this.isValidTabButton(t))return[2];r=this.tabButtons[this.tabButtons.length-1];this.handleSelectTabButton(r);return[2]}))}))};t.prototype.handleSelectTabButton=function(t){return __awaiter(this,void 0,void 0,(function(){var r;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.select(t.tab)];case 1:r=i.sent();if(r){t.querySelector("button").focus()}return[2]}}))}))};t.prototype.isValidTabButton=function(t){var r=t.target;return Array.from(this.tabButtons).includes(r)};t.prototype.componentDidRender=function(){var t=this;var r;(r=this.mo)===null||r===void 0?void 0:r.disconnect();this.mo=new MutationObserver((function(){forceUpdate(t.el)}));this.mo.observe(this.el,{childList:true});this.mo.observe(this.el.querySelector(".alc-tabs"),{childList:true});this.tabs.map((function(r,i){var n=r.querySelector('[role="tabpanel"]');if(t.tabButtons.length<=i){return}var e=t.tabButtons[i].querySelector("button");if(!n.hasAttribute("id")){n.setAttribute("id","tab_".concat(i))}if(!e.hasAttribute("id")){e.setAttribute("id","button_".concat(i))}n.setAttribute("aria-labelledby",e.getAttribute("id"));e.setAttribute("aria-controls",n.getAttribute("id"))}))};t.prototype.disconnectedCallback=function(){var t;(t=this.mo)===null||t===void 0?void 0:t.disconnect()};t.prototype.render=function(){var t=this;var r;if(!this.hasButtonSlot){r=this.tabs.map((function(t){return h("alc-tab-button",{tab:t.tab},t.label)}))}logger.log("rendering",this.el,r);return h(Host,{onAlcTabButtonClick:this.onTabClicked,onAlcTabButtonNext:this.onTabButtonNext.bind(this),onAlcTabButtonPrevious:this.onTabButtonPrevious.bind(this)},h("div",{class:"alc-tabs"},h("alc-scroll-panel",{hasFocus:false,scrollToElement:this.selectedTabButton},h("div",{role:"tablist",ref:function(r){return t.tabList=r},class:"alc-tabs__tab-list"},h("slot",{name:"button"}),r)),h("slot",null)))};Object.defineProperty(t.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{selected:["selectedChange"]}},enumerable:false,configurable:true});return t}();var getTab=function(t,r){var i=typeof r==="string"?t.find((function(t){return t.tab===r})):r;if(!i){logger.error('tab with id: "'.concat(i,'" does not exist'))}return i};var getTabButton=function(t,r){var i=t.find((function(t){return t.tab===r}));if(!i){logger.error('tab button with id: "'.concat(i,'" does not exist'))}return i};AlcTabs.style={base:alcTabsBaseCss,theme:themeAlcTabsCss};export{AlcTabs as alc_tabs};
//# sourceMappingURL=alc-tabs.entry.js.map