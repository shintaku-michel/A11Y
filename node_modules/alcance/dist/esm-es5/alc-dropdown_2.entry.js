var __awaiter=this&&this.__awaiter||function(t,r,e,n){function i(t){return t instanceof e?t:new e((function(r){r(t)}))}return new(e||(e=Promise))((function(e,a){function o(t){try{c(n.next(t))}catch(t){a(t)}}function s(t){try{c(n["throw"](t))}catch(t){a(t)}}function c(t){t.done?e(t.value):i(t.value).then(o,s)}c((n=n.apply(t,r||[])).next())}))};var __generator=this&&this.__generator||function(t,r){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(t){return function(r){return c([t,r])}}function c(s){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,s[0]&&(e=0)),e)try{if(n=1,i&&(a=s[0]&2?i["return"]:s[0]?i["throw"]||((a=i["return"])&&a.call(i),0):i.next)&&!(a=a.call(i,s[1])).done)return a;if(i=0,a)s=[s[0]&2,a.value];switch(s[0]){case 0:case 1:a=s;break;case 4:e.label++;return{value:s[1],done:false};case 5:e.label++;i=s[1];s=[0];continue;case 7:s=e.ops.pop();e.trys.pop();continue;default:if(!(a=e.trys,a=a.length>0&&a[a.length-1])&&(s[0]===6||s[0]===2)){e=0;continue}if(s[0]===3&&(!a||s[1]>a[0]&&s[1]<a[3])){e.label=s[1];break}if(s[0]===6&&e.label<a[1]){e.label=a[1];a=s;break}if(a&&e.label<a[2]){e.label=a[2];e.ops.push(s);break}if(a[2])e.ops.pop();e.trys.pop();continue}s=r.call(t,e)}catch(t){s=[6,t];i=0}finally{n=a=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:true}}};import{r as registerInstance,c as createEvent,h,H as Host,g as getElement}from"./index-BuFKlV49.js";import{g as getFocusableElements}from"./keydown-CsSB10gC.js";import{g as getUniqueId}from"./getUniqueId-BY09qPiz.js";import{l as logger}from"./logger-CZkdJRkw.js";var alcDropdownCss='[data-alc-theme="dark"] alc-dropdown{--border-color:var(--alc-color-neutral-80)}[data-alc-theme="light"] alc-dropdown{--border-color:var(--alc-color-neutral-10)}alc-dropdown{position:relative;display:inline-block}.alc-dropdown__content{overflow:auto;background-color:var(--alc-color-surface-primary);border-radius:0.25rem;border-width:1px;border-color:var(--border-color);--tw-shadow-color:#000000;--tw-shadow:var(--tw-shadow-colored);--tw-drop-shadow:drop-shadow(0 4px 3px rgb(0 0 0 / 0.07)) drop-shadow(0 2px 2px rgb(0 0 0 / 0.06));-webkit-filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);max-height:inherit;}.alc-dropdown__content--opened{display:block}@-webkit-keyframes Scale{0%{opacity:0;-webkit-transform:scale(0.8);transform:scale(0.8)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@keyframes Scale{0%{opacity:0;-webkit-transform:scale(0.8);transform:scale(0.8)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}';var AlcDropdown=function(){function t(t){var r=this;registerInstance(this,t);this.alcShow=createEvent(this,"alc-show",7);this.alcAfterShow=createEvent(this,"alc-after-show",6);this.alcHide=createEvent(this,"alc-hide",7);this.alcAfterHide=createEvent(this,"alc-after-hide",6);this.hideOnEventsMap=new Map;this.open=false;this.hideOn="";this.handleAnchorClick=function(t){var e;if(!(t.target instanceof Node)){return}if((e=r.trigger)===null||e===void 0?void 0:e.contains(t.target)){r.toggleDropdown()}};this.toggleDropdown=function(){return __awaiter(r,void 0,void 0,(function(){return __generator(this,(function(t){this.open?this.hide():this.show();return[2]}))}))}}t.prototype.watchOpen=function(){if(this.trigger){this.handleTriggerAriaExpanded();this.handleTriggerTabindex()}};t.prototype.watchHideOn=function(){var t=this;this.hideOnEventsMap.forEach((function(r,e){t.content.removeEventListener(e,r);t.hideOnEventsMap.delete(e)}));this.addHideOnListeners()};t.prototype.handleKeydown=function(t){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(r){switch(r.label){case 0:if(!this.open)return[2];if(t.key!=="Escape")return[2];if(t.defaultPrevented)return[2];t.preventDefault();return[4,this.hide()];case 1:r.sent();this.handleTriggerFocus();return[2]}}))}))};t.prototype.show=function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){if(this.open){return[2,false]}t=this.alcShow.emit().defaultPrevented;if(t){return[2,false]}this.open=true;this.alcAfterShow.emit();return[2,true]}))}))};t.prototype.hide=function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(r){if(!this.open){return[2,false]}t=this.alcHide.emit().defaultPrevented;if(t){return[2,false]}this.open=false;this.alcAfterHide.emit();return[2,true]}))}))};t.prototype.handleTriggerFocus=function(){var t;(t=this.trigger)===null||t===void 0?void 0:t.focus()};t.prototype.handleContentFocus=function(){var t=getFocusableElements(this.content)[0];if(!t)return;if(t instanceof HTMLElement){t.focus()}};t.prototype.setTriggerAccessibility=function(){if(this.trigger.getAttribute("role")===null){this.trigger.setAttribute("role","button")}var t=this.content.firstElementChild;if(this.trigger.getAttribute("aria-haspopup")===null){var r=(t===null||t===void 0?void 0:t.role)==="menu"?"menu":"dialog";this.trigger.setAttribute("aria-haspopup",r)}var e=(t===null||t===void 0?void 0:t.id)?t.id:getUniqueId();if(!t){this.content.id=e}else{t.id=e}this.trigger.setAttribute("aria-controls",e)};t.prototype.handleTriggerAriaExpanded=function(){this.trigger.ariaExpanded="".concat(this.open)};t.prototype.handleTriggerTabindex=function(){this.trigger.tabIndex=this.open?-1:this.originalTriggerTabindex};t.prototype.handleFocusOut=function(t){return __awaiter(this,void 0,void 0,(function(){var r,e;return __generator(this,(function(n){switch(n.label){case 0:r=t.relatedTarget;e=r instanceof Node;if(e&&this.el.contains(r)){return[2]}return[4,this.hide()];case 1:n.sent();return[2]}}))}))};t.prototype.handleCloseOn=function(t){if(t.defaultPrevented){return}this.open=false};t.prototype.addHideOnListeners=function(){var t=this;var r=this.hideOn.trim();if(!r){return}var e=r.split(/\s+/);e.forEach((function(r){var e=function(r){return t.handleCloseOn(r)};t.hideOnEventsMap.set(r,e);t.content.addEventListener(r,e)}))};t.prototype.componentDidUpdate=function(){if(this.open){this.handleContentFocus()}};t.prototype.getTrigger=function(){var t=null;var r=null;t=this.el.querySelector('[slot="trigger"]');if(t){if(t.tagName==="BUTTON"||t.getAttribute("role")==="button"){r=t}else{r=t.querySelector('button, [role="button"]')}}if(r===null){logger.warn(this.el,"alc-dropdown não localizou um trigger válido. Slot deve ser ou conter um botão. Veja a documentação para mais detalhes.")}return r};t.prototype.componentDidLoad=function(){this.trigger=this.getTrigger();if(this.trigger){this.setTriggerAccessibility();this.handleTriggerAriaExpanded();this.originalTriggerTabindex=this.trigger.tabIndex}this.addHideOnListeners()};t.prototype.render=function(){var t=this;return h(Host,{key:"2a3cb9758c23c1f7f895322bffa6893a4680e1e8"},h("alc-popup",{key:"0c352d9d09c09df64e50c0561633120705875ef1",active:this.open,placement:"bottom-start",flip:true,shift:true,strategy:"fixed",onFocusout:this.handleFocusOut.bind(this),distance:2},h("div",{key:"6b60a206a5a326e53c1f3afed07b0e53b52c9832",slot:"anchor",onClick:this.handleAnchorClick},h("slot",{key:"528d7a27ebf5bdc884d89796d3aec84ae19e18e5",name:"trigger"})),h("div",{key:"2407874043bb9e9cabfaf9bc13751040f15f0c18",class:"alc-dropdown__content",ref:function(r){return t.content=r},tabindex:"-1"},h("slot",{key:"ecd68a468c536a351baa3c5eb75fad9fbd88c2b4"}))))};Object.defineProperty(t.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{open:["watchOpen"],hideOn:["watchHideOn"]}},enumerable:false,configurable:true});return t}();AlcDropdown.style=alcDropdownCss;var alcMenuCss=".alc-menu{display:block;padding-top:0.5rem;padding-bottom:0.5rem;background-color:var(--alc-color-surface-primary)}";var AlcMenu=function(){function t(t){var r=this;registerInstance(this,t);this.hasFocus=false;this.getListItems=function(){return Array.from(r.hostElement.querySelectorAll("[role^=menuitem]"))};this.includeFirstItemInTabNavigation=function(){r.items.forEach((function(t,r){t.setAttribute("tabindex",r===0?"0":"-1")}))};this.removeAllItemsFromTabNavigation=function(){r.items.forEach((function(t){return t.setAttribute("tabindex","-1")}))};this.setHasFocus=function(t){if(t===void 0){t=true}r.hasFocus=t;if(t){r.removeAllItemsFromTabNavigation()}else{r.includeFirstItemInTabNavigation()}}}t.prototype.refresh=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){this.items=this.getListItems();this.includeFirstItemInTabNavigation();return[2]}))}))};t.prototype.handleKeydown=function(t){if("ArrowDown"===t.key){t.preventDefault();this.handleFocusedItemIndex();return}if("ArrowUp"===t.key){t.preventDefault();this.handleFocusedItemIndex(-1);return}};t.prototype.handleAlcSelect=function(t){var r=this.items.findIndex((function(r){return r===t.target}));if(r===null)return;this.handleFocusItem(r)};t.prototype.handleFocusin=function(t){var r=t.target;if(this.hasFocus){return}if(this.hostElement.contains(r)){this.setHasFocus(true)}};t.prototype.handleFocusout=function(t){var r=t.relatedTarget;if(!this.hostElement.contains(r)){this.setHasFocus(false)}};t.prototype.handleFocusedItemIndex=function(t){if(t===void 0){t=1}var r=this.items.indexOf(document.activeElement);if(r===-1)return;var e=r+t;var n=this.items.length-1;if(e>n){e=0}if(e<0){e=n}this.handleFocusItem(e)};t.prototype.handleFocusItem=function(t){var r=this.items[t];if(r instanceof HTMLElement){r.focus()}};t.prototype.componentDidRender=function(){this.items=this.getListItems()};t.prototype.componentDidLoad=function(){this.includeFirstItemInTabNavigation()};t.prototype.render=function(){return h(Host,{key:"2aa137629ce5187b9191d9885a0b716d51ef4861",role:"menu",class:"alc-menu"},h("slot",{key:"6442d2320bb9c5b2f83859688fb464ac5ab903da"}))};Object.defineProperty(t.prototype,"hostElement",{get:function(){return getElement(this)},enumerable:false,configurable:true});return t}();AlcMenu.style=alcMenuCss;export{AlcDropdown as alc_dropdown,AlcMenu as alc_menu};
//# sourceMappingURL=alc-dropdown_2.entry.js.map