import{h as u,H as y,a as g,r as x}from"./index-BaYIEJQv.js";import{g as p}from"./getUniqueId-BY09qPiz-DUBCreeJ.js";import{l as f}from"./logger-CZkdJRkw-DxMv3nFn.js";var h=function(i,e,t,n){function l(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function o(s){try{r(n.next(s))}catch(v){c(v)}}function d(s){try{r(n.throw(s))}catch(v){c(v)}}function r(s){s.done?a(s.value):l(s.value).then(o,d)}r((n=n.apply(i,e||[])).next())})},_=function(i,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,l,a,c;return c={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function o(r){return function(s){return d([r,s])}}function d(r){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,r[0]&&(t=0)),t;)try{if(n=1,l&&(a=r[0]&2?l.return:r[0]?l.throw||((a=l.return)&&a.call(l),0):l.next)&&!(a=a.call(l,r[1])).done)return a;switch(l=0,a&&(r=[r[0]&2,a.value]),r[0]){case 0:case 1:a=r;break;case 4:return t.label++,{value:r[1],done:!1};case 5:t.label++,l=r[1],r=[0];continue;case 7:r=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(r[0]===6||r[0]===2)){t=0;continue}if(r[0]===3&&(!a||r[1]>a[0]&&r[1]<a[3])){t.label=r[1];break}if(r[0]===6&&t.label<a[1]){t.label=a[1],a=r;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(r);break}a[2]&&t.ops.pop(),t.trys.pop();continue}r=e.call(i,t)}catch(s){r=[6,s],l=0}finally{n=a=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};function m(i){return i?[].slice.call(i.childNodes).filter(function(e){return e.nodeType===Node.TEXT_NODE}).map(function(e){return e.nodeValue.trim()}).join(" "):""}function b(i,e){var t=document.createElement("alc-icon");return t.setAttribute("name",i),t.setAttribute("label",e||""),t}var w='alc-nav{display:block;--spacing-x:var(--alc-spacing-06);--border-width-selected:var(--alc-spacing-03);--border-color-selected:var(--alc-color-neutral-50);--padding-left-selected:calc(var(--spacing-x) - var(--border-width-selected))}[data-alc-theme="light"] alc-nav{--icon-color:var(--alc-color-neutral-50);--bg-color-selected:var(--alc-color-neutral-10)}[data-alc-theme="dark"] alc-nav{--icon-color:var(--alc-color-neutral-40);--bg-color-selected:var(--alc-color-neutral-90)}.alc-nav__panel{display:none}.alc-nav__panel--subpanel{padding-top:1rem;padding-bottom:1rem}.alc-nav__panel.is-open{display:block}.alc-nav__header{padding-top:1rem;padding-bottom:1rem;border-bottom-width:1px;border-color:var(--alc-color-neutral-40)}.alc-nav__main{padding-top:1rem;padding-bottom:1rem}.alc-nav__footer{padding-top:1rem;padding-bottom:1rem;border-top-width:1px;border-color:var(--alc-color-neutral-40)}.alc-nav__label-wrapper{margin-top:1.5rem;padding-left:var(--spacing-x);padding-right:var(--spacing-x)}.alc-nav__label{font-size:0.75rem;line-height:1rem;font-weight:700;text-transform:uppercase;letter-spacing:0.15rem;color:var(--alc-color-text-3)}.alc-nav__label:is([data-alc-theme="dark"] *){color:var(--alc-color-text-2)}.alc-nav__listview{margin-top:0.5rem}.alc-nav__listview--labelled{margin-top:1rem}.alc-nav__listitem{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;gap:0.5rem}.alc-nav__text{width:100%;padding-left:var(--spacing-x);padding-right:var(--spacing-x);padding-top:1rem;padding-bottom:1rem;color:var(--alc-color-link-text)}.alc-nav__text:hover{color:var(--alc-color-text-2)}.alc-nav__text:hover:is([data-alc-theme="dark"] *){color:var(--alc-color-text-0)}.alc-nav__text:hover{background-color:var(--alc-color-neutral-5)}.alc-nav__text:hover:is([data-alc-theme="dark"] *){background-color:var(--alc-color-neutral-80)}.alc-nav__listitem.is-selected .alc-nav__text{border-left-color:var(--border-color-selected);background-color:var(--bg-color-selected);padding-left:var(--padding-left-selected);border-left-width:var(--border-width-selected)}.alc-nav__listitem.is-selected .alc-nav__text:hover{background-color:var(--alc-color-neutral-5)}.alc-nav__listitem.is-selected .alc-nav__text:hover:is([data-alc-theme="dark"] *){background-color:var(--alc-color-neutral-80)}.alc-nav__navbar{margin-left:var(--spacing-x);margin-right:var(--spacing-x);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.alc-nav__navbar-title{-ms-flex-positive:1;flex-grow:1;text-align:center;font-weight:500;text-transform:uppercase;color:var(--alc-color-text-3)}.alc-nav__navbar-title:is([data-alc-theme="dark"] *){color:var(--alc-color-text-0)}.alc-nav__button--next{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;gap:0.5rem}.alc-nav__icon--next{color:var(--icon-color)}.alc-nav__icon--prev{font-size:2rem;line-height:2.5rem;color:var(--alc-color-link-text)}',L=function(){function i(e){x(this,e)}return i.prototype.openPanel=function(e){if(e){f.debug("open",{panel:e}),e=e.closest(".alc-nav__panel");var t=Array.from(this.panels.children).filter(function(o){return o.matches(".is-open")})[0];e.matches(".alc-nav__panel--parent")&&t&&t.classList.add("alc-nav__panel--highest");var n=["is-open","mm-panel--parent"],l=[];Array.from(this.panels.children).filter(function(o){return o.matches(".alc-nav__panel")}).forEach(function(o){var d,r;(d=o.classList).add.apply(d,l),(r=o.classList).remove.apply(r,n),o!==t&&o.classList.remove("alc-nav__panel--highest"),o===e?o.removeAttribute("inert"):o.setAttribute("inert","true")}),e.classList.add("is-open");for(var a=this.panels.querySelector("#".concat(e.dataset.alcParent));a;)a=a.closest(".alc-nav__panel"),a.classList.add("alc-nav__panel--parent"),a=this.panels.querySelector("#".concat(a.dataset.alcParent));this.focusableItems=Array.from(this.el.querySelectorAll(".alc-nav__panel.is-open .alc-nav__listview a")),this.focusableItems[0].focus();var c=Array.from(this.el.querySelectorAll(".alc-nav__panel.is-open .alc-nav__listitem"));c.forEach(function(o){o.id===(t==null?void 0:t.dataset.alcParent)&&(f.debug("focus on",o,o.id),o.querySelector("a").focus())})}},i.prototype.closePanel=function(e){f.debug("close",{panel:e})},i.prototype.togglePanel=function(e){return h(this,void 0,void 0,function(){var t;return _(this,function(n){return t=e.parentElement,t.classList.contains("is-open")?(f.debug("will close",e),this.closePanel(e)):(f.debug("will open",e),this.openPanel(e)),[2]})})},i.prototype.setSelectedItem=function(e){return h(this,void 0,void 0,function(){return _(this,function(t){return this.el.querySelectorAll(".alc-nav__listitem.is-selected").forEach(function(n){n.classList.remove("is-selected"),n.removeAttribute("data-alc-selected")}),e&&(e.classList.add("is-selected"),e.setAttribute("data-alc-selected","true")),[2]})})},i.prototype.setSelected=function(e){this.menu.querySelectorAll(".alc-nav__listitem--selected").forEach(function(t){t.classList.remove("alc-nav__listitem--selected")}),e.classList.add("alc-nav__listitem--selected")},i.prototype.initMenu=function(){var e=this;this.menu.id=this.menu.id||p();var t=Array.from(this.menu.children).filter(function(n){return n.matches("[data-alc-panel]")});f.debug({panels:t}),this.panels=document.createElement("div"),this.panels.classList.add("alc-nav__panels"),this.menu.append(this.panels),t.forEach(function(n){e.initPanel(n)})},i.prototype.initPanels=function(){var e=this;this.menu.addEventListener("click",function(t){var n,l,a=((l=(n=t.target)===null||n===void 0?void 0:n.closest("a[href]"))===null||l===void 0?void 0:l.getAttribute("href"))||"";if(a.slice(0,1)==="#")try{var c=e.el.querySelector(a);c&&(t.preventDefault(),e.togglePanel(c))}catch{}},{capture:!0})},i.prototype.initPanel=function(e){var t=this,n,l;if(!e.matches(".alc-nav__panel"))return f.debug({panel:e}),e.id=e.id||p(),e.classList.add("alc-nav__panel"),this.panels.append(e),this.initNavbar(e),Array.from(e.children).filter(function(a){return a.matches("ol, ul")}).forEach(function(a){t.initListview(a)}),Array.from(this.main.children).filter(function(a){return a.matches("ol, ul")}).forEach(function(a){t.initListview(a)}),!((n=this.header)===null||n===void 0)&&n.children&&Array.from(this.header.children).filter(function(a){return a.matches("ol, ul")}).forEach(function(a){t.initListview(a)}),!((l=this.footer)===null||l===void 0)&&l.children&&Array.from(this.footer.children).filter(function(a){return a.matches("ol, ul")}).forEach(function(a){t.initListview(a)}),e},i.prototype.initNavbar=function(e){if(!Array.from(e.children).some(function(v){return v.matches(".alc-nav__navbar")})){var t=null,n=null;if(e.dataset.alcParent)for(t=this.panels.querySelector("#".concat(e.dataset.alcParent)),n=t.closest(".alc-nav__panel");n.closest(".alc-nav__listitem");)n=n.parentElement.closest(".alc-nav__panel");var l=document.createElement("div");if(l.classList.add("alc-nav__navbar"),n){var a=document.createElement("a");a.classList.add("alc-nav__button","alc-nav__button--prev");var c=m(n.querySelector(".alc-nav__navbar-title")),o=c?"Voltar para ".concat(c):"Voltar para navegação principal",d=b("arrow-left-short",o);d.classList.add("alc-nav__icon--prev"),a.href="#".concat(n.id),a.append(d),l.append(a)}else return;var r=null;t?r=Array.from(t.children).filter(function(v){return v.matches(".alc-nav__text")})[0]:n&&(r=n.querySelector("a[href=#".concat(e.id,"]")));var s=document.createElement("span");s.classList.add("alc-nav__navbar-title"),s.innerHTML=m(r)||"",e.prepend(l),l.append(s)}},i.prototype.initListview=function(e){var t=this;if(!e.matches(".alc-nav__listview")){e.classList.add("alc-nav__listview");var n=e.previousElementSibling,l=n?"alcLabel"in n.dataset:!1;if(l){e.classList.add("alc-nav__listview--labelled");var a=document.createElement("div");a.classList.add("alc-nav__label-wrapper"),e.parentElement.insertBefore(a,n),a.insertBefore(n,null),n.classList.add("alc-nav__label"),n.id=n.id||p(),e.setAttribute("aria-labelledby",n.id)}Array.from(e.children).forEach(function(c){t.initListitem(c)})}},i.prototype.initListitem=function(e){var t=this;e.matches(".alc-nav__listitem")||(e.classList.add("alc-nav__listitem"),e.hasAttribute("data-alc-selected")&&e.classList.add("is-selected"),Array.from(e.children).filter(function(n){return n.matches("a, span")}).forEach(function(n){return n.classList.add("alc-nav__text")}),Array.from(e.children).filter(function(n){return n.matches("[data-alc-panel]")}).forEach(function(n){return t.initSubPanel(n)}))},i.prototype.initSubPanel=function(e){if(!e.matches(".alc-nav__panel")){var t=e.parentElement;t.id=t.id||p(),e.id=e.id||p(),t.dataset.alcChild=e.id,e.dataset.alcParent=t.id,e.role="dialog",e.setAttribute("aria-labelledby",t.id),e.classList.add("alc-nav__panel--subpanel");var n=Array.from(t.children).filter(function(a){return a.matches(".alc-nav__button")})[0];n||(n=document.createElement("a"),n.classList.add("alc-nav__button","alc-nav__button--next"),n.setAttribute("aria-expanded","false"));var l=b("chevron-right");l.setAttribute("aria-hidden","true"),l.classList.add("alc-nav__icon--next"),Array.from(t.children).filter(function(a){return a.matches("a, span")}).forEach(function(a){a.matches("span")?(n.classList.add("alc-nav__text"),n.innerHTML=a.innerHTML,t.insertBefore(n,a.nextElementSibling),a.remove()):t.insertBefore(n,a.nextElementSibling)}),n.href="#".concat(e.id),n.append(l),this.initPanel(e)}},i.prototype.initOpened=function(){var e=this.panels.querySelector(".alc-nav__listitem--selected"),t=this.panels.querySelector(".alc-nav__panel");e&&(this.setSelected(e),t=e.closest(".alc-nav__panel"));var n=this.el.querySelector(".alc-nav__listitem[data-alc-selected]");n&&this.setSelectedItem(n),this.openPanel(t)},i.prototype.observeNavLinks=function(){var e=Array.from(this.el.querySelectorAll(".alc-nav__listview a, .alc-nav__listview router-link"));e.forEach(function(t){var n=new MutationObserver(function(l){l.forEach(function(a){a.attributeName==="class"&&(t.classList.contains("alc-nav__text")||t.classList.add("alc-nav__text"))})});n.observe(t,{attributes:!0,attributeFilter:["class"]})})},i.prototype.componentDidLoad=function(){this.isMobile=window.innerWidth<768,this.emitNavContent(this.isMobile)},i.prototype.componentDidRender=function(){this.initMenu(),this.initPanels(),this.initOpened(),this.focusableItems=Array.from(this.el.querySelectorAll(".alc-nav__panel.is-open .alc-nav__listview a")),this.observeNavLinks()},i.prototype.componentWillLoad=function(){this.header=this.el.querySelector("[slot='header']"),this.footer=this.el.querySelector("[slot='footer']")},i.prototype.handleWindowResize=function(){var e=window.innerWidth<768;e!==this.isMobile&&(this.isMobile=e,this.emitNavContent(this.isMobile))},i.prototype.emitNavContent=function(e){this.el.dispatchEvent(new CustomEvent("alc-nav-content",{detail:{navEl:this.el,isMobile:e},bubbles:!0,composed:!0}))},i.prototype.handleKeyDown=function(e){var t=Array.from(this.panels.children).filter(function(a){return a.matches(".is-open")})[0],n=t==null?void 0:t.hasAttribute("data-alc-parent");if(e.key==="Escape"&&n){var l=t.querySelector(".alc-nav__button--prev");l&&l.click(),e.preventDefault()}},i.prototype.render=function(){var e=this;return u(y,{key:"4869774167e9dd1f9b2b7e21a8c164c331086398",class:{"alc-nav":!0,"alc-nav__wrapper":!0}},u("nav",{key:"66fdea76c8704b5630205260fdf370f3c3d47ad0",ref:function(t){return e.menu=t},class:"alc-nav__menu"},u("div",{key:"ea80376803eb2b26bea0d0f827892146be384b4d","data-alc-panel":!0},this.header?u("div",{class:"alc-nav__header"},u("slot",{name:"header"})):null,u("div",{key:"dced630d3b584b25efb5f69b78d60baad2ccc21c",class:"alc-nav__main",ref:function(t){return e.main=t}},u("slot",{key:"1be8b67e85921d8315102090094416ab9d333ce8"})),this.footer?u("div",{class:"alc-nav__footer"},u("slot",{name:"footer"})):null)))},Object.defineProperty(i.prototype,"el",{get:function(){return g(this)},enumerable:!1,configurable:!0}),i}();L.style=w;export{L as alc_nav};
