import{f as v,h as l,H as y,a as B,r as g,b as T}from"./index-CUfYByJr.js";import{l as f}from"./logger-CZkdJRkw-BWKPWGb0.js";var c=function(i,e,t,n){function a(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function h(u){try{o(n.next(u))}catch(p){s(p)}}function d(u){try{o(n.throw(u))}catch(p){s(p)}}function o(u){u.done?r(u.value):a(u.value).then(h,d)}o((n=n.apply(i,e||[])).next())})},b=function(i,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},n,a,r,s;return s={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function h(o){return function(u){return d([o,u])}}function d(o){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(t=0)),t;)try{if(n=1,a&&(r=o[0]&2?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[o[0]&2,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,a=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!r||o[1]>r[0]&&o[1]<r[3])){t.label=o[1];break}if(o[0]===6&&t.label<r[1]){t.label=r[1],r=o;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(o);break}r[2]&&t.ops.pop(),t.trys.pop();continue}o=e.call(i,t)}catch(u){o=[6,u],a=0}finally{n=r=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},m="alc-tabs{display:block}.alc-tabs{border-width:1px;border-style:solid}.alc-tabs__tab-list{border-width:0px;border-bottom-width:1px;border-style:dotted}",w='alc-tabs{--bg-color:var(--alc-color-surface);--border-color:var(--alc-color-border);--border-width:var(--alc-border-width)}[data-alc-theme="light"] alc-tabs{--outline-color:var(--alc-color-action-60)}[data-alc-theme="dark"] alc-tabs{--outline-color:var(--alc-color-action-30)}',S=function(){function i(e){var t=this;g(this,e),this.alcChange=T(this,"alc-change",7),this.selectedTabButton=null,this.tabList=null,this.selectedTab=null,this.hasScroll=!1,this.onTabClicked=function(n){t.select(n.detail.tab)}}return i.prototype.selectedChange=function(e,t){e!==t&&this.select(e)},i.prototype.select=function(e){return c(this,void 0,void 0,function(){var t,n;return b(this,function(a){return t=A(this.tabs,e),this.shouldSwitch(t)?(n=x(this.tabButtons,t.getAttribute("tab")),this.tabSwitch(t,n),this.selected=t.getAttribute("tab"),[2,!0]):[2,!1]})})},i.prototype.tabSwitch=function(e,t){var n=this.selectedTab,a=this.selectedTabButton;this.selectedTab=e,this.selectedTabButton=t,e.selected=!0,t.selected=!0,n!==e&&(n&&(n.selected=!1,this.alcChange.emit({tab:e.tab})),a&&(a.selected=!1))},i.prototype.selectedHandler=function(e){this.select(e.detail.tab)},i.prototype.selectedNextButton=function(e){this.onTabButtonNext(e)},i.prototype.selectedPreviousButton=function(e){this.onTabButtonPrevious(e)},i.prototype.selectedFirstButton=function(e){this.onTabButtonFirst(e)},i.prototype.selectedLastButton=function(e){this.onTabButtonLast(e)},i.prototype.shouldSwitch=function(e){var t=this.selectedTab;return e!==void 0&&e!==t},Object.defineProperty(i.prototype,"tabs",{get:function(){var e=this,t=Array.from(this.el.querySelectorAll("alc-tab"));return t=t.filter(function(n){return n.closest("alc-tabs")===e.el}),f.log("my tabs are",t,this.el),t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tabButtons",{get:function(){var e=this,t=Array.from(this.el.querySelectorAll("alc-tab-button"));return t=t.filter(function(n){return n.closest("alc-tabs")===e.el}),t},enumerable:!1,configurable:!0}),i.prototype.getNextButton=function(e){var t,n=this.tabButtons.findIndex(function(a){return a===e});return n===this.tabButtons.length-1?t=0:t=n+1,this.tabButtons[t]},i.prototype.getPreviousButton=function(e){var t,n=this.tabButtons.findIndex(function(a){return a===e});return n<=0?t=this.tabButtons.length-1:t=n-1,this.tabButtons[t]},i.prototype.handleScroll=function(){var e=0,t=this.tabList.offsetWidth,n=this.tabList.style.overflowX;this.tabList.style.overflowX="auto",e=this.tabList.scrollWidth,this.tabList.style.overflowX=n,f.log("width",t,e),this.hasScroll=e>t},i.prototype.themeLoadedHandler=function(){this.handleScroll()},i.prototype.componentDidLoad=function(){return c(this,void 0,void 0,function(){var e,t,n,a=this;return b(this,function(r){switch(r.label){case 0:return t=this.selected||((e=this.tabs[0])===null||e===void 0?void 0:e.tab),[4,this.select(t)];case 1:return r.sent(),n=Array.from(this.el.querySelectorAll('[slot="button"]')),this.hasButtonSlot=n.some(function(s){return s.closest("alc-tabs")===a.el}),[2]}})})},i.prototype.onTabButtonNext=function(e){return c(this,void 0,void 0,function(){var t,n;return b(this,function(a){return this.isValidTabButton(e)?(t=e.target,n=this.getNextButton(t),this.handleSelectTabButton(n),[2]):[2]})})},i.prototype.onTabButtonPrevious=function(e){return c(this,void 0,void 0,function(){var t,n;return b(this,function(a){return this.isValidTabButton(e)?(t=e.target,n=this.getPreviousButton(t),this.handleSelectTabButton(n),[2]):[2]})})},i.prototype.onTabButtonFirst=function(e){return c(this,void 0,void 0,function(){var t;return b(this,function(n){return this.isValidTabButton(e)?(t=this.tabButtons[0],this.handleSelectTabButton(t),[2]):[2]})})},i.prototype.onTabButtonLast=function(e){return c(this,void 0,void 0,function(){var t;return b(this,function(n){return this.isValidTabButton(e)?(t=this.tabButtons[this.tabButtons.length-1],this.handleSelectTabButton(t),[2]):[2]})})},i.prototype.handleSelectTabButton=function(e){return c(this,void 0,void 0,function(){var t;return b(this,function(n){switch(n.label){case 0:return[4,this.select(e.tab)];case 1:return t=n.sent(),t&&e.querySelector("button").focus(),[2]}})})},i.prototype.isValidTabButton=function(e){var t=e.target;return Array.from(this.tabButtons).includes(t)},i.prototype.componentDidRender=function(){var e=this,t;(t=this.mo)===null||t===void 0||t.disconnect(),this.mo=new MutationObserver(function(){v(e.el)}),this.mo.observe(this.el,{childList:!0}),this.mo.observe(this.el.querySelector(".alc-tabs"),{childList:!0}),this.tabs.map(function(n,a){var r=n.querySelector('[role="tabpanel"]');if(!(e.tabButtons.length<=a)){var s=e.tabButtons[a].querySelector("button");r.hasAttribute("id")||r.setAttribute("id","tab_".concat(a)),s.hasAttribute("id")||s.setAttribute("id","button_".concat(a)),r.setAttribute("aria-labelledby",s.getAttribute("id")),s.setAttribute("aria-controls",r.getAttribute("id"))}})},i.prototype.disconnectedCallback=function(){var e;(e=this.mo)===null||e===void 0||e.disconnect()},i.prototype.render=function(){var e=this,t;return this.hasButtonSlot||(t=this.tabs.map(function(n){return l("alc-tab-button",{tab:n.tab},n.label)})),f.log("rendering",this.el,t),l(y,{onAlcTabButtonClick:this.onTabClicked,onAlcTabButtonNext:this.onTabButtonNext.bind(this),onAlcTabButtonPrevious:this.onTabButtonPrevious.bind(this)},l("div",{class:"alc-tabs"},l("alc-scroll-panel",{hasFocus:!1,scrollToElement:this.selectedTabButton},l("div",{role:"tablist",ref:function(n){return e.tabList=n},class:"alc-tabs__tab-list"},l("slot",{name:"button"}),t)),l("slot",null)))},Object.defineProperty(i.prototype,"el",{get:function(){return B(this)},enumerable:!1,configurable:!0}),Object.defineProperty(i,"watchers",{get:function(){return{selected:["selectedChange"]}},enumerable:!1,configurable:!0}),i}(),A=function(i,e){var t=typeof e=="string"?i.find(function(n){return n.tab===e}):e;return t||f.error('tab with id: "'.concat(t,'" does not exist')),t},x=function(i,e){var t=i.find(function(n){return n.tab===e});return t||f.error('tab button with id: "'.concat(t,'" does not exist')),t};S.style={base:m,theme:w};export{S as alc_tabs};
