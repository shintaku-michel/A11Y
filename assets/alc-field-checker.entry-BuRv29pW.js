import{h as i,a as o,r as s}from"./index-DEDX6sec.js";import{g as n}from"./getUniqueId-BY09qPiz-DUBCreeJ.js";var d=".alc-field-checker{display:block}",u=function(){function l(e){var r=this;s(this,e),this.idAlert=null,this.errorFields=[],this.checkOnSubmit=!1,this.handleFormSubmit=function(t){r.checkAlcFields(),r.errorFields.length>0&&t.preventDefault()}}return l.prototype.componentWillLoad=function(){this.idAlert=n()},l.prototype.componentDidLoad=function(){var e=this;if(this.checkOnSubmit){var t=this.hostElement.querySelector("form");t&&t.addEventListener("submit",this.handleFormSubmit)}else{this.checkAlcFields(),this.observer=new MutationObserver(function(){return e.checkAlcFields()});var r=this.hostElement.querySelectorAll("alc-field, alc-fieldset, alc-checkbox, alc-radio");r.forEach(function(c){return e.observer.observe(c,{attributes:!0,childList:!0,subtree:!0})})}},l.prototype.disconnectedCallback=function(){var e;(e=this.observer)===null||e===void 0||e.disconnect()},l.prototype.getFieldId=function(e){var r=e.querySelector("input, textarea, select");return r?r.getAttribute("id"):""},l.prototype.isChildOfFieldset=function(e){return e.closest("alc-fieldset")!==null},l.prototype.getLabelText=function(e){var r=e.querySelector("label");return r?r.textContent.trim():""},l.prototype.checkAlcFields=function(){var e=this,r=Array.from(this.hostElement.querySelectorAll("alc-field, alc-fieldset, alc-checkbox, alc-radio")).filter(function(t){return t.tagName.toLowerCase()==="alc-checkbox"||t.tagName.toLowerCase()==="alc-radio"?!e.isChildOfFieldset(t):!0});this.errorFields=r.filter(function(t){return t.hasAttribute("error-msg")&&t.getAttribute("error-msg")!==""}).map(function(t){var c=t.tagName.toLowerCase()==="alc-checkbox"||t.tagName.toLowerCase()==="alc-radio",a=t.tagName.toLowerCase()==="alc-fieldset";return{id:e.getFieldId(t),label:c?e.getLabelText(t):a?t.getAttribute("legend"):t.getAttribute("label"),errorMsg:t.getAttribute("error-msg")}})},l.prototype.render=function(){return i("div",{key:"0a9dfd4e96e62c36ef0cc1b9a3a82b943e0bfd9c",class:"alc-field-checker"},this.errorFields.length>0&&i("alc-alert",{key:"65030b9165d9c7909cafc0b22a5a1b456e27c768",id:this.idAlert,type:"warning",dismissible:!1},i("span",{key:"9db85f42ff4ea2ec8103cc501e5a602e1a592e04",class:"alc-alert__summary"},"Atenção: Seu formulário contém ",this.errorFields.length," ",this.errorFields.length>1?"erros":"erro"),i("ul",{key:"c724032a1d6eaa5a0cea7cef9f40d3d8be0069f3"},this.errorFields.map(function(e){return i("li",null,i("a",{href:"#".concat(e.id),class:"alc-link alc-link--color-text"},i("strong",null,e.label,":")," ",e.errorMsg))}))),i("slot",{key:"72e09b858f27172b05f0df38c8c6f9dca12a0ae6"}))},Object.defineProperty(l.prototype,"hostElement",{get:function(){return o(this)},enumerable:!1,configurable:!0}),l}();u.style=d;export{u as alc_field_checker};
