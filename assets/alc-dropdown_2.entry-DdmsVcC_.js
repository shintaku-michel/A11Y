import{h as u,H as v,a as b,r as m,b as f}from"./index-LoHcnw1D.js";import{g as w}from"./keydown-CsSB10gC-D2PGJPdm.js";import{g as y}from"./getUniqueId-BY09qPiz-DUBCreeJ.js";import{l as k}from"./logger-CZkdJRkw-MPb1Or3y.js";var l=function(n,t,e,r){function a(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function h(c){try{o(r.next(c))}catch(g){s(g)}}function p(c){try{o(r.throw(c))}catch(g){s(g)}}function o(c){c.done?i(c.value):a(c.value).then(h,p)}o((r=r.apply(n,t||[])).next())})},d=function(n,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,s;return s={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function h(o){return function(c){return p([o,c])}}function p(o){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(e=0)),e;)try{if(r=1,a&&(i=o[0]&2?a.return:o[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,o[1])).done)return i;switch(a=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return e.label++,{value:o[1],done:!1};case 5:e.label++,a=o[1],o=[0];continue;case 7:o=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){e=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){e.label=o[1];break}if(o[0]===6&&e.label<i[1]){e.label=i[1],i=o;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(o);break}i[2]&&e.ops.pop(),e.trys.pop();continue}o=t.call(n,e)}catch(c){o=[6,c],a=0}finally{r=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},x='[data-alc-theme="dark"] alc-dropdown{--border-color:var(--alc-color-neutral-80)}[data-alc-theme="light"] alc-dropdown{--border-color:var(--alc-color-neutral-10)}alc-dropdown{position:relative;display:inline-block}.alc-dropdown__content{overflow:auto;background-color:var(--alc-color-surface-primary);border-radius:0.25rem;border-width:1px;border-color:var(--border-color);--tw-shadow-color:#000000;--tw-shadow:var(--tw-shadow-colored);--tw-drop-shadow:drop-shadow(0 4px 3px rgb(0 0 0 / 0.07)) drop-shadow(0 2px 2px rgb(0 0 0 / 0.06));-webkit-filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);max-height:inherit;}.alc-dropdown__content--opened{display:block}@-webkit-keyframes Scale{0%{opacity:0;-webkit-transform:scale(0.8);transform:scale(0.8)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@keyframes Scale{0%{opacity:0;-webkit-transform:scale(0.8);transform:scale(0.8)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}',T=function(){function n(t){var e=this;m(this,t),this.alcShow=f(this,"alc-show",7),this.alcAfterShow=f(this,"alc-after-show",6),this.alcHide=f(this,"alc-hide",7),this.alcAfterHide=f(this,"alc-after-hide",6),this.hideOnEventsMap=new Map,this.open=!1,this.hideOn="",this.handleAnchorClick=function(r){var a;r.target instanceof Node&&!((a=e.trigger)===null||a===void 0)&&a.contains(r.target)&&e.toggleDropdown()},this.toggleDropdown=function(){return l(e,void 0,void 0,function(){return d(this,function(r){return this.open?this.hide():this.show(),[2]})})}}return n.prototype.watchOpen=function(){this.trigger&&(this.handleTriggerAriaExpanded(),this.handleTriggerTabindex())},n.prototype.watchHideOn=function(){var t=this;this.hideOnEventsMap.forEach(function(e,r){t.content.removeEventListener(r,e),t.hideOnEventsMap.delete(r)}),this.addHideOnListeners()},n.prototype.handleKeydown=function(t){return l(this,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return this.open?t.key!=="Escape"?[2]:t.defaultPrevented?[2]:(t.preventDefault(),[4,this.hide()]):[2];case 1:return e.sent(),this.handleTriggerFocus(),[2]}})})},n.prototype.show=function(){return l(this,void 0,void 0,function(){var t;return d(this,function(e){return this.open?[2,!1]:(t=this.alcShow.emit().defaultPrevented,t?[2,!1]:(this.open=!0,this.alcAfterShow.emit(),[2,!0]))})})},n.prototype.hide=function(){return l(this,void 0,void 0,function(){var t;return d(this,function(e){return this.open?(t=this.alcHide.emit().defaultPrevented,t?[2,!1]:(this.open=!1,this.alcAfterHide.emit(),[2,!0])):[2,!1]})})},n.prototype.handleTriggerFocus=function(){var t;(t=this.trigger)===null||t===void 0||t.focus()},n.prototype.handleContentFocus=function(){var t=w(this.content)[0];t&&t instanceof HTMLElement&&t.focus()},n.prototype.setTriggerAccessibility=function(){this.trigger.getAttribute("role")===null&&this.trigger.setAttribute("role","button");var t=this.content.firstElementChild;if(this.trigger.getAttribute("aria-haspopup")===null){var e=(t==null?void 0:t.role)==="menu"?"menu":"dialog";this.trigger.setAttribute("aria-haspopup",e)}var r=t!=null&&t.id?t.id:y();t?t.id=r:this.content.id=r,this.trigger.setAttribute("aria-controls",r)},n.prototype.handleTriggerAriaExpanded=function(){this.trigger.ariaExpanded="".concat(this.open)},n.prototype.handleTriggerTabindex=function(){this.trigger.tabIndex=this.open?-1:this.originalTriggerTabindex},n.prototype.handleFocusOut=function(t){return l(this,void 0,void 0,function(){var e,r;return d(this,function(a){switch(a.label){case 0:return e=t.relatedTarget,r=e instanceof Node,r&&this.el.contains(e)?[2]:[4,this.hide()];case 1:return a.sent(),[2]}})})},n.prototype.handleCloseOn=function(t){t.defaultPrevented||(this.open=!1)},n.prototype.addHideOnListeners=function(){var t=this,e=this.hideOn.trim();if(e){var r=e.split(/\s+/);r.forEach(function(a){var i=function(s){return t.handleCloseOn(s)};t.hideOnEventsMap.set(a,i),t.content.addEventListener(a,i)})}},n.prototype.componentDidUpdate=function(){this.open&&this.handleContentFocus()},n.prototype.getTrigger=function(){var t=null,e=null;return t=this.el.querySelector('[slot="trigger"]'),t&&(t.tagName==="BUTTON"||t.getAttribute("role")==="button"?e=t:e=t.querySelector('button, [role="button"]')),e===null&&k.warn(this.el,"alc-dropdown não localizou um trigger válido. Slot deve ser ou conter um botão. Veja a documentação para mais detalhes."),e},n.prototype.componentDidLoad=function(){this.trigger=this.getTrigger(),this.trigger&&(this.setTriggerAccessibility(),this.handleTriggerAriaExpanded(),this.originalTriggerTabindex=this.trigger.tabIndex),this.addHideOnListeners()},n.prototype.render=function(){var t=this;return u(v,{key:"2a3cb9758c23c1f7f895322bffa6893a4680e1e8"},u("alc-popup",{key:"0c352d9d09c09df64e50c0561633120705875ef1",active:this.open,placement:"bottom-start",flip:!0,shift:!0,strategy:"fixed",onFocusout:this.handleFocusOut.bind(this),distance:2},u("div",{key:"6b60a206a5a326e53c1f3afed07b0e53b52c9832",slot:"anchor",onClick:this.handleAnchorClick},u("slot",{key:"528d7a27ebf5bdc884d89796d3aec84ae19e18e5",name:"trigger"})),u("div",{key:"2407874043bb9e9cabfaf9bc13751040f15f0c18",class:"alc-dropdown__content",ref:function(e){return t.content=e},tabindex:"-1"},u("slot",{key:"ecd68a468c536a351baa3c5eb75fad9fbd88c2b4"}))))},Object.defineProperty(n.prototype,"el",{get:function(){return b(this)},enumerable:!1,configurable:!0}),Object.defineProperty(n,"watchers",{get:function(){return{open:["watchOpen"],hideOn:["watchHideOn"]}},enumerable:!1,configurable:!0}),n}();T.style=x;var A=".alc-menu{display:block;padding-top:0.5rem;padding-bottom:0.5rem;background-color:var(--alc-color-surface-primary)}",F=function(){function n(t){var e=this;m(this,t),this.hasFocus=!1,this.getListItems=function(){return Array.from(e.hostElement.querySelectorAll("[role^=menuitem]"))},this.includeFirstItemInTabNavigation=function(){e.items.forEach(function(r,a){r.setAttribute("tabindex",a===0?"0":"-1")})},this.removeAllItemsFromTabNavigation=function(){e.items.forEach(function(r){return r.setAttribute("tabindex","-1")})},this.setHasFocus=function(r){r===void 0&&(r=!0),e.hasFocus=r,r?e.removeAllItemsFromTabNavigation():e.includeFirstItemInTabNavigation()}}return n.prototype.refresh=function(){return l(this,void 0,void 0,function(){return d(this,function(t){return this.items=this.getListItems(),this.includeFirstItemInTabNavigation(),[2]})})},n.prototype.handleKeydown=function(t){if(t.key==="ArrowDown"){t.preventDefault(),this.handleFocusedItemIndex();return}if(t.key==="ArrowUp"){t.preventDefault(),this.handleFocusedItemIndex(-1);return}},n.prototype.handleAlcSelect=function(t){var e=this.items.findIndex(function(r){return r===t.target});e!==null&&this.handleFocusItem(e)},n.prototype.handleFocusin=function(t){var e=t.target;this.hasFocus||this.hostElement.contains(e)&&this.setHasFocus(!0)},n.prototype.handleFocusout=function(t){var e=t.relatedTarget;this.hostElement.contains(e)||this.setHasFocus(!1)},n.prototype.handleFocusedItemIndex=function(t){t===void 0&&(t=1);var e=this.items.indexOf(document.activeElement);if(e!==-1){var r=e+t,a=this.items.length-1;r>a&&(r=0),r<0&&(r=a),this.handleFocusItem(r)}},n.prototype.handleFocusItem=function(t){var e=this.items[t];e instanceof HTMLElement&&e.focus()},n.prototype.componentDidRender=function(){this.items=this.getListItems()},n.prototype.componentDidLoad=function(){this.includeFirstItemInTabNavigation()},n.prototype.render=function(){return u(v,{key:"2aa137629ce5187b9191d9885a0b716d51ef4861",role:"menu",class:"alc-menu"},u("slot",{key:"6442d2320bb9c5b2f83859688fb464ac5ab903da"}))},Object.defineProperty(n.prototype,"hostElement",{get:function(){return b(this)},enumerable:!1,configurable:!0}),n}();F.style=A;export{T as alc_dropdown,F as alc_menu};
